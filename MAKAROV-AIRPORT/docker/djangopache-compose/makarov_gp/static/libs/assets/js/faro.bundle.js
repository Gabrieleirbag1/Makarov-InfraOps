/*! For license information please see faro.bundle.js.LICENSE.txt */
newFunction();

function newFunction() {
    (() => {
        var t = {
            132: t => {
                "use strict"; function e(t) { return "function" == typeof t; } var n = console.error.bind(console); function r(t, e, n) { var r = !!t[e] && t.propertyIsEnumerable(e); Object.defineProperty(t, e, { configurable: !0, enumerable: r, writable: !0, value: n }); } function i(t) { t && t.logger && (e(t.logger) ? n = t.logger : n("new logger isn't a function, not replacing")); } function o(t, i, o) { if (t && t[i]) { if (!o) return n("no wrapper function"), void n((new Error).stack); if (e(t[i]) && e(o)) { var a = t[i], s = o(a, i); return r(s, "__original", a), r(s, "__unwrap", (function () { t[i] === s && r(t, i, a); })), r(s, "__wrapped", !0), r(t, i, s), s; } n("original object and wrapper must be functions"); } else n("no original function " + i + " to wrap"); } function a(t, e) { return t && t[e] ? t[e].__unwrap ? t[e].__unwrap() : void n("no original to unwrap to -- has " + e + " already been unwrapped?") : (n("no function to unwrap."), void n((new Error).stack)); } i.wrap = o, i.massWrap = function (t, e, r) { if (!t) return n("must provide one or more modules to patch"), void n((new Error).stack); Array.isArray(t) || (t = [t]), e && Array.isArray(e) ? t.forEach((function (t) { e.forEach((function (e) { o(t, e, r); })); })) : n("must provide one or more functions to wrap on modules"); }, i.unwrap = a, i.massUnwrap = function (t, e) { if (!t) return n("must provide one or more modules to patch"), void n((new Error).stack); Array.isArray(t) || (t = [t]), e && Array.isArray(e) ? t.forEach((function (t) { e.forEach((function (e) { a(t, e); })); })) : n("must provide one or more functions to unwrap on modules"); }, t.exports = i;
            }, 232: function (t, e, n) {
                var r; !function (i, o) {
                    "use strict"; var a = "function", s = "undefined", u = "object", c = "string", l = "major", f = "model", p = "name", d = "type", h = "vendor", v = "version", g = "architecture", m = "console", _ = "mobile", y = "tablet", b = "smarttv", E = "wearable", T = "embedded", S = "Amazon", w = "Apple", O = "ASUS", R = "BlackBerry", L = "Browser", P = "Chrome", A = "Firefox", C = "Google", k = "Huawei", I = "LG", N = "Microsoft", x = "Motorola", D = "Opera", M = "Samsung", j = "Sharp", U = "Sony", B = "Xiaomi", z = "Zebra", F = "Facebook", H = "Chromium OS", V = "Mac OS", Z = " Browser", G = function (t) { for (var e = {}, n = 0; n < t.length; n++) e[t[n].toUpperCase()] = t[n]; return e; }, X = function (t, e) { return typeof t === c && -1 !== q(e).indexOf(q(t)); }, q = function (t) { return t.toLowerCase(); }, $ = function (t, e) { if (typeof t === c) return t = t.replace(/^\s\s*/, ""), typeof e === s ? t : t.substring(0, 500); }, W = function (t, e) { for (var n, r, i, s, c, l, f = 0; f < e.length && !c;) { var p = e[f], d = e[f + 1]; for (n = r = 0; n < p.length && !c && p[n];) if (c = p[n++].exec(t)) for (i = 0; i < d.length; i++) l = c[++r], typeof (s = d[i]) === u && s.length > 0 ? 2 === s.length ? typeof s[1] == a ? this[s[0]] = s[1].call(this, l) : this[s[0]] = s[1] : 3 === s.length ? typeof s[1] !== a || s[1].exec && s[1].test ? this[s[0]] = l ? l.replace(s[1], s[2]) : o : this[s[0]] = l ? s[1].call(this, l, s[2]) : o : 4 === s.length && (this[s[0]] = l ? s[3].call(this, l.replace(s[1], s[2])) : o) : this[s] = l || o; f += 2; } }, K = function (t, e) { for (var n in e) if (typeof e[n] === u && e[n].length > 0) { for (var r = 0; r < e[n].length; r++) if (X(e[n][r], t)) return "?" === n ? o : n; } else if (X(e[n], t)) return "?" === n ? o : n; return e.hasOwnProperty("*") ? e["*"] : t; }, Y = { ME: "4.90", "NT 3.11": "NT3.51", "NT 4.0": "NT4.0", 2e3: "NT 5.0", XP: ["NT 5.1", "NT 5.2"], Vista: "NT 6.0", 7: "NT 6.1", 8: "NT 6.2", 8.1: "NT 6.3", 10: ["NT 6.4", "NT 10.0"], RT: "ARM" }, J = { browser: [[/\b(?:crmo|crios)\/([\w\.]+)/i], [v, [p, "Chrome"]], [/edg(?:e|ios|a)?\/([\w\.]+)/i], [v, [p, "Edge"]], [/(opera mini)\/([-\w\.]+)/i, /(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i, /(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i], [p, v], [/opios[\/ ]+([\w\.]+)/i], [v, [p, D + " Mini"]], [/\bop(?:rg)?x\/([\w\.]+)/i], [v, [p, D + " GX"]], [/\bopr\/([\w\.]+)/i], [v, [p, D]], [/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i], [v, [p, "Baidu"]], [/(kindle)\/([\w\.]+)/i, /(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i, /(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i, /(?:ms|\()(ie) ([\w\.]+)/i, /(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio)\/([-\w\.]+)/i, /(heytap|ovi)browser\/([\d\.]+)/i, /(weibo)__([\d\.]+)/i], [p, v], [/quark(?:pc)?\/([-\w\.]+)/i], [v, [p, "Quark"]], [/\bddg\/([\w\.]+)/i], [v, [p, "DuckDuckGo"]], [/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i], [v, [p, "UC" + L]], [/microm.+\bqbcore\/([\w\.]+)/i, /\bqbcore\/([\w\.]+).+microm/i, /micromessenger\/([\w\.]+)/i], [v, [p, "WeChat"]], [/konqueror\/([\w\.]+)/i], [v, [p, "Konqueror"]], [/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i], [v, [p, "IE"]], [/ya(?:search)?browser\/([\w\.]+)/i], [v, [p, "Yandex"]], [/slbrowser\/([\w\.]+)/i], [v, [p, "Smart Lenovo " + L]], [/(avast|avg)\/([\w\.]+)/i], [[p, /(.+)/, "$1 Secure " + L], v], [/\bfocus\/([\w\.]+)/i], [v, [p, A + " Focus"]], [/\bopt\/([\w\.]+)/i], [v, [p, D + " Touch"]], [/coc_coc\w+\/([\w\.]+)/i], [v, [p, "Coc Coc"]], [/dolfin\/([\w\.]+)/i], [v, [p, "Dolphin"]], [/coast\/([\w\.]+)/i], [v, [p, D + " Coast"]], [/miuibrowser\/([\w\.]+)/i], [v, [p, "MIUI " + L]], [/fxios\/([-\w\.]+)/i], [v, [p, A]], [/\bqihu|(qi?ho?o?|360)browser/i], [[p, "360" + Z]], [/\b(qq)\/([\w\.]+)/i], [[p, /(.+)/, "$1Browser"], v], [/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i], [[p, /(.+)/, "$1" + Z], v], [/samsungbrowser\/([\w\.]+)/i], [v, [p, M + " Internet"]], [/(comodo_dragon)\/([\w\.]+)/i], [[p, /_/g, " "], v], [/metasr[\/ ]?([\d\.]+)/i], [v, [p, "Sogou Explorer"]], [/(sogou)mo\w+\/([\d\.]+)/i], [[p, "Sogou Mobile"], v], [/(electron)\/([\w\.]+) safari/i, /(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i, /m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i], [p, v], [/(lbbrowser|rekonq)/i, /\[(linkedin)app\]/i], [p], [/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i], [[p, F], v], [/(Klarna)\/([\w\.]+)/i, /(kakao(?:talk|story))[\/ ]([\w\.]+)/i, /(naver)\(.*?(\d+\.[\w\.]+).*\)/i, /safari (line)\/([\w\.]+)/i, /\b(line)\/([\w\.]+)\/iab/i, /(alipay)client\/([\w\.]+)/i, /(twitter)(?:and| f.+e\/([\w\.]+))/i, /(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i], [p, v], [/\bgsa\/([\w\.]+) .*safari\//i], [v, [p, "GSA"]], [/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i], [v, [p, "TikTok"]], [/headlesschrome(?:\/([\w\.]+)| )/i], [v, [p, P + " Headless"]], [/ wv\).+(chrome)\/([\w\.]+)/i], [[p, P + " WebView"], v], [/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i], [v, [p, "Android " + L]], [/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i], [p, v], [/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i], [v, [p, "Mobile Safari"]], [/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i], [v, p], [/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i], [p, [v, K, { "1.0": "/8", 1.2: "/1", 1.3: "/3", "2.0": "/412", "2.0.2": "/416", "2.0.3": "/417", "2.0.4": "/419", "?": "/" }]], [/(webkit|khtml)\/([\w\.]+)/i], [p, v], [/(navigator|netscape\d?)\/([-\w\.]+)/i], [[p, "Netscape"], v], [/(wolvic)\/([\w\.]+)/i], [p, v], [/mobile vr; rv:([\w\.]+)\).+firefox/i], [v, [p, A + " Reality"]], [/ekiohf.+(flow)\/([\w\.]+)/i, /(swiftfox)/i, /(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i, /(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i, /(firefox)\/([\w\.]+)/i, /(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i, /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i, /(links) \(([\w\.]+)/i], [p, [v, /_/g, "."]], [/(cobalt)\/([\w\.]+)/i], [p, [v, /master.|lts./, ""]]], cpu: [[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i], [[g, "amd64"]], [/(ia32(?=;))/i], [[g, q]], [/((?:i[346]|x)86)[;\)]/i], [[g, "ia32"]], [/\b(aarch64|arm(v?8e?l?|_?64))\b/i], [[g, "arm64"]], [/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i], [[g, "armhf"]], [/windows (ce|mobile); ppc;/i], [[g, "arm"]], [/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i], [[g, /ower/, "", q]], [/(sun4\w)[;\)]/i], [[g, "sparc"]], [/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i], [[g, q]]], device: [[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i], [f, [h, M], [d, y]], [/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i, /samsung[- ]((?!sm-[lr])[-\w]+)/i, /sec-(sgh\w+)/i], [f, [h, M], [d, _]], [/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i], [f, [h, w], [d, _]], [/\((ipad);[-\w\),; ]+apple/i, /applecoremedia\/[\w\.]+ \((ipad)/i, /\b(ipad)\d\d?,\d\d?[;\]].+ios/i], [f, [h, w], [d, y]], [/(macintosh);/i], [f, [h, w]], [/\b(sh-?[altvz]?\d\d[a-ekm]?)/i], [f, [h, j], [d, _]], [/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i], [f, [h, k], [d, y]], [/(?:huawei|honor)([-\w ]+)[;\)]/i, /\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i], [f, [h, k], [d, _]], [/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i, /\b; (\w+) build\/hm\1/i, /\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i, /\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i, /oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i, /\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i], [[f, /_/g, " "], [h, B], [d, _]], [/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i, /\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i], [[f, /_/g, " "], [h, B], [d, y]], [/; (\w+) bui.+ oppo/i, /\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i], [f, [h, "OPPO"], [d, _]], [/\b(opd2\d{3}a?) bui/i], [f, [h, "OPPO"], [d, y]], [/vivo (\w+)(?: bui|\))/i, /\b(v[12]\d{3}\w?[at])(?: bui|;)/i], [f, [h, "Vivo"], [d, _]], [/\b(rmx[1-3]\d{3})(?: bui|;|\))/i], [f, [h, "Realme"], [d, _]], [/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i, /\bmot(?:orola)?[- ](\w*)/i, /((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i], [f, [h, x], [d, _]], [/\b(mz60\d|xoom[2 ]{0,2}) build\//i], [f, [h, x], [d, y]], [/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i], [f, [h, I], [d, y]], [/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i, /\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i, /\blg-?([\d\w]+) bui/i], [f, [h, I], [d, _]], [/(ideatab[-\w ]+)/i, /lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i], [f, [h, "Lenovo"], [d, y]], [/(?:maemo|nokia).*(n900|lumia \d+)/i, /nokia[-_ ]?([-\w\.]*)/i], [[f, /_/g, " "], [h, "Nokia"], [d, _]], [/(pixel c)\b/i], [f, [h, C], [d, y]], [/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i], [f, [h, C], [d, _]], [/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i], [f, [h, U], [d, _]], [/sony tablet [ps]/i, /\b(?:sony)?sgp\w+(?: bui|\))/i], [[f, "Xperia Tablet"], [h, U], [d, y]], [/ (kb2005|in20[12]5|be20[12][59])\b/i, /(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i], [f, [h, "OnePlus"], [d, _]], [/(alexa)webm/i, /(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i, /(kf[a-z]+)( bui|\)).+silk\//i], [f, [h, S], [d, y]], [/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i], [[f, /(.+)/g, "Fire Phone $1"], [h, S], [d, _]], [/(playbook);[-\w\),; ]+(rim)/i], [f, h, [d, y]], [/\b((?:bb[a-f]|st[hv])100-\d)/i, /\(bb10; (\w+)/i], [f, [h, R], [d, _]], [/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i], [f, [h, O], [d, y]], [/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i], [f, [h, O], [d, _]], [/(nexus 9)/i], [f, [h, "HTC"], [d, y]], [/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i, /(zte)[- ]([\w ]+?)(?: bui|\/|\))/i, /(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i], [h, [f, /_/g, " "], [d, _]], [/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i], [f, [h, "TCL"], [d, y]], [/(itel) ((\w+))/i], [[h, q], f, [d, K, { tablet: ["p10001l", "w7001"], "*": "mobile" }]], [/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i], [f, [h, "Acer"], [d, y]], [/droid.+; (m[1-5] note) bui/i, /\bmz-([-\w]{2,})/i], [f, [h, "Meizu"], [d, _]], [/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i], [f, [h, "Ulefone"], [d, _]], [/droid.+; (a(?:015|06[35]|142p?))/i], [f, [h, "Nothing"], [d, _]], [/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i, /(hp) ([\w ]+\w)/i, /(asus)-?(\w+)/i, /(microsoft); (lumia[\w ]+)/i, /(lenovo)[-_ ]?([-\w]+)/i, /(jolla)/i, /(oppo) ?([\w ]+) bui/i], [h, f, [d, _]], [/(kobo)\s(ereader|touch)/i, /(archos) (gamepad2?)/i, /(hp).+(touchpad(?!.+tablet)|tablet)/i, /(kindle)\/([\w\.]+)/i, /(nook)[\w ]+build\/(\w+)/i, /(dell) (strea[kpr\d ]*[\dko])/i, /(le[- ]+pan)[- ]+(\w{1,9}) bui/i, /(trinity)[- ]*(t\d{3}) bui/i, /(gigaset)[- ]+(q\w{1,9}) bui/i, /(vodafone) ([\w ]+)(?:\)| bui)/i], [h, f, [d, y]], [/(surface duo)/i], [f, [h, N], [d, y]], [/droid [\d\.]+; (fp\du?)(?: b|\))/i], [f, [h, "Fairphone"], [d, _]], [/(u304aa)/i], [f, [h, "AT&T"], [d, _]], [/\bsie-(\w*)/i], [f, [h, "Siemens"], [d, _]], [/\b(rct\w+) b/i], [f, [h, "RCA"], [d, y]], [/\b(venue[\d ]{2,7}) b/i], [f, [h, "Dell"], [d, y]], [/\b(q(?:mv|ta)\w+) b/i], [f, [h, "Verizon"], [d, y]], [/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i], [f, [h, "Barnes & Noble"], [d, y]], [/\b(tm\d{3}\w+) b/i], [f, [h, "NuVision"], [d, y]], [/\b(k88) b/i], [f, [h, "ZTE"], [d, y]], [/\b(nx\d{3}j) b/i], [f, [h, "ZTE"], [d, _]], [/\b(gen\d{3}) b.+49h/i], [f, [h, "Swiss"], [d, _]], [/\b(zur\d{3}) b/i], [f, [h, "Swiss"], [d, y]], [/\b((zeki)?tb.*\b) b/i], [f, [h, "Zeki"], [d, y]], [/\b([yr]\d{2}) b/i, /\b(dragon[- ]+touch |dt)(\w{5}) b/i], [[h, "Dragon Touch"], f, [d, y]], [/\b(ns-?\w{0,9}) b/i], [f, [h, "Insignia"], [d, y]], [/\b((nxa|next)-?\w{0,9}) b/i], [f, [h, "NextBook"], [d, y]], [/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i], [[h, "Voice"], f, [d, _]], [/\b(lvtel\-)?(v1[12]) b/i], [[h, "LvTel"], f, [d, _]], [/\b(ph-1) /i], [f, [h, "Essential"], [d, _]], [/\b(v(100md|700na|7011|917g).*\b) b/i], [f, [h, "Envizen"], [d, y]], [/\b(trio[-\w\. ]+) b/i], [f, [h, "MachSpeed"], [d, y]], [/\btu_(1491) b/i], [f, [h, "Rotor"], [d, y]], [/(shield[\w ]+) b/i], [f, [h, "Nvidia"], [d, y]], [/(sprint) (\w+)/i], [h, f, [d, _]], [/(kin\.[onetw]{3})/i], [[f, /\./g, " "], [h, N], [d, _]], [/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i], [f, [h, z], [d, y]], [/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i], [f, [h, z], [d, _]], [/smart-tv.+(samsung)/i], [h, [d, b]], [/hbbtv.+maple;(\d+)/i], [[f, /^/, "SmartTV"], [h, M], [d, b]], [/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i], [[h, I], [d, b]], [/(apple) ?tv/i], [h, [f, w + " TV"], [d, b]], [/crkey/i], [[f, P + "cast"], [h, C], [d, b]], [/droid.+aft(\w+)( bui|\))/i], [f, [h, S], [d, b]], [/\(dtv[\);].+(aquos)/i, /(aquos-tv[\w ]+)\)/i], [f, [h, j], [d, b]], [/(bravia[\w ]+)( bui|\))/i], [f, [h, U], [d, b]], [/(mitv-\w{5}) bui/i], [f, [h, B], [d, b]], [/Hbbtv.*(technisat) (.*);/i], [h, f, [d, b]], [/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i, /hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i], [[h, $], [f, $], [d, b]], [/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i], [[d, b]], [/(ouya)/i, /(nintendo) ([wids3utch]+)/i], [h, f, [d, m]], [/droid.+; (shield) bui/i], [f, [h, "Nvidia"], [d, m]], [/(playstation [345portablevi]+)/i], [f, [h, U], [d, m]], [/\b(xbox(?: one)?(?!; xbox))[\); ]/i], [f, [h, N], [d, m]], [/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i], [f, [h, M], [d, E]], [/((pebble))app/i], [h, f, [d, E]], [/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i], [f, [h, w], [d, E]], [/droid.+; (glass) \d/i], [f, [h, C], [d, E]], [/droid.+; (wt63?0{2,3})\)/i], [f, [h, z], [d, E]], [/(quest( \d| pro)?)/i], [f, [h, F], [d, E]], [/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i], [h, [d, T]], [/(aeobc)\b/i], [f, [h, S], [d, T]], [/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i], [f, [d, _]], [/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i], [f, [d, y]], [/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i], [[d, y]], [/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i], [[d, _]], [/(android[-\w\. ]{0,9});.+buil/i], [f, [h, "Generic"]]], engine: [[/windows.+ edge\/([\w\.]+)/i], [v, [p, "EdgeHTML"]], [/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i], [v, [p, "Blink"]], [/(presto)\/([\w\.]+)/i, /(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i, /ekioh(flow)\/([\w\.]+)/i, /(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i, /(icab)[\/ ]([23]\.[\d\.]+)/i, /\b(libweb)/i], [p, v], [/rv\:([\w\.]{1,9})\b.+(gecko)/i], [v, p]], os: [[/microsoft (windows) (vista|xp)/i], [p, v], [/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i], [p, [v, K, Y]], [/windows nt 6\.2; (arm)/i, /windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i, /(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i], [[v, K, Y], [p, "Windows"]], [/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i, /(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i, /cfnetwork\/.+darwin/i], [[v, /_/g, "."], [p, "iOS"]], [/(mac os x) ?([\w\. ]*)/i, /(macintosh|mac_powerpc\b)(?!.+haiku)/i], [[p, V], [v, /_/g, "."]], [/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i], [v, p], [/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i, /(blackberry)\w*\/([\w\.]*)/i, /(tizen|kaios)[\/ ]([\w\.]+)/i, /\((series40);/i], [p, v], [/\(bb(10);/i], [v, [p, R]], [/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i], [v, [p, "Symbian"]], [/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i], [v, [p, A + " OS"]], [/web0s;.+rt(tv)/i, /\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i], [v, [p, "webOS"]], [/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i], [v, [p, "watchOS"]], [/crkey\/([\d\.]+)/i], [v, [p, P + "cast"]], [/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i], [[p, H], v], [/panasonic;(viera)/i, /(netrange)mmh/i, /(nettv)\/(\d+\.[\w\.]+)/i, /(nintendo|playstation) ([wids345portablevuch]+)/i, /(xbox); +xbox ([^\);]+)/i, /\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i, /(mint)[\/\(\) ]?(\w*)/i, /(mageia|vectorlinux)[; ]/i, /([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i, /(hurd|linux) ?([\w\.]*)/i, /(gnu) ?([\w\.]*)/i, /\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i, /(haiku) (\w+)/i], [p, v], [/(sunos) ?([\w\.\d]*)/i], [[p, "Solaris"], v], [/((?:open)?solaris)[-\/ ]?([\w\.]*)/i, /(aix) ((\d)(?=\.|\)| )[\w\.])*/i, /\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i, /(unix) ?([\w\.]*)/i], [p, v]] }, Q = function (t, e) { if (typeof t === u && (e = t, t = o), !(this instanceof Q)) return new Q(t, e).getResult(); var n = typeof i !== s && i.navigator ? i.navigator : o, r = t || (n && n.userAgent ? n.userAgent : ""), m = n && n.userAgentData ? n.userAgentData : o, b = e ? function (t, e) { var n = {}; for (var r in t) e[r] && e[r].length % 2 == 0 ? n[r] = e[r].concat(t[r]) : n[r] = t[r]; return n; } (J, e) : J, E = n && n.userAgent == r; return this.getBrowser = function () { var t, e = {}; return e[p] = o, e[v] = o, W.call(e, r, b.browser), e[l] = typeof (t = e[v]) === c ? t.replace(/[^\d\.]/g, "").split(".")[0] : o, E && n && n.brave && typeof n.brave.isBrave == a && (e[p] = "Brave"), e; }, this.getCPU = function () { var t = {}; return t[g] = o, W.call(t, r, b.cpu), t; }, this.getDevice = function () { var t = {}; return t[h] = o, t[f] = o, t[d] = o, W.call(t, r, b.device), E && !t[d] && m && m.mobile && (t[d] = _), E && "Macintosh" == t[f] && n && typeof n.standalone !== s && n.maxTouchPoints && n.maxTouchPoints > 2 && (t[f] = "iPad", t[d] = y), t; }, this.getEngine = function () { var t = {}; return t[p] = o, t[v] = o, W.call(t, r, b.engine), t; }, this.getOS = function () { var t = {}; return t[p] = o, t[v] = o, W.call(t, r, b.os), E && !t[p] && m && m.platform && "Unknown" != m.platform && (t[p] = m.platform.replace(/chrome os/i, H).replace(/macos/i, V)), t; }, this.getResult = function () { return { ua: this.getUA(), browser: this.getBrowser(), engine: this.getEngine(), os: this.getOS(), device: this.getDevice(), cpu: this.getCPU() }; }, this.getUA = function () { return r; }, this.setUA = function (t) { return r = typeof t === c && t.length > 500 ? $(t, 500) : t, this; }, this.setUA(r), this; }; Q.VERSION = "1.0.39", Q.BROWSER = G([p, v, l]), Q.CPU = G([g]), Q.DEVICE = G([f, h, d, m, _, b, y, E, T]), Q.ENGINE = Q.OS = G([p, v]), typeof e !== s ? (t.exports && (e = t.exports = Q), e.UAParser = Q) : n.amdO ? (r = function () { return Q; }.call(e, n, e, t)) === o || (t.exports = r) : typeof i !== s && (i.UAParser = Q); var tt = typeof i !== s && (i.jQuery || i.Zepto); if (tt && !tt.ua) { var et = new Q; tt.ua = et.getResult(), tt.ua.get = function () { return et.getUA(); }, tt.ua.set = function (t) { et.setUA(t); var e = et.getResult(); for (var n in e) tt.ua[n] = e[n]; }; }
                } ("object" == typeof window ? window : this);
            }, 216: () => {
                "use strict"; const t = globalThis; function e(e) { return (t.__Zone_symbol_prefix || "__zone_symbol__") + e; } function n() { const n = t.performance; function r(t) { n && n.mark && n.mark(t); } function i(t, e) { n && n.measure && n.measure(t, e); } r("Zone"); class o { static { this.__symbol__ = e; } static assertZonePatched() { if (t.Promise !== P.ZoneAwarePromise) throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)"); } static get root() { let t = o.current; for (; t.parent;) t = t.parent; return t; } static get current() { return C.zone; } static get currentTask() { return k; } static __load_patch(n, a, s = !1) { if (P.hasOwnProperty(n)) { const r = !0 === t[e("forceDuplicateZoneCheck")]; if (!s && r) throw Error("Already loaded patch: " + n); } else if (!t["__Zone_disable_" + n]) { const e = "Zone:" + n; r(e), P[n] = a(t, o, A), i(e, e); } } get parent() { return this._parent; } get name() { return this._name; } constructor(t, e) { this._parent = t, this._name = e ? e.name || "unnamed" : "<root>", this._properties = e && e.properties || {}, this._zoneDelegate = new s(this, this._parent && this._parent._zoneDelegate, e); } get(t) { const e = this.getZoneWith(t); if (e) return e._properties[t]; } getZoneWith(t) { let e = this; for (; e;) { if (e._properties.hasOwnProperty(t)) return e; e = e._parent; } return null; } fork(t) { if (!t) throw new Error("ZoneSpec required!"); return this._zoneDelegate.fork(this, t); } wrap(t, e) { if ("function" != typeof t) throw new Error("Expecting function got: " + t); const n = this._zoneDelegate.intercept(this, t, e), r = this; return function () { return r.runGuarded(n, this, arguments, e); }; } run(t, e, n, r) { C = { parent: C, zone: this }; try { return this._zoneDelegate.invoke(this, t, e, n, r); } finally { C = C.parent; } } runGuarded(t, e = null, n, r) { C = { parent: C, zone: this }; try { try { return this._zoneDelegate.invoke(this, t, e, n, r); } catch (t) { if (this._zoneDelegate.handleError(this, t)) throw t; } } finally { C = C.parent; } } runTask(t, e, n) { if (t.zone != this) throw new Error("A task can only be run in the zone of creation! (Creation: " + (t.zone || _).name + "; Execution: " + this.name + ")"); const r = t, { type: i, data: { isPeriodic: o = !1, isRefreshable: a = !1 } = {} } = t; if (t.state === y && (i === L || i === R)) return; const s = t.state != T; s && r._transitionTo(T, E); const u = k; k = r, C = { parent: C, zone: this }; try { i != R || !t.data || o || a || (t.cancelFn = void 0); try { return this._zoneDelegate.invokeTask(this, r, e, n); } catch (t) { if (this._zoneDelegate.handleError(this, t)) throw t; } } finally { const e = t.state; if (e !== y && e !== w) if (i == L || o || a && e === b) s && r._transitionTo(E, T, b); else { const t = r._zoneDelegates; this._updateTaskCount(r, -1), s && r._transitionTo(y, T, y), a && (r._zoneDelegates = t); } C = C.parent, k = u; } } scheduleTask(t) { if (t.zone && t.zone !== this) { let e = this; for (; e;) { if (e === t.zone) throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${t.zone.name}`); e = e.parent; } } t._transitionTo(b, y); const e = []; t._zoneDelegates = e, t._zone = this; try { t = this._zoneDelegate.scheduleTask(this, t); } catch (e) { throw t._transitionTo(w, b, y), this._zoneDelegate.handleError(this, e), e; } return t._zoneDelegates === e && this._updateTaskCount(t, 1), t.state == b && t._transitionTo(E, b), t; } scheduleMicroTask(t, e, n, r) { return this.scheduleTask(new u(O, t, e, n, r, void 0)); } scheduleMacroTask(t, e, n, r, i) { return this.scheduleTask(new u(R, t, e, n, r, i)); } scheduleEventTask(t, e, n, r, i) { return this.scheduleTask(new u(L, t, e, n, r, i)); } cancelTask(t) { if (t.zone != this) throw new Error("A task can only be cancelled in the zone of creation! (Creation: " + (t.zone || _).name + "; Execution: " + this.name + ")"); if (t.state === E || t.state === T) { t._transitionTo(S, E, T); try { this._zoneDelegate.cancelTask(this, t); } catch (e) { throw t._transitionTo(w, S), this._zoneDelegate.handleError(this, e), e; } return this._updateTaskCount(t, -1), t._transitionTo(y, S), t.runCount = -1, t; } } _updateTaskCount(t, e) { const n = t._zoneDelegates; -1 == e && (t._zoneDelegates = null); for (let r = 0; r < n.length; r++) n[r]._updateTaskCount(t.type, e); } } const a = { name: "", onHasTask: (t, e, n, r) => t.hasTask(n, r), onScheduleTask: (t, e, n, r) => t.scheduleTask(n, r), onInvokeTask: (t, e, n, r, i, o) => t.invokeTask(n, r, i, o), onCancelTask: (t, e, n, r) => t.cancelTask(n, r) }; class s { get zone() { return this._zone; } constructor(t, e, n) { this._taskCounts = { microTask: 0, macroTask: 0, eventTask: 0 }, this._zone = t, this._parentDelegate = e, this._forkZS = n && (n && n.onFork ? n : e._forkZS), this._forkDlgt = n && (n.onFork ? e : e._forkDlgt), this._forkCurrZone = n && (n.onFork ? this._zone : e._forkCurrZone), this._interceptZS = n && (n.onIntercept ? n : e._interceptZS), this._interceptDlgt = n && (n.onIntercept ? e : e._interceptDlgt), this._interceptCurrZone = n && (n.onIntercept ? this._zone : e._interceptCurrZone), this._invokeZS = n && (n.onInvoke ? n : e._invokeZS), this._invokeDlgt = n && (n.onInvoke ? e : e._invokeDlgt), this._invokeCurrZone = n && (n.onInvoke ? this._zone : e._invokeCurrZone), this._handleErrorZS = n && (n.onHandleError ? n : e._handleErrorZS), this._handleErrorDlgt = n && (n.onHandleError ? e : e._handleErrorDlgt), this._handleErrorCurrZone = n && (n.onHandleError ? this._zone : e._handleErrorCurrZone), this._scheduleTaskZS = n && (n.onScheduleTask ? n : e._scheduleTaskZS), this._scheduleTaskDlgt = n && (n.onScheduleTask ? e : e._scheduleTaskDlgt), this._scheduleTaskCurrZone = n && (n.onScheduleTask ? this._zone : e._scheduleTaskCurrZone), this._invokeTaskZS = n && (n.onInvokeTask ? n : e._invokeTaskZS), this._invokeTaskDlgt = n && (n.onInvokeTask ? e : e._invokeTaskDlgt), this._invokeTaskCurrZone = n && (n.onInvokeTask ? this._zone : e._invokeTaskCurrZone), this._cancelTaskZS = n && (n.onCancelTask ? n : e._cancelTaskZS), this._cancelTaskDlgt = n && (n.onCancelTask ? e : e._cancelTaskDlgt), this._cancelTaskCurrZone = n && (n.onCancelTask ? this._zone : e._cancelTaskCurrZone), this._hasTaskZS = null, this._hasTaskDlgt = null, this._hasTaskDlgtOwner = null, this._hasTaskCurrZone = null; const r = n && n.onHasTask, i = e && e._hasTaskZS; (r || i) && (this._hasTaskZS = r ? n : a, this._hasTaskDlgt = e, this._hasTaskDlgtOwner = this, this._hasTaskCurrZone = this._zone, n.onScheduleTask || (this._scheduleTaskZS = a, this._scheduleTaskDlgt = e, this._scheduleTaskCurrZone = this._zone), n.onInvokeTask || (this._invokeTaskZS = a, this._invokeTaskDlgt = e, this._invokeTaskCurrZone = this._zone), n.onCancelTask || (this._cancelTaskZS = a, this._cancelTaskDlgt = e, this._cancelTaskCurrZone = this._zone)); } fork(t, e) { return this._forkZS ? this._forkZS.onFork(this._forkDlgt, this.zone, t, e) : new o(t, e); } intercept(t, e, n) { return this._interceptZS ? this._interceptZS.onIntercept(this._interceptDlgt, this._interceptCurrZone, t, e, n) : e; } invoke(t, e, n, r, i) { return this._invokeZS ? this._invokeZS.onInvoke(this._invokeDlgt, this._invokeCurrZone, t, e, n, r, i) : e.apply(n, r); } handleError(t, e) { return !this._handleErrorZS || this._handleErrorZS.onHandleError(this._handleErrorDlgt, this._handleErrorCurrZone, t, e); } scheduleTask(t, e) { let n = e; if (this._scheduleTaskZS) this._hasTaskZS && n._zoneDelegates.push(this._hasTaskDlgtOwner), n = this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt, this._scheduleTaskCurrZone, t, e), n || (n = e); else if (e.scheduleFn) e.scheduleFn(e); else { if (e.type != O) throw new Error("Task is missing scheduleFn."); g(e); } return n; } invokeTask(t, e, n, r) { return this._invokeTaskZS ? this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt, this._invokeTaskCurrZone, t, e, n, r) : e.callback.apply(n, r); } cancelTask(t, e) { let n; if (this._cancelTaskZS) n = this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt, this._cancelTaskCurrZone, t, e); else { if (!e.cancelFn) throw Error("Task is not cancelable"); n = e.cancelFn(e); } return n; } hasTask(t, e) { try { this._hasTaskZS && this._hasTaskZS.onHasTask(this._hasTaskDlgt, this._hasTaskCurrZone, t, e); } catch (e) { this.handleError(t, e); } } _updateTaskCount(t, e) { const n = this._taskCounts, r = n[t], i = n[t] = r + e; if (i < 0) throw new Error("More tasks executed then were scheduled."); if (0 == r || 0 == i) { const e = { microTask: n.microTask > 0, macroTask: n.macroTask > 0, eventTask: n.eventTask > 0, change: t }; this.hasTask(this._zone, e); } } } class u { constructor(e, n, r, i, o, a) { if (this._zone = null, this.runCount = 0, this._zoneDelegates = null, this._state = "notScheduled", this.type = e, this.source = n, this.data = i, this.scheduleFn = o, this.cancelFn = a, !r) throw new Error("callback is not defined"); this.callback = r; const s = this; e === L && i && i.useG ? this.invoke = u.invokeTask : this.invoke = function () { return u.invokeTask.call(t, s, this, arguments); }; } static invokeTask(t, e, n) { t || (t = this), I++; try { return t.runCount++, t.zone.runTask(t, e, n); } finally { 1 == I && m(), I--; } } get zone() { return this._zone; } get state() { return this._state; } cancelScheduleRequest() { this._transitionTo(y, b); } _transitionTo(t, e, n) { if (this._state !== e && this._state !== n) throw new Error(`${this.type} '${this.source}': can not transition to '${t}', expecting state '${e}'${n ? " or '" + n + "'" : ""}, was '${this._state}'.`); this._state = t, t == y && (this._zoneDelegates = null); } toString() { return this.data && void 0 !== this.data.handleId ? this.data.handleId.toString() : Object.prototype.toString.call(this); } toJSON() { return { type: this.type, state: this.state, source: this.source, zone: this.zone.name, runCount: this.runCount }; } } const c = e("setTimeout"), l = e("Promise"), f = e("then"); let p, d = [], h = !1; function v(e) { if (p || t[l] && (p = t[l].resolve(0)), p) { let t = p[f]; t || (t = p.then), t.call(p, e); } else t[c](e, 0); } function g(t) { 0 === I && 0 === d.length && v(m), t && d.push(t); } function m() { if (!h) { for (h = !0; d.length;) { const t = d; d = []; for (let e = 0; e < t.length; e++) { const n = t[e]; try { n.zone.runTask(n, null, null); } catch (t) { A.onUnhandledError(t); } } } A.microtaskDrainDone(), h = !1; } } const _ = { name: "NO ZONE" }, y = "notScheduled", b = "scheduling", E = "scheduled", T = "running", S = "canceling", w = "unknown", O = "microTask", R = "macroTask", L = "eventTask", P = {}, A = { symbol: e, currentZoneFrame: () => C, onUnhandledError: N, microtaskDrainDone: N, scheduleMicroTask: g, showUncaughtError: () => !o[e("ignoreConsoleErrorUncaughtError")], patchEventTarget: () => [], patchOnProperties: N, patchMethod: () => N, bindArguments: () => [], patchThen: () => N, patchMacroTask: () => N, patchEventPrototype: () => N, isIEOrEdge: () => !1, getGlobalObjects: () => { }, ObjectDefineProperty: () => N, ObjectGetOwnPropertyDescriptor: () => { }, ObjectCreate: () => { }, ArraySlice: () => [], patchClass: () => N, wrapWithCurrentZone: () => N, filterProperties: () => [], attachOriginToPatched: () => N, _redefineProperty: () => N, patchCallbacks: () => N, nativeScheduleMicroTask: v }; let C = { parent: null, zone: new o(null, null) }, k = null, I = 0; function N() { } return i("Zone", "Zone"), o; } const r = Object.getOwnPropertyDescriptor, i = Object.defineProperty, o = Object.getPrototypeOf, a = Object.create, s = Array.prototype.slice, u = "addEventListener", c = "removeEventListener", l = e(u), f = e(c), p = "true", d = "false", h = e(""); function v(t, e) { return Zone.current.wrap(t, e); } function g(t, e, n, r, i) { return Zone.current.scheduleMacroTask(t, e, n, r, i); } const m = e, _ = "undefined" != typeof window, y = _ ? window : void 0, b = _ && y || globalThis; function E(t, e) { for (let n = t.length - 1; n >= 0; n--) "function" == typeof t[n] && (t[n] = v(t[n], e + "_" + n)); return t; } function T(t) { return !t || !1 !== t.writable && !("function" == typeof t.get && void 0 === t.set); } const S = "undefined" != typeof WorkerGlobalScope && self instanceof WorkerGlobalScope, w = !("nw" in b) && void 0 !== b.process && "[object process]" === b.process.toString(), O = !w && !S && !(!_ || !y.HTMLElement), R = void 0 !== b.process && "[object process]" === b.process.toString() && !S && !(!_ || !y.HTMLElement), L = {}, P = m("enable_beforeunload"), A = function (t) { if (!(t = t || b.event)) return; let e = L[t.type]; e || (e = L[t.type] = m("ON_PROPERTY" + t.type)); const n = this || t.target || b, r = n[e]; let i; if (O && n === y && "error" === t.type) { const e = t; i = r && r.call(this, e.message, e.filename, e.lineno, e.colno, e.error), !0 === i && t.preventDefault(); } else i = r && r.apply(this, arguments), "beforeunload" === t.type && b[P] && "string" == typeof i ? t.returnValue = i : null == i || i || t.preventDefault(); return i; }; function C(t, e, n) { let o = r(t, e); if (!o && n && r(n, e) && (o = { enumerable: !0, configurable: !0 }), !o || !o.configurable) return; const a = m("on" + e + "patched"); if (t.hasOwnProperty(a) && t[a]) return; delete o.writable, delete o.value; const s = o.get, u = o.set, c = e.slice(2); let l = L[c]; l || (l = L[c] = m("ON_PROPERTY" + c)), o.set = function (e) { let n = this; n || t !== b || (n = b), n && ("function" == typeof n[l] && n.removeEventListener(c, A), u && u.call(n, null), n[l] = e, "function" == typeof e && n.addEventListener(c, A, !1)); }, o.get = function () { let n = this; if (n || t !== b || (n = b), !n) return null; const r = n[l]; if (r) return r; if (s) { let t = s.call(this); if (t) return o.set.call(this, t), "function" == typeof n.removeAttribute && n.removeAttribute(e), t; } return null; }, i(t, e, o), t[a] = !0; } function k(t, e, n) { if (e) for (let r = 0; r < e.length; r++) C(t, "on" + e[r], n); else { const e = []; for (const n in t) "on" == n.slice(0, 2) && e.push(n); for (let r = 0; r < e.length; r++) C(t, e[r], n); } } const I = m("originalInstance"); function N(t) { const e = b[t]; if (!e) return; b[m(t)] = e, b[t] = function () { const n = E(arguments, t); switch (n.length) { case 0: this[I] = new e; break; case 1: this[I] = new e(n[0]); break; case 2: this[I] = new e(n[0], n[1]); break; case 3: this[I] = new e(n[0], n[1], n[2]); break; case 4: this[I] = new e(n[0], n[1], n[2], n[3]); break; default: throw new Error("Arg list too long."); } }, M(b[t], e); const n = new e((function () { })); let r; for (r in n) "XMLHttpRequest" === t && "responseBlob" === r || function (e) { "function" == typeof n[e] ? b[t].prototype[e] = function () { return this[I][e].apply(this[I], arguments); } : i(b[t].prototype, e, { set: function (n) { "function" == typeof n ? (this[I][e] = v(n, t + "." + e), M(this[I][e], n)) : this[I][e] = n; }, get: function () { return this[I][e]; } }); } (r); for (r in e) "prototype" !== r && e.hasOwnProperty(r) && (b[t][r] = e[r]); } function x(t, e, n) { let i = t; for (; i && !i.hasOwnProperty(e);) i = o(i); !i && t[e] && (i = t); const a = m(e); let s = null; if (i && (!(s = i[a]) || !i.hasOwnProperty(a)) && (s = i[a] = i[e], T(i && r(i, e)))) { const t = n(s, a, e); i[e] = function () { return t(this, arguments); }, M(i[e], s); } return s; } function D(t, e, n) { let r = null; function i(t) { const e = t.data; return e.args[e.cbIdx] = function () { t.invoke.apply(this, arguments); }, r.apply(e.target, e.args), t; } r = x(t, e, (t => function (e, r) { const o = n(e, r); return o.cbIdx >= 0 && "function" == typeof r[o.cbIdx] ? g(o.name, r[o.cbIdx], o, i) : t.apply(e, r); })); } function M(t, e) { t[m("OriginalDelegate")] = e; } let j = !1, U = !1; function B() { try { const t = y.navigator.userAgent; if (-1 !== t.indexOf("MSIE ") || -1 !== t.indexOf("Trident/")) return !0; } catch (t) { } return !1; } function z() { if (j) return U; j = !0; try { const t = y.navigator.userAgent; -1 === t.indexOf("MSIE ") && -1 === t.indexOf("Trident/") && -1 === t.indexOf("Edge/") || (U = !0); } catch (t) { } return U; } function F(t) { return "function" == typeof t; } function H(t) { return "number" == typeof t; } let V = !1; if ("undefined" != typeof window) try { const t = Object.defineProperty({}, "passive", { get: function () { V = !0; } }); window.addEventListener("test", t, t), window.removeEventListener("test", t, t); } catch (t) { V = !1; } const Z = { useG: !0 }, G = {}, X = {}, q = new RegExp("^" + h + "(\\w+)(true|false)$"), $ = m("propagationStopped"); function W(t, e) { const n = (e ? e(t) : t) + d, r = (e ? e(t) : t) + p, i = h + n, o = h + r; G[t] = {}, G[t][d] = i, G[t][p] = o; } function K(t, e, n, r) { const i = r && r.add || u, a = r && r.rm || c, s = r && r.listeners || "eventListeners", l = r && r.rmAll || "removeAllListeners", f = m(i), v = "." + i + ":", g = "prependListener", _ = "." + g + ":", y = function (t, e, n) { if (t.isRemoved) return; const r = t.callback; let i; "object" == typeof r && r.handleEvent && (t.callback = t => r.handleEvent(t), t.originalDelegate = r); try { t.invoke(t, e, [n]); } catch (t) { i = t; } const o = t.options; if (o && "object" == typeof o && o.once) { const r = t.originalDelegate ? t.originalDelegate : t.callback; e[a].call(e, n.type, r, o); } return i; }; function b(n, r, i) { if (!(r = r || t.event)) return; const o = n || r.target || t, a = o[G[r.type][i ? p : d]]; if (a) { const t = []; if (1 === a.length) { const e = y(a[0], o, r); e && t.push(e); } else { const e = a.slice(); for (let n = 0; n < e.length && (!r || !0 !== r[$]); n++) { const i = y(e[n], o, r); i && t.push(i); } } if (1 === t.length) throw t[0]; for (let n = 0; n < t.length; n++) { const r = t[n]; e.nativeScheduleMicroTask((() => { throw r; })); } } } const E = function (t) { return b(this, t, !1); }, T = function (t) { return b(this, t, !0); }; function S(e, n) { if (!e) return !1; let r = !0; n && void 0 !== n.useG && (r = n.useG); const u = n && n.vh; let c = !0; n && void 0 !== n.chkDup && (c = n.chkDup); let y = !1; n && void 0 !== n.rt && (y = n.rt); let b = e; for (; b && !b.hasOwnProperty(i);) b = o(b); if (!b && e[i] && (b = e), !b) return !1; if (b[f]) return !1; const S = n && n.eventNameToString, O = {}, R = b[f] = b[i], L = b[m(a)] = b[a], P = b[m(s)] = b[s], A = b[m(l)] = b[l]; let C; n && n.prepend && (C = b[m(n.prepend)] = b[n.prepend]); const k = r ? function (t) { if (!O.isExisting) return R.call(O.target, O.eventName, O.capture ? T : E, O.options); } : function (t) { return R.call(O.target, O.eventName, t.invoke, O.options); }, I = r ? function (t) { if (!t.isRemoved) { const e = G[t.eventName]; let n; e && (n = e[t.capture ? p : d]); const r = n && t.target[n]; if (r) for (let e = 0; e < r.length; e++) if (r[e] === t) { r.splice(e, 1), t.isRemoved = !0, t.removeAbortListener && (t.removeAbortListener(), t.removeAbortListener = null), 0 === r.length && (t.allRemoved = !0, t.target[n] = null); break; } } if (t.allRemoved) return L.call(t.target, t.eventName, t.capture ? T : E, t.options); } : function (t) { return L.call(t.target, t.eventName, t.invoke, t.options); }, N = n && n.diff ? n.diff : function (t, e) { const n = typeof e; return "function" === n && t.callback === e || "object" === n && t.originalDelegate === e; }, x = Zone[m("UNPATCHED_EVENTS")], D = t[m("PASSIVE_EVENTS")], j = function (e, i, o, a, s = !1, l = !1) { return function () { const f = this || t; let h = arguments[0]; n && n.transferEventName && (h = n.transferEventName(h)); let v = arguments[1]; if (!v) return e.apply(this, arguments); if (w && "uncaughtException" === h) return e.apply(this, arguments); let g = !1; if ("function" != typeof v) { if (!v.handleEvent) return e.apply(this, arguments); g = !0; } if (u && !u(e, v, f, arguments)) return; const m = V && !!D && -1 !== D.indexOf(h), _ = function (t) { if ("object" == typeof t && null !== t) { const e = { ...t }; return t.signal && (e.signal = t.signal), e; } return t; } (function (t, e) { return !V && "object" == typeof t && t ? !!t.capture : V && e ? "boolean" == typeof t ? { capture: t, passive: !0 } : t ? "object" == typeof t && !1 !== t.passive ? { ...t, passive: !0 } : t : { passive: !0 } : t; } (arguments[2], m)), y = _?.signal; if (y?.aborted) return; if (x) for (let t = 0; t < x.length; t++) if (h === x[t]) return m ? e.call(f, h, v, _) : e.apply(this, arguments); const b = !!_ && ("boolean" == typeof _ || _.capture), E = !(!_ || "object" != typeof _) && _.once, T = Zone.current; let R = G[h]; R || (W(h, S), R = G[h]); const L = R[b ? p : d]; let P, A = f[L], C = !1; if (A) { if (C = !0, c) for (let t = 0; t < A.length; t++) if (N(A[t], v)) return; } else A = f[L] = []; const k = f.constructor.name, I = X[k]; I && (P = I[h]), P || (P = k + i + (S ? S(h) : h)), O.options = _, E && (O.options.once = !1), O.target = f, O.capture = b, O.eventName = h, O.isExisting = C; const M = r ? Z : void 0; M && (M.taskData = O), y && (O.options.signal = void 0); const j = T.scheduleEventTask(P, v, M, o, a); if (y) { O.options.signal = y; const t = () => j.zone.cancelTask(j); e.call(y, "abort", t, { once: !0 }), j.removeAbortListener = () => y.removeEventListener("abort", t); } return O.target = null, M && (M.taskData = null), E && (O.options.once = !0), (V || "boolean" != typeof j.options) && (j.options = _), j.target = f, j.capture = b, j.eventName = h, g && (j.originalDelegate = v), l ? A.unshift(j) : A.push(j), s ? f : void 0; }; }; return b[i] = j(R, v, k, I, y), C && (b[g] = j(C, _, (function (t) { return C.call(O.target, O.eventName, t.invoke, O.options); }), I, y, !0)), b[a] = function () { const e = this || t; let r = arguments[0]; n && n.transferEventName && (r = n.transferEventName(r)); const i = arguments[2], o = !!i && ("boolean" == typeof i || i.capture), a = arguments[1]; if (!a) return L.apply(this, arguments); if (u && !u(L, a, e, arguments)) return; const s = G[r]; let c; s && (c = s[o ? p : d]); const l = c && e[c]; if (l) for (let t = 0; t < l.length; t++) { const n = l[t]; if (N(n, a)) return l.splice(t, 1), n.isRemoved = !0, 0 !== l.length || (n.allRemoved = !0, e[c] = null, o || "string" != typeof r) || (e[h + "ON_PROPERTY" + r] = null), n.zone.cancelTask(n), y ? e : void 0; } return L.apply(this, arguments); }, b[s] = function () { const e = this || t; let r = arguments[0]; n && n.transferEventName && (r = n.transferEventName(r)); const i = [], o = Y(e, S ? S(r) : r); for (let t = 0; t < o.length; t++) { const e = o[t]; let n = e.originalDelegate ? e.originalDelegate : e.callback; i.push(n); } return i; }, b[l] = function () { const e = this || t; let r = arguments[0]; if (r) { n && n.transferEventName && (r = n.transferEventName(r)); const t = G[r]; if (t) { const n = t[d], i = t[p], o = e[n], s = e[i]; if (o) { const t = o.slice(); for (let e = 0; e < t.length; e++) { const n = t[e]; let i = n.originalDelegate ? n.originalDelegate : n.callback; this[a].call(this, r, i, n.options); } } if (s) { const t = s.slice(); for (let e = 0; e < t.length; e++) { const n = t[e]; let i = n.originalDelegate ? n.originalDelegate : n.callback; this[a].call(this, r, i, n.options); } } } } else { const t = Object.keys(e); for (let e = 0; e < t.length; e++) { const n = t[e], r = q.exec(n); let i = r && r[1]; i && "removeListener" !== i && this[l].call(this, i); } this[l].call(this, "removeListener"); } if (y) return this; }, M(b[i], R), M(b[a], L), A && M(b[l], A), P && M(b[s], P), !0; } let O = []; for (let t = 0; t < n.length; t++) O[t] = S(n[t], r); return O; } function Y(t, e) { if (!e) { const n = []; for (let r in t) { const i = q.exec(r); let o = i && i[1]; if (o && (!e || o === e)) { const e = t[r]; if (e) for (let t = 0; t < e.length; t++) n.push(e[t]); } } return n; } let n = G[e]; n || (W(e), n = G[e]); const r = t[n[d]], i = t[n[p]]; return r ? i ? r.concat(i) : r.slice() : i ? i.slice() : []; } function J(t, e) { const n = t.Event; n && n.prototype && e.patchMethod(n.prototype, "stopImmediatePropagation", (t => function (e, n) { e[$] = !0, t && t.apply(e, n); })); } function Q(t, e) { e.patchMethod(t, "queueMicrotask", (t => function (t, e) { Zone.current.scheduleMicroTask("queueMicrotask", e[0]); })); } const tt = m("zoneTask"); function et(t, e, n, r) { let i = null, o = null; n += r; const a = {}; function s(e) { const n = e.data; n.args[0] = function () { return e.invoke.apply(this, arguments); }; const r = i.apply(t, n.args); return H(r) ? n.handleId = r : (n.handle = r, n.isRefreshable = F(r.refresh)), e; } function u(e) { const { handle: n, handleId: r } = e.data; return o.call(t, n ?? r); } i = x(t, e += r, (n => function (i, o) { if (F(o[0])) { const t = { isRefreshable: !1, isPeriodic: "Interval" === r, delay: "Timeout" === r || "Interval" === r ? o[1] || 0 : void 0, args: o }, n = o[0]; o[0] = function () { try { return n.apply(this, arguments); } finally { const { handle: e, handleId: n, isPeriodic: r, isRefreshable: i } = t; r || i || (n ? delete a[n] : e && (e[tt] = null)); } }; const i = g(e, o[0], t, s, u); if (!i) return i; const { handleId: c, handle: l, isRefreshable: f, isPeriodic: p } = i.data; if (c) a[c] = i; else if (l && (l[tt] = i, f && !p)) { const t = l.refresh; l.refresh = function () { const { zone: e, state: n } = i; return "notScheduled" === n ? (i._state = "scheduled", e._updateTaskCount(i, 1)) : "running" === n && (i._state = "scheduling"), t.call(this); }; } return l ?? c ?? i; } return n.apply(t, o); })), o = x(t, n, (e => function (n, r) { const i = r[0]; let o; H(i) ? (o = a[i], delete a[i]) : (o = i?.[tt], o ? i[tt] = null : o = i), o?.type ? o.cancelFn && o.zone.cancelTask(o) : e.apply(t, r); })); } function nt(t, e) { if (Zone[e.symbol("patchEventTarget")]) return; const { eventNames: n, zoneSymbolEventNames: r, TRUE_STR: i, FALSE_STR: o, ZONE_SYMBOL_PREFIX: a } = e.getGlobalObjects(); for (let t = 0; t < n.length; t++) { const e = n[t], s = a + (e + o), u = a + (e + i); r[e] = {}, r[e][o] = s, r[e][i] = u; } const s = t.EventTarget; return s && s.prototype ? (e.patchEventTarget(t, e, [s && s.prototype]), !0) : void 0; } function rt(t, e, n) { if (!n || 0 === n.length) return e; const r = n.filter((e => e.target === t)); if (!r || 0 === r.length) return e; const i = r[0].ignoreProperties; return e.filter((t => -1 === i.indexOf(t))); } function it(t, e, n, r) { t && k(t, rt(t, e, n), r); } function ot(t) { return Object.getOwnPropertyNames(t).filter((t => t.startsWith("on") && t.length > 2)).map((t => t.substring(2))); } function at(t, e) { if (w && !R) return; if (Zone[t.symbol("patchEvents")]) return; const n = e.__Zone_ignore_on_properties; let r = []; if (O) { const t = window; r = r.concat(["Document", "SVGElement", "Element", "HTMLElement", "HTMLBodyElement", "HTMLMediaElement", "HTMLFrameSetElement", "HTMLFrameElement", "HTMLIFrameElement", "HTMLMarqueeElement", "Worker"]); const e = B() ? [{ target: t, ignoreProperties: ["error"] }] : []; it(t, ot(t), n ? n.concat(e) : n, o(t)); } r = r.concat(["XMLHttpRequest", "XMLHttpRequestEventTarget", "IDBIndex", "IDBRequest", "IDBOpenDBRequest", "IDBDatabase", "IDBTransaction", "IDBCursor", "WebSocket"]); for (let t = 0; t < r.length; t++) { const i = e[r[t]]; i && i.prototype && it(i.prototype, ot(i.prototype), n); } } function st(t, e, n, r, i) { const o = Zone.__symbol__(r); if (e[o]) return; const a = e[o] = e[r]; e[r] = function (o, s, u) { return s && s.prototype && i.forEach((function (e) { const i = `${n}.${r}::` + e, o = s.prototype; try { if (o.hasOwnProperty(e)) { const n = t.ObjectGetOwnPropertyDescriptor(o, e); n && n.value ? (n.value = t.wrapWithCurrentZone(n.value, i), t._redefineProperty(s.prototype, e, n)) : o[e] && (o[e] = t.wrapWithCurrentZone(o[e], i)); } else o[e] && (o[e] = t.wrapWithCurrentZone(o[e], i)); } catch { } })), a.call(e, o, s, u); }, t.attachOriginToPatched(e[r], a); } const ut = function () { const t = globalThis, r = !0 === t[e("forceDuplicateZoneCheck")]; if (t.Zone && (r || "function" != typeof t.Zone.__symbol__)) throw new Error("Zone already loaded."); return t.Zone ??= n(), t.Zone; } (); !function (t) { (function (t) { t.__load_patch("ZoneAwarePromise", ((t, e, n) => { const r = Object.getOwnPropertyDescriptor, i = Object.defineProperty, o = n.symbol, a = [], s = !1 !== t[o("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")], u = o("Promise"), c = o("then"); n.onUnhandledError = t => { if (n.showUncaughtError()) { const e = t && t.rejection; e ? console.error("Unhandled Promise rejection:", e instanceof Error ? e.message : e, "; Zone:", t.zone.name, "; Task:", t.task && t.task.source, "; Value:", e, e instanceof Error ? e.stack : void 0) : console.error(t); } }, n.microtaskDrainDone = () => { for (; a.length;) { const t = a.shift(); try { t.zone.runGuarded((() => { if (t.throwOriginal) throw t.rejection; throw t; })); } catch (t) { f(t); } } }; const l = o("unhandledPromiseRejectionHandler"); function f(t) { n.onUnhandledError(t); try { const n = e[l]; "function" == typeof n && n.call(this, t); } catch (t) { } } function p(t) { return t && t.then; } function d(t) { return t; } function h(t) { return N.reject(t); } const v = o("state"), g = o("value"), m = o("finally"), _ = o("parentPromiseValue"), y = o("parentPromiseState"), b = null, E = !0, T = !1; function S(t, e) { return n => { try { L(t, e, n); } catch (e) { L(t, !1, e); } }; } const w = function () { let t = !1; return function (e) { return function () { t || (t = !0, e.apply(null, arguments)); }; }; }, O = "Promise resolved with itself", R = o("currentTaskTrace"); function L(t, r, o) { const u = w(); if (t === o) throw new TypeError(O); if (t[v] === b) { let l = null; try { "object" != typeof o && "function" != typeof o || (l = o && o.then); } catch (e) { return u((() => { L(t, !1, e); }))(), t; } if (r !== T && o instanceof N && o.hasOwnProperty(v) && o.hasOwnProperty(g) && o[v] !== b) A(o), L(t, o[v], o[g]); else if (r !== T && "function" == typeof l) try { l.call(o, u(S(t, r)), u(S(t, !1))); } catch (e) { u((() => { L(t, !1, e); }))(); } else { t[v] = r; const u = t[g]; if (t[g] = o, t[m] === m && r === E && (t[v] = t[y], t[g] = t[_]), r === T && o instanceof Error) { const t = e.currentTask && e.currentTask.data && e.currentTask.data.__creationTrace__; t && i(o, R, { configurable: !0, enumerable: !1, writable: !0, value: t }); } for (let e = 0; e < u.length;) C(t, u[e++], u[e++], u[e++], u[e++]); if (0 == u.length && r == T) { t[v] = 0; let r = o; try { throw new Error("Uncaught (in promise): " + ((c = o) && c.toString === Object.prototype.toString ? (c.constructor && c.constructor.name || "") + ": " + JSON.stringify(c) : c ? c.toString() : Object.prototype.toString.call(c)) + (o && o.stack ? "\n" + o.stack : "")); } catch (t) { r = t; } s && (r.throwOriginal = !0), r.rejection = o, r.promise = t, r.zone = e.current, r.task = e.currentTask, a.push(r), n.scheduleMicroTask(); } } } var c; return t; } const P = o("rejectionHandledHandler"); function A(t) { if (0 === t[v]) { try { const n = e[P]; n && "function" == typeof n && n.call(this, { rejection: t[g], promise: t }); } catch (t) { } t[v] = T; for (let e = 0; e < a.length; e++) t === a[e].promise && a.splice(e, 1); } } function C(t, e, n, r, i) { A(t); const o = t[v], a = o ? "function" == typeof r ? r : d : "function" == typeof i ? i : h; e.scheduleMicroTask("Promise.then", (() => { try { const r = t[g], i = !!n && m === n[m]; i && (n[_] = r, n[y] = o); const s = e.run(a, void 0, i && a !== h && a !== d ? [] : [r]); L(n, !0, s); } catch (t) { L(n, !1, t); } }), n); } const k = function () { }, I = t.AggregateError; class N { static toString() { return "function ZoneAwarePromise() { [native code] }"; } static resolve(t) { return t instanceof N ? t : L(new this(null), E, t); } static reject(t) { return L(new this(null), T, t); } static withResolvers() { const t = {}; return t.promise = new N(((e, n) => { t.resolve = e, t.reject = n; })), t; } static any(t) { if (!t || "function" != typeof t[Symbol.iterator]) return Promise.reject(new I([], "All promises were rejected")); const e = []; let n = 0; try { for (let r of t) n++, e.push(N.resolve(r)); } catch (t) { return Promise.reject(new I([], "All promises were rejected")); } if (0 === n) return Promise.reject(new I([], "All promises were rejected")); let r = !1; const i = []; return new N(((t, o) => { for (let a = 0; a < e.length; a++) e[a].then((e => { r || (r = !0, t(e)); }), (t => { i.push(t), n--, 0 === n && (r = !0, o(new I(i, "All promises were rejected"))); })); })); } static race(t) { let e, n, r = new this(((t, r) => { e = t, n = r; })); function i(t) { e(t); } function o(t) { n(t); } for (let e of t) p(e) || (e = this.resolve(e)), e.then(i, o); return r; } static all(t) { return N.allWithCallback(t); } static allSettled(t) { return (this && this.prototype instanceof N ? this : N).allWithCallback(t, { thenCallback: t => ({ status: "fulfilled", value: t }), errorCallback: t => ({ status: "rejected", reason: t }) }); } static allWithCallback(t, e) { let n, r, i = new this(((t, e) => { n = t, r = e; })), o = 2, a = 0; const s = []; for (let i of t) { p(i) || (i = this.resolve(i)); const t = a; try { i.then((r => { s[t] = e ? e.thenCallback(r) : r, o--, 0 === o && n(s); }), (i => { e ? (s[t] = e.errorCallback(i), o--, 0 === o && n(s)) : r(i); })); } catch (t) { r(t); } o++, a++; } return o -= 2, 0 === o && n(s), i; } constructor(t) { const e = this; if (!(e instanceof N)) throw new Error("Must be an instanceof Promise."); e[v] = b, e[g] = []; try { const n = w(); t && t(n(S(e, E)), n(S(e, T))); } catch (t) { L(e, !1, t); } } get [Symbol.toStringTag]() { return "Promise"; } get [Symbol.species]() { return N; } then(t, n) { let r = this.constructor?.[Symbol.species]; r && "function" == typeof r || (r = this.constructor || N); const i = new r(k), o = e.current; return this[v] == b ? this[g].push(o, i, t, n) : C(this, o, i, t, n), i; } catch(t) { return this.then(null, t); } finally(t) { let n = this.constructor?.[Symbol.species]; n && "function" == typeof n || (n = N); const r = new n(k); r[m] = m; const i = e.current; return this[v] == b ? this[g].push(i, r, t, t) : C(this, i, r, t, t), r; } } N.resolve = N.resolve, N.reject = N.reject, N.race = N.race, N.all = N.all; const D = t[u] = t.Promise; t.Promise = N; const M = o("thenPatched"); function j(t) { const e = t.prototype, n = r(e, "then"); if (n && (!1 === n.writable || !n.configurable)) return; const i = e.then; e[c] = i, t.prototype.then = function (t, e) { return new N(((t, e) => { i.call(this, t, e); })).then(t, e); }, t[M] = !0; } return n.patchThen = j, D && (j(D), x(t, "fetch", (t => { return e = t, function (t, n) { let r = e.apply(t, n); if (r instanceof N) return r; let i = r.constructor; return i[M] || j(i), r; }; var e; }))), Promise[e.__symbol__("uncaughtPromiseErrors")] = a, N; })); })(t), function (t) { t.__load_patch("toString", (t => { const e = Function.prototype.toString, n = m("OriginalDelegate"), r = m("Promise"), i = m("Error"), o = function () { if ("function" == typeof this) { const o = this[n]; if (o) return "function" == typeof o ? e.call(o) : Object.prototype.toString.call(o); if (this === Promise) { const n = t[r]; if (n) return e.call(n); } if (this === Error) { const n = t[i]; if (n) return e.call(n); } } return e.call(this); }; o[n] = e, Function.prototype.toString = o; const a = Object.prototype.toString; Object.prototype.toString = function () { return "function" == typeof Promise && this instanceof Promise ? "[object Promise]" : a.call(this); }; })); } (t), function (t) { t.__load_patch("util", ((t, e, n) => { const o = ot(t); n.patchOnProperties = k, n.patchMethod = x, n.bindArguments = E, n.patchMacroTask = D; const l = e.__symbol__("BLACK_LISTED_EVENTS"), f = e.__symbol__("UNPATCHED_EVENTS"); t[f] && (t[l] = t[f]), t[l] && (e[l] = e[f] = t[l]), n.patchEventPrototype = J, n.patchEventTarget = K, n.isIEOrEdge = z, n.ObjectDefineProperty = i, n.ObjectGetOwnPropertyDescriptor = r, n.ObjectCreate = a, n.ArraySlice = s, n.patchClass = N, n.wrapWithCurrentZone = v, n.filterProperties = rt, n.attachOriginToPatched = M, n._redefineProperty = Object.defineProperty, n.patchCallbacks = st, n.getGlobalObjects = () => ({ globalSources: X, zoneSymbolEventNames: G, eventNames: o, isBrowser: O, isMix: R, isNode: w, TRUE_STR: p, FALSE_STR: d, ZONE_SYMBOL_PREFIX: h, ADD_EVENT_LISTENER_STR: u, REMOVE_EVENT_LISTENER_STR: c }); })); } (t); } (ut), function (t) { t.__load_patch("legacy", (e => { const n = e[t.__symbol__("legacyPatch")]; n && n(); })), t.__load_patch("timers", (t => { const e = "set", n = "clear"; et(t, e, n, "Timeout"), et(t, e, n, "Interval"), et(t, e, n, "Immediate"); })), t.__load_patch("requestAnimationFrame", (t => { et(t, "request", "cancel", "AnimationFrame"), et(t, "mozRequest", "mozCancel", "AnimationFrame"), et(t, "webkitRequest", "webkitCancel", "AnimationFrame"); })), t.__load_patch("blocking", ((t, e) => { const n = ["alert", "prompt", "confirm"]; for (let r = 0; r < n.length; r++) x(t, n[r], ((n, r, i) => function (r, o) { return e.current.run(n, t, o, i); })); })), t.__load_patch("EventTarget", ((t, e, n) => { !function (t, e) { e.patchEventPrototype(t, e); } (t, n), nt(t, n); const r = t.XMLHttpRequestEventTarget; r && r.prototype && n.patchEventTarget(t, n, [r.prototype]); })), t.__load_patch("MutationObserver", ((t, e, n) => { N("MutationObserver"), N("WebKitMutationObserver"); })), t.__load_patch("IntersectionObserver", ((t, e, n) => { N("IntersectionObserver"); })), t.__load_patch("FileReader", ((t, e, n) => { N("FileReader"); })), t.__load_patch("on_property", ((t, e, n) => { at(n, t); })), t.__load_patch("customElements", ((t, e, n) => { !function (t, e) { const { isBrowser: n, isMix: r } = e.getGlobalObjects(); (n || r) && t.customElements && "customElements" in t && e.patchCallbacks(e, t.customElements, "customElements", "define", ["connectedCallback", "disconnectedCallback", "adoptedCallback", "attributeChangedCallback", "formAssociatedCallback", "formDisabledCallback", "formResetCallback", "formStateRestoreCallback"]); } (t, n); })), t.__load_patch("XHR", ((t, e) => { !function (t) { const u = t.XMLHttpRequest; if (!u) return; const c = u.prototype; let p = c[l], d = c[f]; if (!p) { const e = t.XMLHttpRequestEventTarget; if (e) { const t = e.prototype; p = t[l], d = t[f]; } } const h = "readystatechange", v = "scheduled"; function _(t) { const r = t.data, a = r.target; a[o] = !1, a[s] = !1; const u = a[i]; p || (p = a[l], d = a[f]), u && d.call(a, h, u); const c = a[i] = () => { if (a.readyState === a.DONE) if (!r.aborted && a[o] && t.state === v) { const n = a[e.__symbol__("loadfalse")]; if (0 !== a.status && n && n.length > 0) { const i = t.invoke; t.invoke = function () { const n = a[e.__symbol__("loadfalse")]; for (let e = 0; e < n.length; e++) n[e] === t && n.splice(e, 1); r.aborted || t.state !== v || i.call(t); }, n.push(t); } else t.invoke(); } else r.aborted || !1 !== a[o] || (a[s] = !0); }; return p.call(a, h, c), a[n] || (a[n] = t), w.apply(a, r.args), a[o] = !0, t; } function y() { } function b(t) { const e = t.data; return e.aborted = !0, O.apply(e.target, e.args); } const E = x(c, "open", (() => function (t, e) { return t[r] = 0 == e[2], t[a] = e[1], E.apply(t, e); })), T = m("fetchTaskAborting"), S = m("fetchTaskScheduling"), w = x(c, "send", (() => function (t, n) { if (!0 === e.current[S]) return w.apply(t, n); if (t[r]) return w.apply(t, n); { const e = { target: t, url: t[a], isPeriodic: !1, args: n, aborted: !1 }, r = g("XMLHttpRequest.send", y, e, _, b); t && !0 === t[s] && !e.aborted && r.state === v && r.invoke(); } })), O = x(c, "abort", (() => function (t, r) { const i = t[n]; if (i && "string" == typeof i.type) { if (null == i.cancelFn || i.data && i.data.aborted) return; i.zone.cancelTask(i); } else if (!0 === e.current[T]) return O.apply(t, r); })); } (t); const n = m("xhrTask"), r = m("xhrSync"), i = m("xhrListener"), o = m("xhrScheduled"), a = m("xhrURL"), s = m("xhrErrorBeforeScheduled"); })), t.__load_patch("geolocation", (t => { t.navigator && t.navigator.geolocation && function (t, e) { const n = t.constructor.name; for (let i = 0; i < e.length; i++) { const o = e[i], a = t[o]; if (a) { if (!T(r(t, o))) continue; t[o] = (t => { const e = function () { return t.apply(this, E(arguments, n + "." + o)); }; return M(e, t), e; })(a); } } } (t.navigator.geolocation, ["getCurrentPosition", "watchPosition"]); })), t.__load_patch("PromiseRejectionEvent", ((t, e) => { function n(e) { return function (n) { Y(t, e).forEach((r => { const i = t.PromiseRejectionEvent; if (i) { const t = new i(e, { promise: n.promise, reason: n.rejection }); r.invoke(t); } })); }; } t.PromiseRejectionEvent && (e[m("unhandledPromiseRejectionHandler")] = n("unhandledrejection"), e[m("rejectionHandledHandler")] = n("rejectionhandled")); })), t.__load_patch("queueMicrotask", ((t, e, n) => { Q(t, n); })); } (ut);
            }
        }, e = {}; function n(r) { var i = e[r]; if (void 0 !== i) return i.exports; var o = e[r] = { exports: {} }; return t[r].call(o.exports, o, o.exports, n), o.exports; } n.amdO = {}, n.g = function () { if ("object" == typeof globalThis) return globalThis; try { return this || new Function("return this")(); } catch (t) { if ("object" == typeof window) return window; } } (), (() => {
            "use strict"; var t; !function (t) { t.EXCEPTION = "exception", t.LOG = "log", t.MEASUREMENT = "measurement", t.TRACE = "trace", t.EVENT = "event"; } (t || (t = {})); const e = { [t.EXCEPTION]: "exceptions", [t.LOG]: "logs", [t.MEASUREMENT]: "measurements", [t.TRACE]: "traces", [t.EVENT]: "events" }; function r() { return Date.now(); } function i() { return (new Date).toISOString(); } function o(t) { return new Date(t).toISOString(); } function a(t, e) { return typeof t === e; } function s(t, e) { return Object.prototype.toString.call(t) === `[object ${e}]`; } function u(t, e) { try { return t instanceof e; } catch (t) { return !1; } } const c = t => a(t, "null"), l = t => a(t, "string"), f = t => !c(t) && a(t, "object"), p = t => a(t, "function"), d = t => s(t, "Array"), h = "undefined" != typeof Event, v = "undefined" != typeof Error, g = t => v && u(t, Error); function m(t, e) { if (t === e) return !0; if (a(t, "number") && isNaN(t)) return a(e, "number") && isNaN(e); const n = d(t), r = d(e); if (n !== r) return !1; if (n && r) { const n = t.length; if (n !== e.length) return !1; for (let r = n; 0 != r--;) if (!m(t[r], e[r])) return !1; return !0; } const i = f(t), o = f(e); if (i !== o) return !1; if (t && e && i && o) { const n = Object.keys(t), r = Object.keys(e); if (n.length !== r.length) return !1; for (let t of n) if (!r.includes(t)) return !1; for (let r of n) if (!m(t[r], e[r])) return !1; return !0; } return !1; } const _ = "Error"; let y; function b(t) { let e = t.cause; return g(e) ? e = t.cause.toString() : null !== e && (f(t.cause) || d(t.cause)) ? e = JSON.stringify(t.cause) : null != e && (e = t.cause.toString()), null == e ? {} : { cause: e }; } var E; !function (t) { t.TRACE = "trace", t.DEBUG = "debug", t.INFO = "info", t.LOG = "log", t.WARN = "warn", t.ERROR = "error"; } (E || (E = {})); const T = E.LOG, S = [E.TRACE, E.DEBUG, E.INFO, E.LOG, E.WARN, E.ERROR], w = t => t.map((t => { try { return String(t); } catch (t) { return ""; } })).join(" "); function O() { } var R; !function (t) { t[t.OFF = 0] = "OFF", t[t.ERROR = 1] = "ERROR", t[t.WARN = 2] = "WARN", t[t.INFO = 3] = "INFO", t[t.VERBOSE = 4] = "VERBOSE"; } (R || (R = {})); const L = { debug: O, error: O, info: O, prefix: "Faro", warn: O }, P = R.ERROR, A = Object.assign({}, console); function C(t = A, e = P) { const n = L; return e > R.OFF && (n.error = e >= R.ERROR ? function (...e) { t.error(`${n.prefix}\n`, ...e); } : O, n.warn = e >= R.WARN ? function (...e) { t.warn(`${n.prefix}\n`, ...e); } : O, n.info = e >= R.INFO ? function (...e) { t.info(`${n.prefix}\n`, ...e); } : O, n.debug = e >= R.VERBOSE ? function (...e) { t.debug(`${n.prefix}\n`, ...e); } : O), n; } let k = L; function I(t, e) { return k = C(t, e.internalLoggerLevel), k; } const N = "undefined" != typeof globalThis ? globalThis : void 0 !== n.g ? n.g : "undefined" != typeof self ? self : void 0, x = "1.11.0", D = "_faroInternal"; let M = {}; function j(t, e, n, r, i, o, a) { return e.debug("Initializing Faro"), M = { api: o, config: n, instrumentations: a, internalLogger: e, metas: r, pause: i.pause, transports: i, unpatchedConsole: t, unpause: i.unpause }, function (t) { t.config.isolate ? t.internalLogger.debug("Skipping registering internal Faro instance on global object") : (t.internalLogger.debug("Registering internal Faro instance on global object"), Object.defineProperty(N, D, { configurable: !1, enumerable: !1, writable: !1, value: t })); } (M), function (t) { if (t.config.preventGlobalExposure) t.internalLogger.debug("Skipping registering public Faro instance in the global scope"); else { if (t.internalLogger.debug(`Registering public faro reference in the global scope using "${t.config.globalObjectKey}" key`), t.config.globalObjectKey in N) return void t.internalLogger.warn(`Skipping global registration due to key "${t.config.globalObjectKey}" being used already. Please set "globalObjectKey" to something else or set "preventGlobalExposure" to "true"`); Object.defineProperty(N, t.config.globalObjectKey, { configurable: !1, writable: !1, value: t }); } } (M), M; } class U { constructor(t, e) { var n, r; this.signalBuffer = [], this.itemLimit = null !== (n = null == e ? void 0 : e.itemLimit) && void 0 !== n ? n : 50, this.sendTimeout = null !== (r = null == e ? void 0 : e.sendTimeout) && void 0 !== r ? r : 250, this.paused = (null == e ? void 0 : e.paused) || !1, this.sendFn = t, this.flushInterval = -1, this.paused || this.start(), document.addEventListener("visibilitychange", (() => { "hidden" === document.visibilityState && this.flush(); })); } addItem(t) { this.paused || (this.signalBuffer.push(t), this.signalBuffer.length >= this.itemLimit && this.flush()); } start() { this.paused = !1, this.sendTimeout > 0 && (this.flushInterval = window.setInterval((() => this.flush()), this.sendTimeout)); } pause() { this.paused = !0, clearInterval(this.flushInterval); } groupItems(t) { const e = new Map; return t.forEach((t => { const n = JSON.stringify(t.meta); let r = e.get(n); r = void 0 === r ? [t] : [...r, t], e.set(n, r); })), Array.from(e.values()); } flush() { this.paused || 0 === this.signalBuffer.length || (this.groupItems(this.signalBuffer).forEach(this.sendFn), this.signalBuffer = []); } } function B(e, n, r, i) { var o; n.debug("Initializing transports"); const a = []; let s = r.paused, u = []; const c = t => { let e = t; for (const t of u) { const n = e.map(t).filter(Boolean); if (0 === n.length) return []; e = n; } return e; }; let f; return (null === (o = r.batching) || void 0 === o ? void 0 : o.enabled) && (f = new U((t => { const e = c(t); if (0 !== e.length) for (const t of a) n.debug(`Transporting item using ${t.name}\n`, e), t.isBatched() && t.send(e); }), { sendTimeout: r.batching.sendTimeout, itemLimit: r.batching.itemLimit, paused: s })), { add: (...t) => { n.debug("Adding transports"), t.forEach((t => { n.debug(`Adding "${t.name}" transport`), a.some((e => e === t)) ? n.warn(`Transport ${t.name} is already added`) : (t.unpatchedConsole = e, t.internalLogger = n, t.config = r, t.metas = i, a.push(t)); })); }, addBeforeSendHooks: (...t) => { n.debug("Adding beforeSendHooks\n", u), t.forEach((t => { t && u.push(t); })); }, addIgnoreErrorsPatterns: (...e) => { n.debug("Adding ignoreErrorsPatterns\n", e), e.forEach((e => { var n; e && u.push((n = e, e => { if (e.type === t.EXCEPTION && e.payload) { const t = e.payload, r = `${t.type}: ${t.value}`; if (function (t, e) { return t.some((t => l(t) ? e.includes(t) : !!e.match(t))); } (n, r)) return null; } return e; })); })); }, getBeforeSendHooks: () => [...u], execute: t => { var e; s || ((null === (e = r.batching) || void 0 === e ? void 0 : e.enabled) && (null == f || f.addItem(t)), (t => { var e, i; if ((null === (e = r.batching) || void 0 === e ? void 0 : e.enabled) && a.every((t => t.isBatched()))) return; const [o] = c([t]); if (void 0 !== o) for (const t of a) n.debug(`Transporting item using ${t.name}\n`, o), t.isBatched() ? (null === (i = r.batching) || void 0 === i ? void 0 : i.enabled) || t.send([o]) : t.send(o); })(t)); }, isPaused: () => s, pause: () => { n.debug("Pausing transports"), null == f || f.pause(), s = !0; }, remove: (...t) => { n.debug("Removing transports"), t.forEach((t => { n.debug(`Removing "${t.name}" transport`); const e = a.indexOf(t); -1 !== e ? a.splice(e, 1) : n.warn(`Transport "${t.name}" is not added`); })); }, removeBeforeSendHooks: (...t) => { u.filter((e => !t.includes(e))); }, get transports() { return [...a]; }, unpause: () => { n.debug("Unpausing transports"), null == f || f.start(), s = !1; } }; } let z = A; function F(t) { var e; return z = null !== (e = t.unpatchedConsole) && void 0 !== e ? e : z, z; } function H(e) { const n = F(e), r = I(n, e); if (D in N && !e.isolate) return void r.error('Faro is already registered. Either add instrumentations, transports etc. to the global faro instance or use the "isolate" property'); r.debug("Initializing"); const a = function (t, e) { let n = [], r = []; const i = () => n.reduce(((t, e) => Object.assign(t, p(e) ? e() : e)), {}), o = () => { if (r.length) { const t = i(); r.forEach((e => e(t))); } }; return { add: (...t) => { e.debug("Adding metas\n", t), n.push(...t), o(); }, remove: (...t) => { e.debug("Removing metas\n", t), n = n.filter((e => !t.includes(e))), o(); }, addListener: t => { e.debug("Adding metas listener\n", t), r.push(t); }, removeListener: t => { e.debug("Removing metas listener\n", t), r = r.filter((e => e !== t)); }, get value() { return i(); } }; } (0, r), s = B(n, r, e, a), u = function (e, n, r, a, s) { n.debug("Initializing API"); const u = function (e, n, r, i, o) { let a; return n.debug("Initializing traces API"), { getOTEL: () => a, getTraceContext: () => { const t = null == a ? void 0 : a.trace.getSpanContext(a.context.active()); return t ? { trace_id: t.traceId, span_id: t.spanId } : void 0; }, initOTEL: (t, e) => { n.debug("Initializing OpenTelemetry"), a = { trace: t, context: e }; }, isOTELInitialized: () => !!a, pushTraces: e => { try { const r = { type: t.TRACE, payload: e, meta: i.value }; n.debug("Pushing trace\n", r), o.execute(r); } catch (t) { n.error("Error pushing trace\n", t); } } }; } (0, n, 0, a, s); return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({}, u), function (e, n, r, a, s, u) { var l; n.debug("Initializing exceptions API"); let f = null; y = null !== (l = r.parseStacktrace) && void 0 !== l ? l : y; const p = t => { n.debug("Changing stacktrace parser"), y = null != t ? t : y; }; return p(r.parseStacktrace), { changeStacktraceParser: p, getStacktraceParser: () => y, pushError: (e, { skipDedupe: l, stackFrames: p, type: d, context: h, spanContext: v, timestampOverwriteMs: g } = {}) => { d = d || e.name || _; const E = { meta: a.value, payload: { type: d, value: e.message, timestamp: g ? o(g) : i(), trace: v ? { trace_id: v.traceId, span_id: v.spanId } : u.getTraceContext(), context: Object.assign(Object.assign({}, b(e)), null != h ? h : {}) }, type: t.EXCEPTION }; (null == (p = null != p ? p : e.stack ? null == y ? void 0 : y(e).frames : void 0) ? void 0 : p.length) && (E.payload.stacktrace = { frames: p }); const T = { type: E.payload.type, value: E.payload.value, stackTrace: E.payload.stacktrace, context: E.payload.context }; l || !r.dedupe || c(f) || !m(T, f) ? (f = T, n.debug("Pushing exception\n", E), s.execute(E)) : n.debug("Skipping error push because it is the same as the last one\n", E.payload); } }; } (0, n, r, a, s, u)), function (t, e, n, r) { let i, o, a; e.debug("Initializing meta API"); const s = t => { o && r.remove(o), o = { user: t }, r.add(o); }, u = t => { i && r.remove(i), i = { session: t }, r.add(i); }; return { setUser: s, resetUser: s, setSession: u, resetSession: u, getSession: () => r.value.session, setView: t => { var e; if ((null === (e = null == a ? void 0 : a.view) || void 0 === e ? void 0 : e.name) === (null == t ? void 0 : t.name)) return; const n = a; a = { view: t }, r.add(a), n && r.remove(n); }, getView: () => r.value.view }; } (0, n, 0, a)), function (e, n, r, a, s, u) { var l; n.debug("Initializing logs API"); let f = null; const p = null !== (l = r.logArgsSerializer) && void 0 !== l ? l : w; return { pushLog: (e, { context: l, level: d, skipDedupe: h, spanContext: v, timestampOverwriteMs: g } = {}) => { try { const _ = { type: t.LOG, payload: { message: p(e), level: null != d ? d : T, context: null != l ? l : {}, timestamp: g ? o(g) : i(), trace: v ? { trace_id: v.traceId, span_id: v.spanId } : u.getTraceContext() }, meta: a.value }, y = { message: _.payload.message, level: _.payload.level, context: _.payload.context }; if (!h && r.dedupe && !c(f) && m(y, f)) return void n.debug("Skipping log push because it is the same as the last one\n", _.payload); f = y, n.debug("Pushing log\n", _), s.execute(_); } catch (t) { n.error("Error pushing log\n", t); } } }; } (0, n, r, a, s, u)), function (e, n, r, a, s, u) { n.debug("Initializing measurements API"); let l = null; return { pushMeasurement: (e, { skipDedupe: f, context: p, spanContext: d, timestampOverwriteMs: h } = {}) => { try { const v = { type: t.MEASUREMENT, payload: Object.assign(Object.assign({}, e), { trace: d ? { trace_id: d.traceId, span_id: d.spanId } : u.getTraceContext(), timestamp: h ? o(h) : i(), context: null != p ? p : {} }), meta: a.value }, g = { type: v.payload.type, values: v.payload.values, context: v.payload.context }; if (!f && r.dedupe && !c(l) && m(g, l)) return void n.debug("Skipping measurement push because it is the same as the last one\n", v.payload); l = g, n.debug("Pushing measurement\n", v), s.execute(v); } catch (t) { n.error("Error pushing measurement\n", t); } } }; } (0, n, r, a, s, u)), function (e, n, r, a, s, u) { let l = null; return { pushEvent: (e, f, p, { skipDedupe: d, spanContext: h, timestampOverwriteMs: v } = {}) => { try { const g = { meta: a.value, payload: { name: e, domain: null != p ? p : r.eventDomain, attributes: f, timestamp: v ? o(v) : i(), trace: h ? { trace_id: h.traceId, span_id: h.spanId } : u.getTraceContext() }, type: t.EVENT }, _ = { name: g.payload.name, attributes: g.payload.attributes, domain: g.payload.domain }; if (!d && r.dedupe && !c(l) && m(_, l)) return void n.debug("Skipping event push because it is the same as the last one\n", g.payload); l = _, n.debug("Pushing event\n", g), s.execute(g); } catch (t) { n.error("Error pushing event", t); } } }; } (0, n, r, a, s, u)); } (0, r, e, a, s), l = function (t, e, n, r, i, o) { e.debug("Initializing instrumentations"); const a = []; return { add: (...s) => { e.debug("Adding instrumentations"), s.forEach((s => { e.debug(`Adding "${s.name}" instrumentation`), a.some((t => t.name === s.name)) ? e.warn(`Instrumentation ${s.name} is already added`) : (s.unpatchedConsole = t, s.internalLogger = e, s.config = n, s.metas = r, s.transports = i, s.api = o, a.push(s), s.initialize()); })); }, get instrumentations() { return [...a]; }, remove: (...t) => { e.debug("Removing instrumentations"), t.forEach((t => { var n, r; e.debug(`Removing "${t.name}" instrumentation`); const i = a.reduce(((e, n, r) => null === e && n.name === t.name ? r : null), null); i ? (null === (r = (n = a[i]).destroy) || void 0 === r || r.call(n), a.splice(i, 1)) : e.warn(`Instrumentation "${t.name}" is not added`); })); } }; } (n, r, e, a, s, u), f = j(n, r, e, a, s, u, l); return function (t) { var e, n; const r = { sdk: { version: x }, app: { bundleId: t.config.app.name && (i = t.config.app.name, null == N ? void 0 : N[`__faroBundleId_${i}`]) } }; var i; const o = null === (e = t.config.sessionTracking) || void 0 === e ? void 0 : e.session; o && t.api.setSession(o), t.config.app && (r.app = Object.assign(Object.assign({}, t.config.app), r.app)), t.config.user && (r.user = t.config.user), t.config.view && (r.view = t.config.view), t.metas.add(r, ...null !== (n = t.config.metas) && void 0 !== n ? n : []); } (f), function (t) { t.transports.add(...t.config.transports), t.transports.addBeforeSendHooks(t.config.beforeSend), t.transports.addIgnoreErrorsPatterns(t.config.ignoreErrors); } (f), function (t) { t.instrumentations.add(...t.config.instrumentations); } (f), f; } const V = { enabled: !0, sendTimeout: 250, itemLimit: 50 }, Z = /^\s*at (?:(.*\).*?|.*?) ?\((?:address at )?)?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i, G = /\((\S*)(?::(\d+))(?::(\d+))\)/, X = /^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|safari-extension|safari-web-extension|capacitor)?:\/.*?|\[native code]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i, q = /(\S+) line (\d+)(?: > eval line \d+)* > eval/i, $ = "safari-extension", W = "safari-web-extension", K = /Minified React error #\d+;/i; function Y(t, e, n, r) { const i = { filename: t || document.location.href, function: e || "?" }; return void 0 !== n && (i.lineno = n), void 0 !== r && (i.colno = r), i; } function J(t, e) { const n = null == t ? void 0 : t.includes($), r = !n && (null == t ? void 0 : t.includes(W)); return n || r ? [(null == t ? void 0 : t.includes("@")) ? t.split("@")[0] : t, n ? `${$}:${e}` : `${W}:${e}`] : [t, e]; } function Q(t) { let e = []; t.stacktrace ? e = t.stacktrace.split("\n").filter(((t, e) => e % 2 == 0)) : t.stack && (e = t.stack.split("\n")); const n = e.reduce(((e, n, r) => { let i, o, s, u, c; if (i = Z.exec(n)) { if (o = i[1], s = i[2], u = i[3], c = i[4], null == s ? void 0 : s.startsWith("eval")) { const t = G.exec(s); t && (s = t[1], u = t[2], c = t[3]); } s = (null == s ? void 0 : s.startsWith("address at ")) ? s.substring(11) : s, [o, s] = J(o, s); } else if (i = X.exec(n)) { if (o = i[1], s = i[3], u = i[4], c = i[5], s && s.includes(" > eval")) { const t = q.exec(s); t && (o = o || "eval", s = t[1], u = t[2]); } else 0 === r && !c && (a(l = t.columnNumber, "number") && !isNaN(l) || a(l, "bigint")) && (c = String(t.columnNumber + 1));[o, s] = J(o, s); } var l; return (s || o) && e.push(Y(s, o, u ? Number(u) : void 0, c ? Number(c) : void 0)), e; }), []); return K.test(t.message) ? n.slice(1) : n; } function tt(t) { return { frames: Q(t) }; } const et = "com.grafana.faro.session", nt = 9e5, rt = { enabled: !0, persistent: !1, maxSessionPersistenceTime: nt }; var it = n(232); const ot = "unknown", at = [() => { const t = new it.UAParser, { name: e, version: n } = t.getBrowser(), { name: r, version: i } = t.getOS(), o = t.getUA(), a = navigator.language, s = navigator.userAgent.includes("Mobi"), u = function () { if (e && n) return "userAgentData" in navigator && navigator.userAgentData ? navigator.userAgentData.brands : void 0; } (); return { browser: { name: null != e ? e : ot, version: null != n ? n : ot, os: `${null != r ? r : ot} ${null != i ? i : ot}`, userAgent: null != o ? o : ot, language: null != a ? a : ot, mobile: s, brands: null != u ? u : ot, viewportWidth: `${window.innerWidth}`, viewportHeight: `${window.innerHeight}` } }; }, () => ({ page: { url: location.href } })], st = () => { const t = window.k6; return { k6: Object.assign({ isK6Browser: !0 }, (null == t ? void 0 : t.testRunId) && { testRunId: null == t ? void 0 : t.testRunId }) }; }; class ut { constructor() { this.unpatchedConsole = A, this.internalLogger = L, this.config = {}, this.metas = {}; } logDebug(...t) { this.internalLogger.debug(`${this.name}\n`, ...t); } logInfo(...t) { this.internalLogger.info(`${this.name}\n`, ...t); } logWarn(...t) { this.internalLogger.warn(`${this.name}\n`, ...t); } logError(...t) { this.internalLogger.error(`${this.name}\n`, ...t); } } class ct extends ut { isBatched() { return !1; } getIgnoreUrls() { return []; } } function lt(t, e) { var n, r; if (void 0 === e) return t; if (void 0 === t) return { resourceSpans: e }; const i = null === (n = t.resourceSpans) || void 0 === n ? void 0 : n[0]; if (void 0 === i) return t; const o = (null == i ? void 0 : i.scopeSpans) || [], a = (null === (r = null == e ? void 0 : e[0]) || void 0 === r ? void 0 : r.scopeSpans) || []; return Object.assign(Object.assign({}, t), { resourceSpans: [Object.assign(Object.assign({}, i), { scopeSpans: [...o, ...a] })] }); } function ft(t, e) { let n, r = !1; const i = () => { null != n ? (t(...n), n = null, setTimeout(i, e)) : r = !1; }; return (...o) => { r ? n = o : (t(...o), r = !0, setTimeout(i, e)); }; } const pt = "sessionStorage", dt = "localStorage"; function ht(t) { var e; try { let e; e = window[t]; const n = "__faro_storage_test__"; return e.setItem(n, n), e.removeItem(n), !0; } catch (n) { return null === (e = M.internalLogger) || void 0 === e || e.info(`Web storage of type ${t} is not available. Reason: ${n}`), !1; } } function vt(t, e) { return bt(e) ? window[e].getItem(t) : null; } function gt(t, e, n) { if (bt(n)) try { window[n].setItem(t, e); } catch (t) { } } function mt(t, e) { bt(e) && window[e].removeItem(t); } const _t = ht(dt), yt = ht(pt); function bt(t) { return t === dt ? _t : t === pt && yt; } function Et() { var t, e, n; const r = M.config.sessionTracking; let i = null !== (n = null !== (e = null === (t = null == r ? void 0 : r.sampler) || void 0 === t ? void 0 : t.call(r, { metas: M.metas.value })) && void 0 !== e ? e : null == r ? void 0 : r.samplingRate) && void 0 !== n ? n : 1; return "number" != typeof i && (i = 0), Math.random() < i; } function Tt(t = 10) { return Array.from(Array(t)).map((() => "abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ0123456789"[Math.floor(59 * Math.random())])).join(""); } function St({ sessionId: t, started: e, lastActivity: n, isSampled: i = !0 } = {}) { var o, a; const s = r(), u = null === (a = null === (o = M.config) || void 0 === o ? void 0 : o.sessionTracking) || void 0 === a ? void 0 : a.generateSessionId; return null == t && (t = "function" == typeof u ? u() : Tt()), { sessionId: t, lastActivity: null != n ? n : s, started: null != e ? e : s, isSampled: i }; } function wt(t) { if (null == t) return !1; const e = r(); return e - t.started < 144e5 && e - t.lastActivity < nt; } function Ot({ fetchUserSession: t, storeUserSession: e }) { return function ({ forceSessionExtend: n } = { forceSessionExtend: !1 }) { var i, o, a; if (!t || !e) return; const s = M.config.sessionTracking, u = null == s ? void 0 : s.persistent; if (u && !_t || !u && !yt) return; const c = t(); if (!1 === n && wt(c)) e(Object.assign(Object.assign({}, c), { lastActivity: r() })); else { let t = Rt(St({ isSampled: Et() }), c); e(t), null === (i = M.api) || void 0 === i || i.setSession(t.sessionMeta), null === (o = null == s ? void 0 : s.onSessionChange) || void 0 === o || o.call(s, null !== (a = null == c ? void 0 : c.sessionMeta) && void 0 !== a ? a : null, t.sessionMeta); } }; } function Rt(t, e) { var n, r, i, o; return Object.assign(Object.assign({}, t), { sessionMeta: { id: t.sessionId, attributes: Object.assign(Object.assign(Object.assign(Object.assign({}, null === (r = null === (n = M.config.sessionTracking) || void 0 === n ? void 0 : n.session) || void 0 === r ? void 0 : r.attributes), null !== (o = null === (i = M.metas.value.session) || void 0 === i ? void 0 : i.attributes) && void 0 !== o ? o : {}), null != e ? { previousSession: e.sessionId } : {}), { isSampled: t.isSampled.toString() }) } }); } class Lt { constructor() { this.updateSession = ft((() => this.updateUserSession()), 1e3), this.updateUserSession = Ot({ fetchUserSession: Lt.fetchUserSession, storeUserSession: Lt.storeUserSession }), this.init(); } static removeUserSession() { mt(et, Lt.storageTypeLocal); } static storeUserSession(t) { gt(et, JSON.stringify(t), Lt.storageTypeLocal); } static fetchUserSession() { const t = vt(et, Lt.storageTypeLocal); return t ? JSON.parse(t) : null; } init() { document.addEventListener("visibilitychange", (() => { "visible" === document.visibilityState && this.updateSession(); })), M.metas.addListener((function (t) { const e = t.session, n = Lt.fetchUserSession(); if (e && e.id !== (null == n ? void 0 : n.sessionId)) { const t = Rt(St({ sessionId: e.id, isSampled: Et() }), n); Lt.storeUserSession(t), M.api.setSession(t.sessionMeta); } })); } } Lt.storageTypeLocal = dt; class Pt { constructor() { this.updateSession = ft((() => this.updateUserSession()), 1e3), this.updateUserSession = Ot({ fetchUserSession: Pt.fetchUserSession, storeUserSession: Pt.storeUserSession }), this.init(); } static removeUserSession() { mt(et, Pt.storageTypeSession); } static storeUserSession(t) { gt(et, JSON.stringify(t), Pt.storageTypeSession); } static fetchUserSession() { const t = vt(et, Pt.storageTypeSession); return t ? JSON.parse(t) : null; } init() { document.addEventListener("visibilitychange", (() => { "visible" === document.visibilityState && this.updateSession(); })), M.metas.addListener((function (t) { const e = t.session, n = Pt.fetchUserSession(); if (e && e.id !== (null == n ? void 0 : n.sessionId)) { const t = Rt(St({ sessionId: e.id, isSampled: Et() }), n); Pt.storeUserSession(t), M.api.setSession(t.sessionMeta); } })); } } function At(t) { return (null == t ? void 0 : t.persistent) ? Lt : Pt; } Pt.storageTypeSession = pt; var Ct = function (t, e, n, r) { return new (n || (n = Promise))((function (i, o) { function a(t) { try { u(r.next(t)); } catch (t) { o(t); } } function s(t) { try { u(r.throw(t)); } catch (t) { o(t); } } function u(t) { var e; t.done ? i(t.value) : (e = t.value, e instanceof n ? e : new n((function (t) { t(e); }))).then(a, s); } u((r = r.apply(t, e || [])).next()); })); }; class kt extends ct { constructor(t) { var e, n, r, i; super(), this.options = t, this.name = "@grafana/faro-web-sdk:transport-fetch", this.version = x, this.disabledUntil = new Date, this.rateLimitBackoffMs = null !== (e = t.defaultRateLimitBackoffMs) && void 0 !== e ? e : 5e3, this.getNow = null !== (n = t.getNow) && void 0 !== n ? n : () => Date.now(), this.promiseBuffer = function (t) { const { size: e, concurrency: n } = t, r = []; let i = 0; const o = () => { if (i < n && r.length) { const { producer: t, resolve: e, reject: n } = r.shift(); i++, t().then((t => { i--, o(), e(t); }), (t => { i--, o(), n(t); })); } }; return { add: t => { if (r.length + i >= e) throw new Error("Task buffer full"); return new Promise(((e, n) => { r.push({ producer: t, resolve: e, reject: n }), o(); })); } }; } ({ size: null !== (r = t.bufferSize) && void 0 !== r ? r : 30, concurrency: null !== (i = t.concurrency) && void 0 !== i ? i : 5 }); } send(n) { return Ct(this, void 0, void 0, (function* () { try { if (this.disabledUntil > new Date(this.getNow())) return this.logWarn(`Dropping transport item due to too many requests. Backoff until ${this.disabledUntil}`), Promise.resolve(); yield this.promiseBuffer.add((() => { const r = JSON.stringify(function (n) { let r = { meta: {} }; return void 0 !== n[0] && (r.meta = n[0].meta), n.forEach((n => { switch (n.type) { case t.LOG: case t.EVENT: case t.EXCEPTION: case t.MEASUREMENT: const i = e[n.type], o = r[i]; r = Object.assign(Object.assign({}, r), { [i]: void 0 === o ? [n.payload] : [...o, n.payload] }); break; case t.TRACE: r = Object.assign(Object.assign({}, r), { traces: lt(r.traces, n.payload.resourceSpans) }); } })), r; } (n)), { url: i, requestOptions: o, apiKey: a } = this.options, s = null != o ? o : {}, { headers: u } = s, c = function (t, e) { var n = {}; for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && e.indexOf(r) < 0 && (n[r] = t[r]); if (null != t && "function" == typeof Object.getOwnPropertySymbols) { var i = 0; for (r = Object.getOwnPropertySymbols(t); i < r.length; i++) e.indexOf(r[i]) < 0 && Object.prototype.propertyIsEnumerable.call(t, r[i]) && (n[r[i]] = t[r[i]]); } return n; } (s, ["headers"]); let l; const f = this.metas.value.session; return null != f && (l = f.id), fetch(i, Object.assign({ method: "POST", headers: Object.assign(Object.assign(Object.assign({ "Content-Type": "application/json" }, null != u ? u : {}), a ? { "x-api-key": a } : {}), l ? { "x-faro-session-id": l } : {}), body: r, keepalive: r.length <= 6e4 }, null != c ? c : {})).then((t => Ct(this, void 0, void 0, (function* () { return 202 === t.status && "invalid" === t.headers.get("X-Faro-Session-Status") && this.extendFaroSession(this.config, this.logDebug), 429 === t.status && (this.disabledUntil = this.getRetryAfterDate(t), this.logWarn(`Too many requests, backing off until ${this.disabledUntil}`)), t.text().catch(O), t; })))).catch((t => { this.logError("Failed sending payload to the receiver\n", JSON.parse(r), t); })); })); } catch (t) { this.logError(t); } })); } getIgnoreUrls() { var t; return [this.options.url].concat(null !== (t = this.config.ignoreUrls) && void 0 !== t ? t : []); } isBatched() { return !0; } getRetryAfterDate(t) { const e = this.getNow(), n = t.headers.get("Retry-After"); if (n) { const t = Number(n); if (!isNaN(t)) return new Date(1e3 * t + e); const r = Date.parse(n); if (!isNaN(r)) return new Date(r); } return new Date(e + this.rateLimitBackoffMs); } extendFaroSession(t, e) { const n = "Session expired", r = t.sessionTracking; if (null == r ? void 0 : r.enabled) { const { fetchUserSession: t, storeUserSession: i } = At(r); Ot({ fetchUserSession: t, storeUserSession: i })({ forceSessionExtend: !0 }), e(`${n} created new session.`); } else e(`${n}.`); } } class It extends ut { constructor() { super(...arguments), this.api = {}, this.transports = {}; } } const Nt = /^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i; function xt(t) { let e, n, r, i, o = []; if ((t => s(t, "ErrorEvent"))(t) && t.error) e = t.error.message, n = t.error.name, o = Q(t.error); else if ((r = (t => s(t, "DOMError"))(t)) || (t => s(t, "DOMException"))(t)) { const { name: i, message: o } = t; n = null != i ? i : r ? "DOMError" : "DOMException", e = o ? `${n}: ${o}` : n; } else g(t) ? (e = t.message, o = Q(t)) : (f(t) || (i = (t => h && u(t, Event))(t))) && (n = i ? t.constructor.name : void 0, e = `Non-Error exception captured with keys: ${Object.keys(t)}`); return [e, n, o]; } class Dt extends It { constructor() { super(...arguments), this.name = "@grafana/faro-web-sdk:instrumentation-errors", this.version = x; } initialize() { var t; this.logDebug("Initializing"), function (t) { const e = window.onerror; window.onerror = (...n) => { try { const [e, r, i, o, a] = n; let s, u, c = []; const f = l(e), p = Y(r, "?", i, o); a || !f ? ([s, u, c] = xt(null != a ? a : e), 0 === c.length && (c = [p])) : f && ([s, u] = function (t) { var e, n; const r = t.match(Nt), i = null !== (e = null == r ? void 0 : r[1]) && void 0 !== e ? e : _; return [null !== (n = null == r ? void 0 : r[2]) && void 0 !== n ? n : t, i]; } (e), c = [p]), s && t.pushError(new Error(s), { type: u, stackFrames: c }); } finally { null == e || e.apply(window, n); } }; } (this.api), t = this.api, window.addEventListener("unhandledrejection", (e => { var n, r; let i, o, a = e; a.reason ? a = e.reason : (null === (n = e.detail) || void 0 === n ? void 0 : n.reason) && (a = null === (r = e.detail) || void 0 === r ? void 0 : r.reason); let s = []; (t => !f(t) && !p(t))(a) ? (i = `Non-Error promise rejection captured with value: ${String(a)}`, o = "UnhandledRejection") : [i, o, s] = xt(a), i && t.pushError(new Error(i), { type: o, stackFrames: s }); })); } } var Mt, jt, Ut, Bt, zt, Ft = -1, Ht = function (t) { addEventListener("pageshow", (function (e) { e.persisted && (Ft = e.timeStamp, t(e)); }), !0); }, Vt = function () { var t = self.performance && performance.getEntriesByType && performance.getEntriesByType("navigation")[0]; if (t && t.responseStart > 0 && t.responseStart < performance.now()) return t; }, Zt = function () { var t = Vt(); return t && t.activationStart || 0; }, Gt = function (t, e) { var n = Vt(), r = "navigate"; return Ft >= 0 ? r = "back-forward-cache" : n && (document.prerendering || Zt() > 0 ? r = "prerender" : document.wasDiscarded ? r = "restore" : n.type && (r = n.type.replace(/_/g, "-"))), { name: t, value: void 0 === e ? -1 : e, rating: "good", delta: 0, entries: [], id: "v4-".concat(Date.now(), "-").concat(Math.floor(8999999999999 * Math.random()) + 1e12), navigationType: r }; }, Xt = function (t, e, n) { try { if (PerformanceObserver.supportedEntryTypes.includes(t)) { var r = new PerformanceObserver((function (t) { Promise.resolve().then((function () { e(t.getEntries()); })); })); return r.observe(Object.assign({ type: t, buffered: !0 }, n || {})), r; } } catch (t) { } }, qt = function (t, e, n, r) { var i, o; return function (a) { e.value >= 0 && (a || r) && ((o = e.value - (i || 0)) || void 0 === i) && (i = e.value, e.delta = o, e.rating = function (t, e) { return t > e[1] ? "poor" : t > e[0] ? "needs-improvement" : "good"; } (e.value, n), t(e)); }; }, $t = function (t) { requestAnimationFrame((function () { return requestAnimationFrame((function () { return t(); })); })); }, Wt = function (t) { document.addEventListener("visibilitychange", (function () { "hidden" === document.visibilityState && t(); })); }, Kt = function (t) { var e = !1; return function () { e || (t(), e = !0); }; }, Yt = -1, Jt = function () { return "hidden" !== document.visibilityState || document.prerendering ? 1 / 0 : 0; }, Qt = function (t) { "hidden" === document.visibilityState && Yt > -1 && (Yt = "visibilitychange" === t.type ? t.timeStamp : 0, ee()); }, te = function () { addEventListener("visibilitychange", Qt, !0), addEventListener("prerenderingchange", Qt, !0); }, ee = function () { removeEventListener("visibilitychange", Qt, !0), removeEventListener("prerenderingchange", Qt, !0); }, ne = function () { return Yt < 0 && (Yt = Jt(), te(), Ht((function () { setTimeout((function () { Yt = Jt(), te(); }), 0); }))), { get firstHiddenTime() { return Yt; } }; }, re = function (t) { document.prerendering ? addEventListener("prerenderingchange", (function () { return t(); }), !0) : t(); }, ie = [1800, 3e3], oe = function (t, e) { e = e || {}, re((function () { var n, r = ne(), i = Gt("FCP"), o = Xt("paint", (function (t) { t.forEach((function (t) { "first-contentful-paint" === t.name && (o.disconnect(), t.startTime < r.firstHiddenTime && (i.value = Math.max(t.startTime - Zt(), 0), i.entries.push(t), n(!0))); })); })); o && (n = qt(t, i, ie, e.reportAllChanges), Ht((function (r) { i = Gt("FCP"), n = qt(t, i, ie, e.reportAllChanges), $t((function () { i.value = performance.now() - r.timeStamp, n(!0); })); }))); })); }, ae = [.1, .25], se = 0, ue = 1 / 0, ce = 0, le = function (t) { t.forEach((function (t) { t.interactionId && (ue = Math.min(ue, t.interactionId), ce = Math.max(ce, t.interactionId), se = ce ? (ce - ue) / 7 + 1 : 0); })); }, fe = function () { return Mt ? se : performance.interactionCount || 0; }, pe = function () { "interactionCount" in performance || Mt || (Mt = Xt("event", le, { type: "event", buffered: !0, durationThreshold: 0 })); }, de = [], he = new Map, ve = 0, ge = [], me = function (t) { if (ge.forEach((function (e) { return e(t); })), t.interactionId || "first-input" === t.entryType) { var e = de[de.length - 1], n = he.get(t.interactionId); if (n || de.length < 10 || t.duration > e.latency) { if (n) t.duration > n.latency ? (n.entries = [t], n.latency = t.duration) : t.duration === n.latency && t.startTime === n.entries[0].startTime && n.entries.push(t); else { var r = { id: t.interactionId, latency: t.duration, entries: [t] }; he.set(r.id, r), de.push(r); } de.sort((function (t, e) { return e.latency - t.latency; })), de.length > 10 && de.splice(10).forEach((function (t) { return he.delete(t.id); })); } } }, _e = function (t) { var e = self.requestIdleCallback || self.setTimeout, n = -1; return t = Kt(t), "hidden" === document.visibilityState ? t() : (n = e(t), Wt(t)), n; }, ye = [200, 500], be = [2500, 4e3], Ee = {}, Te = [800, 1800], Se = function t(e) { document.prerendering ? re((function () { return t(e); })) : "complete" !== document.readyState ? addEventListener("load", (function () { return t(e); }), !0) : setTimeout(e, 0); }, we = { passive: !0, capture: !0 }, Oe = new Date, Re = function (t, e) { jt || (jt = e, Ut = t, Bt = new Date, Ae(removeEventListener), Le()); }, Le = function () { if (Ut >= 0 && Ut < Bt - Oe) { var t = { entryType: "first-input", name: jt.type, target: jt.target, cancelable: jt.cancelable, startTime: jt.timeStamp, processingStart: jt.timeStamp + Ut }; zt.forEach((function (e) { e(t); })), zt = []; } }, Pe = function (t) { if (t.cancelable) { var e = (t.timeStamp > 1e12 ? new Date : performance.now()) - t.timeStamp; "pointerdown" == t.type ? function (t, e) { var n = function () { Re(t, e), i(); }, r = function () { i(); }, i = function () { removeEventListener("pointerup", n, we), removeEventListener("pointercancel", r, we); }; addEventListener("pointerup", n, we), addEventListener("pointercancel", r, we); } (e, t) : Re(e, t); } }, Ae = function (t) { ["mousedown", "keydown", "touchstart", "pointerdown"].forEach((function (e) { return t(e, Pe, we); })); }, Ce = [100, 300]; class ke { constructor(t) { this.pushMeasurement = t; } initialize() { Object.entries(ke.mapping).forEach((([t, e]) => { e((e => { this.pushMeasurement({ type: "web-vitals", values: { [t]: e.value } }); })); })); } } ke.mapping = { cls: function (t, e) { e = e || {}, oe(Kt((function () { var n, r = Gt("CLS", 0), i = 0, o = [], a = function (t) { t.forEach((function (t) { if (!t.hadRecentInput) { var e = o[0], n = o[o.length - 1]; i && t.startTime - n.startTime < 1e3 && t.startTime - e.startTime < 5e3 ? (i += t.value, o.push(t)) : (i = t.value, o = [t]); } })), i > r.value && (r.value = i, r.entries = o, n()); }, s = Xt("layout-shift", a); s && (n = qt(t, r, ae, e.reportAllChanges), Wt((function () { a(s.takeRecords()), n(!0); })), Ht((function () { i = 0, r = Gt("CLS", 0), n = qt(t, r, ae, e.reportAllChanges), $t((function () { return n(); })); })), setTimeout(n, 0)); }))); }, fcp: oe, fid: function (t, e) { e = e || {}, re((function () { var n, r = ne(), i = Gt("FID"), o = function (t) { t.startTime < r.firstHiddenTime && (i.value = t.processingStart - t.startTime, i.entries.push(t), n(!0)); }, a = function (t) { t.forEach(o); }, s = Xt("first-input", a); n = qt(t, i, Ce, e.reportAllChanges), s && (Wt(Kt((function () { a(s.takeRecords()), s.disconnect(); }))), Ht((function () { var r; i = Gt("FID"), n = qt(t, i, Ce, e.reportAllChanges), zt = [], Ut = -1, jt = null, Ae(addEventListener), r = o, zt.push(r), Le(); }))); })); }, inp: function (t, e) { "PerformanceEventTiming" in self && "interactionId" in PerformanceEventTiming.prototype && (e = e || {}, re((function () { var n; pe(); var r, i = Gt("INP"), o = function (t) { _e((function () { t.forEach(me); var e = function () { var t = Math.min(de.length - 1, Math.floor((fe() - ve) / 50)); return de[t]; } (); e && e.latency !== i.value && (i.value = e.latency, i.entries = e.entries, r()); })); }, a = Xt("event", o, { durationThreshold: null !== (n = e.durationThreshold) && void 0 !== n ? n : 40 }); r = qt(t, i, ye, e.reportAllChanges), a && (a.observe({ type: "first-input", buffered: !0 }), Wt((function () { o(a.takeRecords()), r(!0); })), Ht((function () { ve = fe(), de.length = 0, he.clear(), i = Gt("INP"), r = qt(t, i, ye, e.reportAllChanges); }))); }))); }, lcp: function (t, e) { e = e || {}, re((function () { var n, r = ne(), i = Gt("LCP"), o = function (t) { e.reportAllChanges || (t = t.slice(-1)), t.forEach((function (t) { t.startTime < r.firstHiddenTime && (i.value = Math.max(t.startTime - Zt(), 0), i.entries = [t], n()); })); }, a = Xt("largest-contentful-paint", o); if (a) { n = qt(t, i, be, e.reportAllChanges); var s = Kt((function () { Ee[i.id] || (o(a.takeRecords()), a.disconnect(), Ee[i.id] = !0, n(!0)); }));["keydown", "click"].forEach((function (t) { addEventListener(t, (function () { return _e(s); }), { once: !0, capture: !0 }); })), Wt(s), Ht((function (r) { i = Gt("LCP"), n = qt(t, i, be, e.reportAllChanges), $t((function () { i.value = performance.now() - r.timeStamp, Ee[i.id] = !0, n(!0); })); })); } })); }, ttfb: function (t, e) { e = e || {}; var n = Gt("TTFB"), r = qt(t, n, Te, e.reportAllChanges); Se((function () { var i = Vt(); i && (n.value = Math.max(i.responseStart - Zt(), 0), n.entries = [i], r(!0), Ht((function () { n = Gt("TTFB", 0), (r = qt(t, n, Te, e.reportAllChanges))(!0); }))); })); } }; var Ie, Ne, xe = function () { var t = self.performance && performance.getEntriesByType && performance.getEntriesByType("navigation")[0]; if (t && t.responseStart > 0 && t.responseStart < performance.now()) return t; }, De = function (t) { if ("loading" === document.readyState) return "loading"; var e = xe(); if (e) { if (t < e.domInteractive) return "loading"; if (0 === e.domContentLoadedEventStart || t < e.domContentLoadedEventStart) return "dom-interactive"; if (0 === e.domComplete || t < e.domComplete) return "dom-content-loaded"; } return "complete"; }, Me = function (t) { var e = t.nodeName; return 1 === t.nodeType ? e.toLowerCase() : e.toUpperCase().replace(/^#/, ""); }, je = function (t, e) { var n = ""; try { for (; t && 9 !== t.nodeType;) { var r = t, i = r.id ? "#" + r.id : Me(r) + (r.classList && r.classList.value && r.classList.value.trim() && r.classList.value.trim().length ? "." + r.classList.value.trim().replace(/\s+/g, ".") : ""); if (n.length + i.length > (e || 100) - 1) return n || i; if (n = n ? i + ">" + n : i, r.id) break; t = r.parentNode; } } catch (t) { } return n; }, Ue = -1, Be = function () { return Ue; }, ze = function (t) { addEventListener("pageshow", (function (e) { e.persisted && (Ue = e.timeStamp, t(e)); }), !0); }, Fe = function () { var t = xe(); return t && t.activationStart || 0; }, He = function (t, e) { var n = xe(), r = "navigate"; return Be() >= 0 ? r = "back-forward-cache" : n && (document.prerendering || Fe() > 0 ? r = "prerender" : document.wasDiscarded ? r = "restore" : n.type && (r = n.type.replace(/_/g, "-"))), { name: t, value: void 0 === e ? -1 : e, rating: "good", delta: 0, entries: [], id: "v4-".concat(Date.now(), "-").concat(Math.floor(8999999999999 * Math.random()) + 1e12), navigationType: r }; }, Ve = function (t, e, n) { try { if (PerformanceObserver.supportedEntryTypes.includes(t)) { var r = new PerformanceObserver((function (t) { Promise.resolve().then((function () { e(t.getEntries()); })); })); return r.observe(Object.assign({ type: t, buffered: !0 }, n || {})), r; } } catch (t) { } }, Ze = function (t, e, n, r) { var i, o; return function (a) { e.value >= 0 && (a || r) && ((o = e.value - (i || 0)) || void 0 === i) && (i = e.value, e.delta = o, e.rating = function (t, e) { return t > e[1] ? "poor" : t > e[0] ? "needs-improvement" : "good"; } (e.value, n), t(e)); }; }, Ge = function (t) { requestAnimationFrame((function () { return requestAnimationFrame((function () { return t(); })); })); }, Xe = function (t) { document.addEventListener("visibilitychange", (function () { "hidden" === document.visibilityState && t(); })); }, qe = function (t) { var e = !1; return function () { e || (t(), e = !0); }; }, $e = -1, We = function () { return "hidden" !== document.visibilityState || document.prerendering ? 1 / 0 : 0; }, Ke = function (t) { "hidden" === document.visibilityState && $e > -1 && ($e = "visibilitychange" === t.type ? t.timeStamp : 0, Je()); }, Ye = function () { addEventListener("visibilitychange", Ke, !0), addEventListener("prerenderingchange", Ke, !0); }, Je = function () { removeEventListener("visibilitychange", Ke, !0), removeEventListener("prerenderingchange", Ke, !0); }, Qe = function () { return $e < 0 && ($e = We(), Ye(), ze((function () { setTimeout((function () { $e = We(), Ye(); }), 0); }))), { get firstHiddenTime() { return $e; } }; }, tn = function (t) { document.prerendering ? addEventListener("prerenderingchange", (function () { return t(); }), !0) : t(); }, en = [1800, 3e3], nn = function (t, e) { e = e || {}, tn((function () { var n, r = Qe(), i = He("FCP"), o = Ve("paint", (function (t) { t.forEach((function (t) { "first-contentful-paint" === t.name && (o.disconnect(), t.startTime < r.firstHiddenTime && (i.value = Math.max(t.startTime - Fe(), 0), i.entries.push(t), n(!0))); })); })); o && (n = Ze(t, i, en, e.reportAllChanges), ze((function (r) { i = He("FCP"), n = Ze(t, i, en, e.reportAllChanges), Ge((function () { i.value = performance.now() - r.timeStamp, n(!0); })); }))); })); }, rn = [.1, .25], on = 0, an = 1 / 0, sn = 0, un = function (t) { t.forEach((function (t) { t.interactionId && (an = Math.min(an, t.interactionId), sn = Math.max(sn, t.interactionId), on = sn ? (sn - an) / 7 + 1 : 0); })); }, cn = function () { return Ie ? on : performance.interactionCount || 0; }, ln = [], fn = new Map, pn = 0, dn = [], hn = function (t) { if (dn.forEach((function (e) { return e(t); })), t.interactionId || "first-input" === t.entryType) { var e = ln[ln.length - 1], n = fn.get(t.interactionId); if (n || ln.length < 10 || t.duration > e.latency) { if (n) t.duration > n.latency ? (n.entries = [t], n.latency = t.duration) : t.duration === n.latency && t.startTime === n.entries[0].startTime && n.entries.push(t); else { var r = { id: t.interactionId, latency: t.duration, entries: [t] }; fn.set(r.id, r), ln.push(r); } ln.sort((function (t, e) { return e.latency - t.latency; })), ln.length > 10 && ln.splice(10).forEach((function (t) { return fn.delete(t.id); })); } } }, vn = function (t) { var e = self.requestIdleCallback || self.setTimeout, n = -1; return t = qe(t), "hidden" === document.visibilityState ? t() : (n = e(t), Xe(t)), n; }, gn = [200, 500], mn = [], _n = [], yn = 0, bn = new WeakMap, En = new Map, Tn = -1, Sn = function (t) { mn = mn.concat(t), wn(); }, wn = function () { Tn < 0 && (Tn = vn(On)); }, On = function () { En.size > 10 && En.forEach((function (t, e) { fn.has(e) || En.delete(e); })); var t = ln.map((function (t) { return bn.get(t.entries[0]); })), e = _n.length - 50; _n = _n.filter((function (n, r) { return r >= e || t.includes(n); })); for (var n = new Set, r = 0; r < _n.length; r++) { var i = _n[r]; Cn(i.startTime, i.processingEnd).forEach((function (t) { n.add(t); })); } var o = mn.length - 1 - 50; mn = mn.filter((function (t, e) { return t.startTime > yn && e > o || n.has(t); })), Tn = -1; }; dn.push((function (t) { t.interactionId && t.target && !En.has(t.interactionId) && En.set(t.interactionId, t.target); }), (function (t) { var e, n = t.startTime + t.duration; yn = Math.max(yn, t.processingEnd); for (var r = _n.length - 1; r >= 0; r--) { var i = _n[r]; if (Math.abs(n - i.renderTime) <= 8) { (e = i).startTime = Math.min(t.startTime, e.startTime), e.processingStart = Math.min(t.processingStart, e.processingStart), e.processingEnd = Math.max(t.processingEnd, e.processingEnd), e.entries.push(t); break; } } e || (e = { startTime: t.startTime, processingStart: t.processingStart, processingEnd: t.processingEnd, renderTime: n, entries: [t] }, _n.push(e)), (t.interactionId || "first-input" === t.entryType) && bn.set(t, e), wn(); })); var Rn, Ln, Pn, An, Cn = function (t, e) { for (var n, r = [], i = 0; n = mn[i]; i++) if (!(n.startTime + n.duration < t)) { if (n.startTime > e) break; r.push(n); } return r; }, kn = [2500, 4e3], In = {}, Nn = [800, 1800], xn = function t(e) { document.prerendering ? tn((function () { return t(e); })) : "complete" !== document.readyState ? addEventListener("load", (function () { return t(e); }), !0) : setTimeout(e, 0); }, Dn = function (t, e) { e = e || {}; var n = He("TTFB"), r = Ze(t, n, Nn, e.reportAllChanges); xn((function () { var i = xe(); i && (n.value = Math.max(i.responseStart - Fe(), 0), n.entries = [i], r(!0), ze((function () { n = He("TTFB", 0), (r = Ze(t, n, Nn, e.reportAllChanges))(!0); }))); })); }, Mn = { passive: !0, capture: !0 }, jn = new Date, Un = function (t, e) { Rn || (Rn = e, Ln = t, Pn = new Date, Fn(removeEventListener), Bn()); }, Bn = function () { if (Ln >= 0 && Ln < Pn - jn) { var t = { entryType: "first-input", name: Rn.type, target: Rn.target, cancelable: Rn.cancelable, startTime: Rn.timeStamp, processingStart: Rn.timeStamp + Ln }; An.forEach((function (e) { e(t); })), An = []; } }, zn = function (t) { if (t.cancelable) { var e = (t.timeStamp > 1e12 ? new Date : performance.now()) - t.timeStamp; "pointerdown" == t.type ? function (t, e) { var n = function () { Un(t, e), i(); }, r = function () { i(); }, i = function () { removeEventListener("pointerup", n, Mn), removeEventListener("pointercancel", r, Mn); }; addEventListener("pointerup", n, Mn), addEventListener("pointercancel", r, Mn); } (e, t) : Un(e, t); } }, Fn = function (t) { ["mousedown", "keydown", "touchstart", "pointerdown"].forEach((function (e) { return t(e, zn, Mn); })); }, Hn = [100, 300]; const Vn = "com.grafana.faro.lastNavigationId", Zn = "load_state", Gn = "time_to_first_byte"; class Xn { constructor(t) { this.corePushMeasurement = t; } initialize() { this.measureCLS(), this.measureFCP(), this.measureFID(), this.measureINP(), this.measureLCP(), this.measureTTFB(); } measureCLS() { !function (t) { !function (t, e) { e = e || {}, nn(qe((function () { var n, r = He("CLS", 0), i = 0, o = [], a = function (t) { t.forEach((function (t) { if (!t.hadRecentInput) { var e = o[0], n = o[o.length - 1]; i && t.startTime - n.startTime < 1e3 && t.startTime - e.startTime < 5e3 ? (i += t.value, o.push(t)) : (i = t.value, o = [t]); } })), i > r.value && (r.value = i, r.entries = o, n()); }, s = Ve("layout-shift", a); s && (n = Ze(t, r, rn, e.reportAllChanges), Xe((function () { a(s.takeRecords()), n(!0); })), ze((function () { i = 0, r = He("CLS", 0), n = Ze(t, r, rn, e.reportAllChanges), Ge((function () { return n(); })); })), setTimeout(n, 0)); }))); } ((function (e) { var n = function (t) { var e, n = {}; if (t.entries.length) { var r = t.entries.reduce((function (t, e) { return t && t.value > e.value ? t : e; })); if (r && r.sources && r.sources.length) { var i = (e = r.sources).find((function (t) { return t.node && 1 === t.node.nodeType; })) || e[0]; i && (n = { largestShiftTarget: je(i.node), largestShiftTime: r.startTime, largestShiftValue: r.value, largestShiftSource: i, largestShiftEntry: r, loadState: De(r.startTime) }); } } return Object.assign(t, { attribution: n }); } (e); t(n); }), void 0); } ((t => { const { loadState: e, largestShiftValue: n, largestShiftTime: r, largestShiftTarget: i } = t.attribution, o = this.buildInitialValues(t); this.addIfPresent(o, "largest_shift_value", n), this.addIfPresent(o, "largest_shift_time", r); const a = this.buildInitialContext(t); this.addIfPresent(a, Zn, e), this.addIfPresent(a, "largest_shift_target", i), this.pushMeasurement(o, a); })); } measureFCP() { !function (t) { nn((function (e) { var n = function (t) { var e = { timeToFirstByte: 0, firstByteToFCP: t.value, loadState: De(Be()) }; if (t.entries.length) { var n = xe(), r = t.entries[t.entries.length - 1]; if (n) { var i = n.activationStart || 0, o = Math.max(0, n.responseStart - i); e = { timeToFirstByte: o, firstByteToFCP: t.value - o, loadState: De(t.entries[0].startTime), navigationEntry: n, fcpEntry: r }; } } return Object.assign(t, { attribution: e }); } (e); t(n); }), void 0); } ((t => { const { firstByteToFCP: e, timeToFirstByte: n, loadState: r } = t.attribution, i = this.buildInitialValues(t); this.addIfPresent(i, "first_byte_to_fcp", e), this.addIfPresent(i, Gn, n); const o = this.buildInitialContext(t); this.addIfPresent(o, Zn, r), this.pushMeasurement(i, o); })); } measureFID() { !function (t, e) { !function (t, e) { e = e || {}, tn((function () { var n, r = Qe(), i = He("FID"), o = function (t) { t.startTime < r.firstHiddenTime && (i.value = t.processingStart - t.startTime, i.entries.push(t), n(!0)); }, a = function (t) { t.forEach(o); }, s = Ve("first-input", a); n = Ze(t, i, Hn, e.reportAllChanges), s && (Xe(qe((function () { a(s.takeRecords()), s.disconnect(); }))), ze((function () { var r; i = He("FID"), n = Ze(t, i, Hn, e.reportAllChanges), An = [], Ln = -1, Rn = null, Fn(addEventListener), r = o, An.push(r), Bn(); }))); })); } ((function (e) { var n = function (t) { var e = t.entries[0], n = { eventTarget: je(e.target), eventType: e.name, eventTime: e.startTime, eventEntry: e, loadState: De(e.startTime) }; return Object.assign(t, { attribution: n }); } (e); t(n); }), e); } ((t => { const { eventTime: e, eventTarget: n, eventType: r, loadState: i } = t.attribution, o = this.buildInitialValues(t); this.addIfPresent(o, "event_time", e); const a = this.buildInitialContext(t); this.addIfPresent(a, "event_target", n), this.addIfPresent(a, "event_type", r), this.addIfPresent(a, Zn, i), this.pushMeasurement(o, a); })); } measureINP() { !function (t) { Ne || (Ne = Ve("long-animation-frame", Sn)), function (t, e) { "PerformanceEventTiming" in self && "interactionId" in PerformanceEventTiming.prototype && (e = e || {}, tn((function () { var n; "interactionCount" in performance || Ie || (Ie = Ve("event", un, { type: "event", buffered: !0, durationThreshold: 0 })); var r, i = He("INP"), o = function (t) { vn((function () { t.forEach(hn); var e = function () { var t = Math.min(ln.length - 1, Math.floor((cn() - pn) / 50)); return ln[t]; } (); e && e.latency !== i.value && (i.value = e.latency, i.entries = e.entries, r()); })); }, a = Ve("event", o, { durationThreshold: null !== (n = e.durationThreshold) && void 0 !== n ? n : 40 }); r = Ze(t, i, gn, e.reportAllChanges), a && (a.observe({ type: "first-input", buffered: !0 }), Xe((function () { o(a.takeRecords()), r(!0); })), ze((function () { pn = cn(), ln.length = 0, fn.clear(), i = He("INP"), r = Ze(t, i, gn, e.reportAllChanges); }))); }))); } ((function (e) { var n = function (t) { var e = t.entries[0], n = bn.get(e), r = e.processingStart, i = n.processingEnd, o = n.entries.sort((function (t, e) { return t.processingStart - e.processingStart; })), a = Cn(e.startTime, i), s = t.entries.find((function (t) { return t.target; })), u = s && s.target || En.get(e.interactionId), c = [e.startTime + e.duration, i].concat(a.map((function (t) { return t.startTime + t.duration; }))), l = Math.max.apply(Math, c), f = { interactionTarget: je(u), interactionTargetElement: u, interactionType: e.name.startsWith("key") ? "keyboard" : "pointer", interactionTime: e.startTime, nextPaintTime: l, processedEventEntries: o, longAnimationFrameEntries: a, inputDelay: r - e.startTime, processingDuration: i - r, presentationDelay: Math.max(l - i, 0), loadState: De(e.startTime) }; return Object.assign(t, { attribution: f }); } (e); t(n); }), void 0); } ((t => { const { interactionTime: e, presentationDelay: n, inputDelay: r, processingDuration: i, nextPaintTime: o, loadState: a, interactionTarget: s, interactionType: u } = t.attribution, c = this.buildInitialValues(t); this.addIfPresent(c, "interaction_time", e), this.addIfPresent(c, "presentation_delay", n), this.addIfPresent(c, "input_delay", r), this.addIfPresent(c, "processing_duration", i), this.addIfPresent(c, "next_paint_time", o); const l = this.buildInitialContext(t); this.addIfPresent(l, Zn, a), this.addIfPresent(l, "interaction_target", s), this.addIfPresent(l, "interaction_type", u), this.pushMeasurement(c, l); })); } measureLCP() { !function (t) { !function (t, e) { e = e || {}, tn((function () { var n, r = Qe(), i = He("LCP"), o = function (t) { e.reportAllChanges || (t = t.slice(-1)), t.forEach((function (t) { t.startTime < r.firstHiddenTime && (i.value = Math.max(t.startTime - Fe(), 0), i.entries = [t], n()); })); }, a = Ve("largest-contentful-paint", o); if (a) { n = Ze(t, i, kn, e.reportAllChanges); var s = qe((function () { In[i.id] || (o(a.takeRecords()), a.disconnect(), In[i.id] = !0, n(!0)); }));["keydown", "click"].forEach((function (t) { addEventListener(t, (function () { return vn(s); }), { once: !0, capture: !0 }); })), Xe(s), ze((function (r) { i = He("LCP"), n = Ze(t, i, kn, e.reportAllChanges), Ge((function () { i.value = performance.now() - r.timeStamp, In[i.id] = !0, n(!0); })); })); } })); } ((function (e) { var n = function (t) { var e = { timeToFirstByte: 0, resourceLoadDelay: 0, resourceLoadDuration: 0, elementRenderDelay: t.value }; if (t.entries.length) { var n = xe(); if (n) { var r = n.activationStart || 0, i = t.entries[t.entries.length - 1], o = i.url && performance.getEntriesByType("resource").filter((function (t) { return t.name === i.url; }))[0], a = Math.max(0, n.responseStart - r), s = Math.max(a, o ? (o.requestStart || o.startTime) - r : 0), u = Math.max(s, o ? o.responseEnd - r : 0), c = Math.max(u, i.startTime - r); e = { element: je(i.element), timeToFirstByte: a, resourceLoadDelay: s - a, resourceLoadDuration: u - s, elementRenderDelay: c - u, navigationEntry: n, lcpEntry: i }, i.url && (e.url = i.url), o && (e.lcpResourceEntry = o); } } return Object.assign(t, { attribution: e }); } (e); t(n); }), void 0); } ((t => { const { elementRenderDelay: e, resourceLoadDelay: n, resourceLoadDuration: r, timeToFirstByte: i, element: o } = t.attribution, a = this.buildInitialValues(t); this.addIfPresent(a, "element_render_delay", e), this.addIfPresent(a, "resource_load_delay", n), this.addIfPresent(a, "resource_load_duration", r), this.addIfPresent(a, Gn, i); const s = this.buildInitialContext(t); this.addIfPresent(s, "element", o), this.pushMeasurement(a, s); })); } measureTTFB() { !function (t) { Dn((function (e) { var n = function (t) { var e = { waitingDuration: 0, cacheDuration: 0, dnsDuration: 0, connectionDuration: 0, requestDuration: 0 }; if (t.entries.length) { var n = t.entries[0], r = n.activationStart || 0, i = Math.max((n.workerStart || n.fetchStart) - r, 0), o = Math.max(n.domainLookupStart - r, 0), a = Math.max(n.connectStart - r, 0), s = Math.max(n.connectEnd - r, 0); e = { waitingDuration: i, cacheDuration: o - i, dnsDuration: a - o, connectionDuration: s - a, requestDuration: t.value - s, navigationEntry: n }; } return Object.assign(t, { attribution: e }); } (e); t(n); }), void 0); } ((t => { const { dnsDuration: e, connectionDuration: n, requestDuration: r, waitingDuration: i, cacheDuration: o } = t.attribution, a = this.buildInitialValues(t); this.addIfPresent(a, "dns_duration", e), this.addIfPresent(a, "connection_duration", n), this.addIfPresent(a, "request_duration", r), this.addIfPresent(a, "waiting_duration", i), this.addIfPresent(a, "cache_duration", o); const s = this.buildInitialContext(t); this.pushMeasurement(a, s); })); } buildInitialValues(t) { const e = t.name.toLowerCase(); return { [e]: t.value, delta: t.delta }; } buildInitialContext(t) { var e; const n = null !== (e = vt(Vn, pt)) && void 0 !== e ? e : ot; return { id: t.id, rating: t.rating, navigation_type: t.navigationType, navigation_entry_id: n }; } pushMeasurement(t, e) { this.corePushMeasurement({ type: "web-vitals", values: t }, { context: e }); } addIfPresent(t, e, n) { n && (t[e] = n); } } class qn extends It { constructor() { super(...arguments), this.name = "@grafana/faro-web-sdk:instrumentation-web-vitals", this.version = x; } initialize() { this.logDebug("Initializing"), this.intializeWebVitalsInstrumentation().initialize(); } intializeWebVitalsInstrumentation() { return this.config.trackWebVitalsAttribution ? new Xn(this.api.pushMeasurement) : new ke(this.api.pushMeasurement); } } const $n = "session_start", Wn = "session_resume"; class Kn extends It { constructor() { super(...arguments), this.name = "@grafana/faro-web-sdk:instrumentation-session", this.version = x; } sendSessionStartEvent(t) { var e, n; const r = t.session; if (r && r.id !== (null === (e = this.notifiedSession) || void 0 === e ? void 0 : e.id)) { if (this.notifiedSession && this.notifiedSession.id === (null === (n = r.attributes) || void 0 === n ? void 0 : n.previousSession)) return this.api.pushEvent("session_extend", {}, void 0, { skipDedupe: !0 }), void (this.notifiedSession = r); this.notifiedSession = r, this.api.pushEvent($n, {}, void 0, { skipDedupe: !0 }); } } createInitialSession(t, e) { var n, i, o, a, s; let u, c, l = t.fetchUserSession(); if (e.persistent && e.maxSessionPersistenceTime && l) { const t = r(); l.lastActivity < t - e.maxSessionPersistenceTime && (Lt.removeUserSession(), l = null); } if (wt(l)) { const t = null == l ? void 0 : l.sessionId; c = St({ sessionId: t, isSampled: l.isSampled || !1, started: null == l ? void 0 : l.started }), c.sessionMeta = { id: t, attributes: Object.assign(Object.assign(Object.assign({}, null === (n = e.session) || void 0 === n ? void 0 : n.attributes), null === (i = null == l ? void 0 : l.sessionMeta) || void 0 === i ? void 0 : i.attributes), { isSampled: c.isSampled.toString() }) }, u = Wn; } else { const t = null !== (a = null === (o = e.session) || void 0 === o ? void 0 : o.id) && void 0 !== a ? a : function () { var t, e, n, r; return { id: null !== (r = null === (n = null === (e = null === (t = M.config) || void 0 === t ? void 0 : t.sessionTracking) || void 0 === e ? void 0 : e.generateSessionId) || void 0 === n ? void 0 : n.call(e)) && void 0 !== r ? r : Tt(), attributes: void 0 }; } ().id; c = St({ sessionId: t, isSampled: Et() }), c.sessionMeta = { id: t, attributes: Object.assign({ isSampled: c.isSampled.toString() }, null === (s = e.session) || void 0 === s ? void 0 : s.attributes) }, u = $n; } return { initialSession: c, lifecycleType: u }; } registerBeforeSendHook(t) { var e; const { updateSession: n } = new t; null === (e = this.transports) || void 0 === e || e.addBeforeSendHooks((t => { var e, r, i; n(); const o = null === (e = t.meta.session) || void 0 === e ? void 0 : e.attributes; if (o && "true" === (null == o ? void 0 : o.isSampled)) { let e = JSON.parse(JSON.stringify(t)); const n = null === (r = e.meta.session) || void 0 === r ? void 0 : r.attributes; return null == n || delete n.isSampled, 0 === Object.keys(null != n ? n : {}).length && (null === (i = e.meta.session) || void 0 === i || delete i.attributes), e; } return null; })); } initialize() { this.logDebug("init session instrumentation"); const t = this.config.sessionTracking; if (null == t ? void 0 : t.enabled) { const e = At(t); this.registerBeforeSendHook(e); const { initialSession: n, lifecycleType: r } = this.createInitialSession(e, t); e.storeUserSession(n); const i = n.sessionMeta; this.notifiedSession = i, this.api.setSession(i), r === $n && this.api.pushEvent($n, {}, void 0, { skipDedupe: !0 }), r === Wn && this.api.pushEvent(Wn, {}, void 0, { skipDedupe: !0 }); } this.metas.addListener(this.sendSessionStartEvent.bind(this)); } } class Yn extends It { constructor() { super(...arguments), this.name = "@grafana/faro-web-sdk:instrumentation-view", this.version = x; } sendViewChangedEvent(t) { var e, n, r, i; const o = t.view; o && o.name !== (null === (e = this.notifiedView) || void 0 === e ? void 0 : e.name) && (this.api.pushEvent("view_changed", { fromView: null !== (r = null === (n = this.notifiedView) || void 0 === n ? void 0 : n.name) && void 0 !== r ? r : ot, toView: null !== (i = o.name) && void 0 !== i ? i : ot }, void 0, { skipDedupe: !0 }), this.notifiedView = o); } initialize() { this.metas.addListener(this.sendViewChangedEvent.bind(this)); } } const Jn = /^00-[a-f0-9]{32}-[a-f0-9]{16}-[0-9]{1,2}$/; function Qn(t = []) { for (const e of t) if ("traceparent" === e.name) { if (!Jn.test(e.description)) continue; const [, t, n] = e.description.split("-"); if (null != t && null != n) return { traceId: t, spanId: n }; break; } } function tr(t = [], e) { return t.some((t => t && null != e.match(t))); } function er(t, e = {}) { for (const [n, r] of Object.entries(e)) { const e = t[n]; return null != e && (d(r) ? r.includes(e) : e === r); } return !0; } function nr(t) { const { connectEnd: e, connectStart: n, decodedBodySize: r, domainLookupEnd: i, domainLookupStart: o, duration: a, encodedBodySize: s, fetchStart: u, initiatorType: c, name: l, nextHopProtocol: f, redirectEnd: p, redirectStart: d, renderBlockingStatus: h, requestStart: v, responseEnd: g, responseStart: m, responseStatus: _, secureConnectionStart: y, transferSize: b, workerStart: E } = t; return { name: l, duration: rr(a), tcpHandshakeTime: rr(e - n), dnsLookupTime: rr(i - o), tlsNegotiationTime: rr(v - y), responseStatus: rr(_), redirectTime: rr(p - d), requestTime: rr(m - v), responseTime: rr(g - m), fetchTime: rr(g - u), serviceWorkerTime: rr(u - E), decodedBodySize: rr(r), encodedBodySize: rr(s), cacheHitStatus: function () { let t = "fullLoad"; return 0 === b ? r > 0 && (t = "cache") : null != _ ? 304 === _ && (t = "conditionalFetch") : s > 0 && b < s && (t = "conditionalFetch"), t; } (), renderBlockingStatus: rr(h), protocol: f, initiatorType: c, visibilityState: document.visibilityState, ttfb: rr(m - v) }; } function rr(t) { return null == t ? ot : "number" == typeof t ? Math.round(t).toString() : t.toString(); } const ir = { initiatorType: ["xmlhttprequest", "fetch"] }; class or extends It { constructor() { super(...arguments), this.name = "@grafana/faro-web-sdk:instrumentation-performance", this.version = x; } initialize() { "PerformanceObserver" in window ? function (t) { if ("complete" === document.readyState) t(); else { const e = () => { "complete" === document.readyState && (t(), document.removeEventListener("readystatechange", e)); }; document.addEventListener("readystatechange", e); } } ((() => function (t, e, n, r) { return new (n || (n = Promise))((function (i, o) { function a(t) { try { u(r.next(t)); } catch (t) { o(t); } } function s(t) { try { u(r.throw(t)); } catch (t) { o(t); } } function u(t) { var e; t.done ? i(t.value) : (e = t.value, e instanceof n ? e : new n((function (t) { t(e); }))).then(a, s); } u((r = r.apply(t, e || [])).next()); })); } (this, void 0, void 0, (function* () { const t = this.api.pushEvent, e = this.getIgnoreUrls(), { faroNavigationId: n } = yield function (t, e) { let n; const r = new Promise((t => { n = t; })), i = new PerformanceObserver((r => { var i; const [o] = r.getEntries(); if (null == o || tr(e, o.name)) return; const a = o.toJSON(); let s = Qn(null == a ? void 0 : a.serverTiming); const u = null !== (i = vt(Vn, pt)) && void 0 !== i ? i : ot, c = Object.assign(Object.assign({}, function (t) { const { activationStart: e, domComplete: n, domContentLoadedEventEnd: r, domContentLoadedEventStart: i, domInteractive: o, fetchStart: a, loadEventEnd: s, loadEventStart: u, responseStart: c, type: l } = t, f = function () { var t; return null != (null === (t = performance.timing) || void 0 === t ? void 0 : t.domLoading) ? performance.timing.domLoading - performance.timeOrigin : null; } (); return Object.assign(Object.assign({}, nr(t)), { pageLoadTime: rr(n - a), documentParsingTime: rr(f ? o - f : null), domProcessingTime: rr(n - o), domContentLoadHandlerTime: rr(r - i), onLoadTime: rr(s - u), ttfb: rr(Math.max(c - (null != e ? e : 0), 0)), type: l }); } (a)), { faroNavigationId: Tt(), faroPreviousNavigationId: u }); gt(Vn, c.faroNavigationId, pt), t("faro.performance.navigation", c, void 0, { spanContext: s, timestampOverwriteMs: performance.timeOrigin + a.startTime }), n(c); })); return i.observe({ type: "navigation", buffered: !0 }), r; } (t, e); null != n && function (t, e, n) { const r = M.config.trackResources; new PerformanceObserver((i => { const o = i.getEntries(); for (const i of o) { if (tr(n, i.name)) return; const o = i.toJSON(); let a = Qn(null == o ? void 0 : o.serverTiming); if (null == r && er(o, ir) || r) { const n = Object.assign(Object.assign({}, nr(o)), { faroNavigationId: t, faroResourceId: Tt() }); e("faro.performance.resource", n, void 0, { spanContext: a, timestampOverwriteMs: performance.timeOrigin + o.startTime }); } } })).observe({ type: "resource", buffered: !0 }); } (n, t, e); })))) : this.logDebug("performance observer not supported. Disable performance instrumentation."); } getIgnoreUrls() { var t; return null === (t = this.transports.transports) || void 0 === t ? void 0 : t.flatMap((t => t.getIgnoreUrls())); } } class ar extends It { constructor(t = {}) { super(), this.options = t, this.name = "@grafana/faro-web-sdk:instrumentation-console", this.version = x; } initialize() { this.logDebug("Initializing\n", this.options), S.filter((t => { var e; return !(null !== (e = this.options.disabledLevels) && void 0 !== e ? e : ar.defaultDisabledLevels).includes(t); })).forEach((t => { console[t] = (...e) => { try { t === E.ERROR ? this.api.pushError(new Error(e.map((t => f(t) || d(t) ? JSON.stringify(t) : t)).join(" "))) : this.api.pushLog(e, { level: t }); } catch (t) { this.logError(t); } finally { this.unpatchedConsole[t](...e); } }; })); } } function sr(t = {}) { const e = [new Dt, new qn, new Kn, new Yn]; return !1 !== t.enablePerformanceInstrumentation && e.unshift(new or), !1 !== t.captureConsole && e.push(new ar({ disabledLevels: t.captureConsoleDisabledLevels })), e; } ar.defaultDisabledLevels = [E.DEBUG, E.TRACE, E.LOG]; var ur = "object" == typeof globalThis ? globalThis : "object" == typeof self ? self : "object" == typeof window ? window : "object" == typeof n.g ? n.g : {}, cr = "1.9.0", lr = /^(\d+)\.(\d+)\.(\d+)(-(.+))?$/, fr = function (t) { var e = new Set([t]), n = new Set, r = t.match(lr); if (!r) return function () { return !1; }; var i = +r[1], o = +r[2], a = +r[3]; if (null != r[4]) return function (e) { return e === t; }; function s(t) { return n.add(t), !1; } function u(t) { return e.add(t), !0; } return function (t) { if (e.has(t)) return !0; if (n.has(t)) return !1; var r = t.match(lr); if (!r) return s(t); var c = +r[1], l = +r[2], f = +r[3]; return null != r[4] || i !== c ? s(t) : 0 === i ? o === l && a <= f ? u(t) : s(t) : o <= l ? u(t) : s(t); }; } (cr), pr = cr.split(".")[0], dr = Symbol.for("opentelemetry.js.api." + pr), hr = ur; function vr(t, e, n, r) { var i; void 0 === r && (r = !1); var o = hr[dr] = null !== (i = hr[dr]) && void 0 !== i ? i : { version: cr }; if (!r && o[t]) { var a = new Error("@opentelemetry/api: Attempted duplicate registration of API: " + t); return n.error(a.stack || a.message), !1; } return o.version !== cr ? (a = new Error("@opentelemetry/api: Registration of version v" + o.version + " for " + t + " does not match previously registered API v" + cr), n.error(a.stack || a.message), !1) : (o[t] = e, n.debug("@opentelemetry/api: Registered a global for " + t + " v" + cr + "."), !0); } function gr(t) { var e, n, r = null === (e = hr[dr]) || void 0 === e ? void 0 : e.version; if (r && fr(r)) return null === (n = hr[dr]) || void 0 === n ? void 0 : n[t]; } function mr(t, e) { e.debug("@opentelemetry/api: Unregistering a global for " + t + " v" + cr + "."); var n = hr[dr]; n && delete n[t]; } function _r(t) { return Symbol.for(t); } var yr, br = new function t(e) { var n = this; n._currentContext = e ? new Map(e) : new Map, n.getValue = function (t) { return n._currentContext.get(t); }, n.setValue = function (e, r) { var i = new t(n._currentContext); return i._currentContext.set(e, r), i; }, n.deleteValue = function (e) { var r = new t(n._currentContext); return r._currentContext.delete(e), r; }; }, Er = function () { function t() { } return t.prototype.active = function () { return br; }, t.prototype.with = function (t, e, n) { for (var r = [], i = 3; i < arguments.length; i++) r[i - 3] = arguments[i]; return e.call.apply(e, function (t, e, n) { if (n || 2 === arguments.length) for (var r, i = 0, o = e.length; i < o; i++) !r && i in e || (r || (r = Array.prototype.slice.call(e, 0, i)), r[i] = e[i]); return t.concat(r || Array.prototype.slice.call(e)); } ([n], function (t, e) { var n = "function" == typeof Symbol && t[Symbol.iterator]; if (!n) return t; var r, i, o = n.call(t), a = []; try { for (; (void 0 === e || e-- > 0) && !(r = o.next()).done;) a.push(r.value); } catch (t) { i = { error: t }; } finally { try { r && !r.done && (n = o.return) && n.call(o); } finally { if (i) throw i.error; } } return a; } (r), !1)); }, t.prototype.bind = function (t, e) { return e; }, t.prototype.enable = function () { return this; }, t.prototype.disable = function () { return this; }, t; } (), Tr = function () { function t(t) { this._namespace = t.namespace || "DiagComponentLogger"; } return t.prototype.debug = function () { for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e]; return Sr("debug", this._namespace, t); }, t.prototype.error = function () { for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e]; return Sr("error", this._namespace, t); }, t.prototype.info = function () { for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e]; return Sr("info", this._namespace, t); }, t.prototype.warn = function () { for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e]; return Sr("warn", this._namespace, t); }, t.prototype.verbose = function () { for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e]; return Sr("verbose", this._namespace, t); }, t; } (); function Sr(t, e, n) { var r = gr("diag"); if (r) return n.unshift(e), r[t].apply(r, function (t, e, n) { if (n || 2 === arguments.length) for (var r, i = 0, o = e.length; i < o; i++) !r && i in e || (r || (r = Array.prototype.slice.call(e, 0, i)), r[i] = e[i]); return t.concat(r || Array.prototype.slice.call(e)); } ([], function (t, e) { var n = "function" == typeof Symbol && t[Symbol.iterator]; if (!n) return t; var r, i, o = n.call(t), a = []; try { for (; (void 0 === e || e-- > 0) && !(r = o.next()).done;) a.push(r.value); } catch (t) { i = { error: t }; } finally { try { r && !r.done && (n = o.return) && n.call(o); } finally { if (i) throw i.error; } } return a; } (n), !1)); } !function (t) { t[t.NONE = 0] = "NONE", t[t.ERROR = 30] = "ERROR", t[t.WARN = 50] = "WARN", t[t.INFO = 60] = "INFO", t[t.DEBUG = 70] = "DEBUG", t[t.VERBOSE = 80] = "VERBOSE", t[t.ALL = 9999] = "ALL"; } (yr || (yr = {})); var wr, Or = function () { function t() { function t(t) { return function () { for (var e = [], n = 0; n < arguments.length; n++) e[n] = arguments[n]; var r = gr("diag"); if (r) return r[t].apply(r, function (t, e, n) { if (n || 2 === arguments.length) for (var r, i = 0, o = e.length; i < o; i++) !r && i in e || (r || (r = Array.prototype.slice.call(e, 0, i)), r[i] = e[i]); return t.concat(r || Array.prototype.slice.call(e)); } ([], function (t, e) { var n = "function" == typeof Symbol && t[Symbol.iterator]; if (!n) return t; var r, i, o = n.call(t), a = []; try { for (; (void 0 === e || e-- > 0) && !(r = o.next()).done;) a.push(r.value); } catch (t) { i = { error: t }; } finally { try { r && !r.done && (n = o.return) && n.call(o); } finally { if (i) throw i.error; } } return a; } (e), !1)); }; } var e = this; e.setLogger = function (t, n) { var r, i, o; if (void 0 === n && (n = { logLevel: yr.INFO }), t === e) { var a = new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation"); return e.error(null !== (r = a.stack) && void 0 !== r ? r : a.message), !1; } "number" == typeof n && (n = { logLevel: n }); var s = gr("diag"), u = function (t, e) { function n(n, r) { var i = e[n]; return "function" == typeof i && t >= r ? i.bind(e) : function () { }; } return t < yr.NONE ? t = yr.NONE : t > yr.ALL && (t = yr.ALL), e = e || {}, { error: n("error", yr.ERROR), warn: n("warn", yr.WARN), info: n("info", yr.INFO), debug: n("debug", yr.DEBUG), verbose: n("verbose", yr.VERBOSE) }; } (null !== (i = n.logLevel) && void 0 !== i ? i : yr.INFO, t); if (s && !n.suppressOverrideMessage) { var c = null !== (o = (new Error).stack) && void 0 !== o ? o : "<failed to generate stacktrace>"; s.warn("Current logger will be overwritten from " + c), u.warn("Current logger will overwrite one already registered from " + c); } return vr("diag", u, e, !0); }, e.disable = function () { mr("diag", e); }, e.createComponentLogger = function (t) { return new Tr(t); }, e.verbose = t("verbose"), e.debug = t("debug"), e.info = t("info"), e.warn = t("warn"), e.error = t("error"); } return t.instance = function () { return this._instance || (this._instance = new t), this._instance; }, t; } (), Rr = "context", Lr = new Er, Pr = function () { function t() { } return t.getInstance = function () { return this._instance || (this._instance = new t), this._instance; }, t.prototype.setGlobalContextManager = function (t) { return vr(Rr, t, Or.instance()); }, t.prototype.active = function () { return this._getContextManager().active(); }, t.prototype.with = function (t, e, n) { for (var r, i = [], o = 3; o < arguments.length; o++) i[o - 3] = arguments[o]; return (r = this._getContextManager()).with.apply(r, function (t, e, n) { if (n || 2 === arguments.length) for (var r, i = 0, o = e.length; i < o; i++) !r && i in e || (r || (r = Array.prototype.slice.call(e, 0, i)), r[i] = e[i]); return t.concat(r || Array.prototype.slice.call(e)); } ([t, e, n], function (t, e) { var n = "function" == typeof Symbol && t[Symbol.iterator]; if (!n) return t; var r, i, o = n.call(t), a = []; try { for (; (void 0 === e || e-- > 0) && !(r = o.next()).done;) a.push(r.value); } catch (t) { i = { error: t }; } finally { try { r && !r.done && (n = o.return) && n.call(o); } finally { if (i) throw i.error; } } return a; } (i), !1)); }, t.prototype.bind = function (t, e) { return this._getContextManager().bind(t, e); }, t.prototype._getContextManager = function () { return gr(Rr) || Lr; }, t.prototype.disable = function () { this._getContextManager().disable(), mr(Rr, Or.instance()); }, t; } (); !function (t) { t[t.NONE = 0] = "NONE", t[t.SAMPLED = 1] = "SAMPLED"; } (wr || (wr = {})); var Ar = "0000000000000000", Cr = "00000000000000000000000000000000", kr = { traceId: Cr, spanId: Ar, traceFlags: wr.NONE }, Ir = function () { function t(t) { void 0 === t && (t = kr), this._spanContext = t; } return t.prototype.spanContext = function () { return this._spanContext; }, t.prototype.setAttribute = function (t, e) { return this; }, t.prototype.setAttributes = function (t) { return this; }, t.prototype.addEvent = function (t, e) { return this; }, t.prototype.addLink = function (t) { return this; }, t.prototype.addLinks = function (t) { return this; }, t.prototype.setStatus = function (t) { return this; }, t.prototype.updateName = function (t) { return this; }, t.prototype.end = function (t) { }, t.prototype.isRecording = function () { return !1; }, t.prototype.recordException = function (t, e) { }, t; } (), Nr = _r("OpenTelemetry Context Key SPAN"); function xr(t) { return t.getValue(Nr) || void 0; } function Dr() { return xr(Pr.getInstance().active()); } function Mr(t, e) { return t.setValue(Nr, e); } function jr(t) { return t.deleteValue(Nr); } function Ur(t, e) { return Mr(t, new Ir(e)); } function Br(t) { var e; return null === (e = xr(t)) || void 0 === e ? void 0 : e.spanContext(); } var zr = /^([0-9a-f]{32})$/i, Fr = /^[0-9a-f]{16}$/i; function Hr(t) { return zr.test(t) && t !== Cr; } function Vr(t) { return Hr(t.traceId) && (e = t.spanId, Fr.test(e) && e !== Ar); var e; } function Zr(t) { return new Ir(t); } var Gr, Xr, qr = Pr.getInstance(), $r = function () { function t() { } return t.prototype.startSpan = function (t, e, n) { if (void 0 === n && (n = qr.active()), Boolean(null == e ? void 0 : e.root)) return new Ir; var r, i = n && Br(n); return "object" == typeof (r = i) && "string" == typeof r.spanId && "string" == typeof r.traceId && "number" == typeof r.traceFlags && Vr(i) ? new Ir(i) : new Ir; }, t.prototype.startActiveSpan = function (t, e, n, r) { var i, o, a; if (!(arguments.length < 2)) { 2 === arguments.length ? a = e : 3 === arguments.length ? (i = e, a = n) : (i = e, o = n, a = r); var s = null != o ? o : qr.active(), u = this.startSpan(t, i, s), c = Mr(s, u); return qr.with(c, a, void 0, u); } }, t; } (), Wr = new $r, Kr = function () { function t(t, e, n, r) { this._provider = t, this.name = e, this.version = n, this.options = r; } return t.prototype.startSpan = function (t, e, n) { return this._getTracer().startSpan(t, e, n); }, t.prototype.startActiveSpan = function (t, e, n, r) { var i = this._getTracer(); return Reflect.apply(i.startActiveSpan, i, arguments); }, t.prototype._getTracer = function () { if (this._delegate) return this._delegate; var t = this._provider.getDelegateTracer(this.name, this.version, this.options); return t ? (this._delegate = t, this._delegate) : Wr; }, t; } (), Yr = new (function () { function t() { } return t.prototype.getTracer = function (t, e, n) { return new $r; }, t; } ()), Jr = function () { function t() { } return t.prototype.getTracer = function (t, e, n) { var r; return null !== (r = this.getDelegateTracer(t, e, n)) && void 0 !== r ? r : new Kr(this, t, e, n); }, t.prototype.getDelegate = function () { var t; return null !== (t = this._delegate) && void 0 !== t ? t : Yr; }, t.prototype.setDelegate = function (t) { this._delegate = t; }, t.prototype.getDelegateTracer = function (t, e, n) { var r; return null === (r = this._delegate) || void 0 === r ? void 0 : r.getTracer(t, e, n); }, t; } (), Qr = "trace", ti = function () { function t() { this._proxyTracerProvider = new Jr, this.wrapSpanContext = Zr, this.isSpanContextValid = Vr, this.deleteSpan = jr, this.getSpan = xr, this.getActiveSpan = Dr, this.getSpanContext = Br, this.setSpan = Mr, this.setSpanContext = Ur; } return t.getInstance = function () { return this._instance || (this._instance = new t), this._instance; }, t.prototype.setGlobalTracerProvider = function (t) { var e = vr(Qr, this._proxyTracerProvider, Or.instance()); return e && this._proxyTracerProvider.setDelegate(t), e; }, t.prototype.getTracerProvider = function () { return gr(Qr) || this._proxyTracerProvider; }, t.prototype.getTracer = function (t, e) { return this.getTracerProvider().getTracer(t, e); }, t.prototype.disable = function () { mr(Qr, Or.instance()), this._proxyTracerProvider = new Jr; }, t; } ().getInstance(), ei = Pr.getInstance(), ni = "OT_ZONE_CONTEXT", ri = function () { function t() { this._enabled = !1, this._zoneCounter = 0; } return t.prototype._activeContextFromZone = function (t) { return t && t.get(ni) || br; }, t.prototype._bindFunction = function (t, e) { var n = this, r = function () { for (var r = this, i = [], o = 0; o < arguments.length; o++) i[o] = arguments[o]; return n.with(t, (function () { return e.apply(r, i); })); }; return Object.defineProperty(r, "length", { enumerable: !1, configurable: !0, writable: !1, value: e.length }), r; }, t.prototype._bindListener = function (t, e) { var n = e; return void 0 !== n.__ot_listeners || (n.__ot_listeners = {}, "function" == typeof n.addEventListener && (n.addEventListener = this._patchAddEventListener(n, n.addEventListener, t)), "function" == typeof n.removeEventListener && (n.removeEventListener = this._patchRemoveEventListener(n, n.removeEventListener))), e; }, t.prototype._createZoneName = function () { this._zoneCounter++; var t = Math.random(); return this._zoneCounter + "-" + t; }, t.prototype._createZone = function (t, e) { var n; return Zone.current.fork({ name: t, properties: (n = {}, n[ni] = e, n) }); }, t.prototype._getActiveZone = function () { return Zone.current; }, t.prototype._patchAddEventListener = function (t, e, n) { var r = this; return function (i, o, a) { void 0 === t.__ot_listeners && (t.__ot_listeners = {}); var s = t.__ot_listeners[i]; void 0 === s && (s = new WeakMap, t.__ot_listeners[i] = s); var u = r.bind(n, o); return s.set(o, u), e.call(this, i, u, a); }; }, t.prototype._patchRemoveEventListener = function (t, e) { return function (n, r) { if (void 0 === t.__ot_listeners || void 0 === t.__ot_listeners[n]) return e.call(this, n, r); var i = t.__ot_listeners[n], o = i.get(r); return i.delete(r), e.call(this, n, o || r); }; }, t.prototype.active = function () { if (!this._enabled) return br; var t = this._getActiveZone(); return this._activeContextFromZone(t) || br; }, t.prototype.bind = function (t, e) { return void 0 === t && (t = this.active()), "function" == typeof e ? this._bindFunction(t, e) : (void 0 === (n = e) && (n = {}), "function" == typeof n.addEventListener && "function" == typeof n.removeEventListener && this._bindListener(t, e), e); var n; }, t.prototype.disable = function () { return this._enabled = !1, this; }, t.prototype.enable = function () { return this._enabled = !0, this; }, t.prototype.with = function (t, e, n) { for (var r = [], i = 3; i < arguments.length; i++) r[i - 3] = arguments[i]; var o = this._createZoneName(); return this._createZone(o, t).run(e, n, r); }, t; } (), ii = (n(216), _r("OpenTelemetry SDK Context Key SUPPRESS_TRACING")), oi = "[_0-9a-z-*/]", ai = new RegExp("^(?:[a-z]" + oi + "{0,255}|[a-z0-9]" + oi + "{0,240}@[a-z]" + oi + "{0,13})$"), si = /^[ -~]{0,255}[!-~]$/, ui = /,|=/, ci = function () { function t(t) { this._internalState = new Map, t && this._parse(t); } return t.prototype.set = function (t, e) { var n = this._clone(); return n._internalState.has(t) && n._internalState.delete(t), n._internalState.set(t, e), n; }, t.prototype.unset = function (t) { var e = this._clone(); return e._internalState.delete(t), e; }, t.prototype.get = function (t) { return this._internalState.get(t); }, t.prototype.serialize = function () { var t = this; return this._keys().reduce((function (e, n) { return e.push(n + "=" + t.get(n)), e; }), []).join(","); }, t.prototype._parse = function (t) { t.length > 512 || (this._internalState = t.split(",").reverse().reduce((function (t, e) { var n = e.trim(), r = n.indexOf("="); if (-1 !== r) { var i = n.slice(0, r), o = n.slice(r + 1, e.length); (function (t) { return ai.test(t); })(i) && function (t) { return si.test(t) && !ui.test(t); } (o) && t.set(i, o); } return t; }), new Map), this._internalState.size > 32 && (this._internalState = new Map(Array.from(this._internalState.entries()).reverse().slice(0, 32)))); }, t.prototype._keys = function () { return Array.from(this._internalState.keys()).reverse(); }, t.prototype._clone = function () { var e = new t; return e._internalState = new Map(this._internalState), e; }, t; } (), li = "traceparent", fi = "tracestate", pi = new RegExp("^\\s?((?!ff)[\\da-f]{2})-((?![0]{32})[\\da-f]{32})-((?![0]{16})[\\da-f]{16})-([\\da-f]{2})(-.*)?\\s?$"), di = function () { function t() { } return t.prototype.inject = function (t, e, n) { var r = ti.getSpanContext(t); if (r && !function (t) { return !0 === t.getValue(ii); } (t) && Vr(r)) { var i = "00-" + r.traceId + "-" + r.spanId + "-0" + Number(r.traceFlags || wr.NONE).toString(16); n.set(e, li, i), r.traceState && n.set(e, fi, r.traceState.serialize()); } }, t.prototype.extract = function (t, e, n) { var r = n.get(e, li); if (!r) return t; var i = Array.isArray(r) ? r[0] : r; if ("string" != typeof i) return t; var o = function (t) { var e = pi.exec(t); return e ? "00" === e[1] && e[5] ? null : { traceId: e[2], spanId: e[3], traceFlags: parseInt(e[4], 16) } : null; } (i); if (!o) return t; o.isRemote = !0; var a = n.get(e, fi); if (a) { var s = Array.isArray(a) ? a.join(",") : a; o.traceState = new ci("string" == typeof s ? s : void 0); } return ti.setSpanContext(t, o); }, t.prototype.fields = function () { return [li, fi]; }, t; } (), hi = (Gr = function (t, e) { return Gr = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) { t.__proto__ = e; } || function (t, e) { for (var n in e) Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]); }, Gr(t, e); }, function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null"); function n() { this.constructor = t; } Gr(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n); }), vi = function () { function t() { } return t.prototype.createGauge = function (t, e) { return Li; }, t.prototype.createHistogram = function (t, e) { return Pi; }, t.prototype.createCounter = function (t, e) { return Ri; }, t.prototype.createUpDownCounter = function (t, e) { return Ai; }, t.prototype.createObservableGauge = function (t, e) { return ki; }, t.prototype.createObservableCounter = function (t, e) { return Ci; }, t.prototype.createObservableUpDownCounter = function (t, e) { return Ii; }, t.prototype.addBatchObservableCallback = function (t, e) { }, t.prototype.removeBatchObservableCallback = function (t) { }, t; } (), gi = function () { }, mi = function (t) { function e() { return null !== t && t.apply(this, arguments) || this; } return hi(e, t), e.prototype.add = function (t, e) { }, e; } (gi), _i = function (t) { function e() { return null !== t && t.apply(this, arguments) || this; } return hi(e, t), e.prototype.add = function (t, e) { }, e; } (gi), yi = function (t) { function e() { return null !== t && t.apply(this, arguments) || this; } return hi(e, t), e.prototype.record = function (t, e) { }, e; } (gi), bi = function (t) { function e() { return null !== t && t.apply(this, arguments) || this; } return hi(e, t), e.prototype.record = function (t, e) { }, e; } (gi), Ei = function () { function t() { } return t.prototype.addCallback = function (t) { }, t.prototype.removeCallback = function (t) { }, t; } (), Ti = function (t) { function e() { return null !== t && t.apply(this, arguments) || this; } return hi(e, t), e; } (Ei), Si = function (t) { function e() { return null !== t && t.apply(this, arguments) || this; } return hi(e, t), e; } (Ei), wi = function (t) { function e() { return null !== t && t.apply(this, arguments) || this; } return hi(e, t), e; } (Ei), Oi = new vi, Ri = new mi, Li = new yi, Pi = new bi, Ai = new _i, Ci = new Ti, ki = new Si, Ii = new wi, Ni = new (function () { function t() { } return t.prototype.getMeter = function (t, e, n) { return Oi; }, t; } ()), xi = "metrics", Di = function () { function t() { } return t.getInstance = function () { return this._instance || (this._instance = new t), this._instance; }, t.prototype.setGlobalMeterProvider = function (t) { return vr(xi, t, Or.instance()); }, t.prototype.getMeterProvider = function () { return gr(xi) || Ni; }, t.prototype.getMeter = function (t, e, n) { return this.getMeterProvider().getMeter(t, e, n); }, t.prototype.disable = function () { mr(xi, Or.instance()); }, t; } ().getInstance(), Mi = "object" == typeof globalThis ? globalThis : "object" == typeof self ? self : "object" == typeof window ? window : "object" == typeof n.g ? n.g : {}, ji = Symbol.for("io.opentelemetry.js.api.logs"), Ui = Mi, Bi = function () { function t() { } return t.prototype.emit = function (t) { }, t; } (), zi = (new Bi, new (function () { function t() { } return t.prototype.getLogger = function (t, e, n) { return new Bi; }, t; } ())), Fi = function () { function t() { } return t.getInstance = function () { return this._instance || (this._instance = new t), this._instance; }, t.prototype.setGlobalLoggerProvider = function (t) { return Ui[ji] ? this.getLoggerProvider() : (Ui[ji] = (e = t, n = zi, function (t) { return 1 === t ? e : n; }), t); var e, n; }, t.prototype.getLoggerProvider = function () { var t, e; return null !== (e = null === (t = Ui[ji]) || void 0 === t ? void 0 : t.call(Ui, 1)) && void 0 !== e ? e : zi; }, t.prototype.getLogger = function (t, e, n) { return this.getLoggerProvider().getLogger(t, e, n); }, t.prototype.disable = function () { delete Ui[ji]; }, t; } (), Hi = Fi.getInstance(), Vi = Or.instance(), Zi = "process.runtime.name", Gi = "service.name", Xi = "telemetry.sdk.name", qi = "telemetry.sdk.language", $i = "telemetry.sdk.version", Wi = "webjs", Ki = ((Xr = {})[Xi] = "opentelemetry", Xr[Zi] = "browser", Xr[qi] = Wi, Xr[$i] = "1.26.0", Xr), Yi = function () { return Yi = Object.assign || function (t) { for (var e, n = 1, r = arguments.length; n < r; n++) for (var i in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]); return t; }, Yi.apply(this, arguments); }, Ji = function () { function t(t, e) { var n, r = this; this._attributes = t, this.asyncAttributesPending = null != e, this._syncAttributes = null !== (n = this._attributes) && void 0 !== n ? n : {}, this._asyncAttributesPromise = null == e ? void 0 : e.then((function (t) { return r._attributes = Object.assign({}, r._attributes, t), r.asyncAttributesPending = !1, t; }), (function (t) { return Vi.debug("a resource's async attributes promise rejected: %s", t), r.asyncAttributesPending = !1, {}; })); } return t.empty = function () { return t.EMPTY; }, t.default = function () { var e; return new t(((e = {})[Gi] = "unknown_service", e[qi] = Ki[qi], e[Xi] = Ki[Xi], e[$i] = Ki[$i], e)); }, Object.defineProperty(t.prototype, "attributes", { get: function () { var t; return this.asyncAttributesPending && Vi.error("Accessing resource attributes before async attributes settled"), null !== (t = this._attributes) && void 0 !== t ? t : {}; }, enumerable: !1, configurable: !0 }), t.prototype.waitForAsyncAttributes = function () { return function (t, e, n, r) { return new (n || (n = Promise))((function (i, o) { function a(t) { try { u(r.next(t)); } catch (t) { o(t); } } function s(t) { try { u(r.throw(t)); } catch (t) { o(t); } } function u(t) { var e; t.done ? i(t.value) : (e = t.value, e instanceof n ? e : new n((function (t) { t(e); }))).then(a, s); } u((r = r.apply(t, e || [])).next()); })); } (this, void 0, void 0, (function () { return function (t, e) { var n, r, i, o, a = { label: 0, sent: function () { if (1 & i[0]) throw i[1]; return i[1]; }, trys: [], ops: [] }; return o = { next: s(0), throw: s(1), return: s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this; }), o; function s(o) { return function (s) { return function (o) { if (n) throw new TypeError("Generator is already executing."); for (; a;) try { if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i; switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) { case 0: case 1: i = o; break; case 4: return a.label++, { value: o[1], done: !1 }; case 5: a.label++, r = o[1], o = [0]; continue; case 7: o = a.ops.pop(), a.trys.pop(); continue; default: if (!((i = (i = a.trys).length > 0 && i[i.length - 1]) || 6 !== o[0] && 2 !== o[0])) { a = 0; continue; } if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) { a.label = o[1]; break; } if (6 === o[0] && a.label < i[1]) { a.label = i[1], i = o; break; } if (i && a.label < i[2]) { a.label = i[2], a.ops.push(o); break; } i[2] && a.ops.pop(), a.trys.pop(); continue; }o = e.call(t, a); } catch (t) { o = [6, t], r = 0; } finally { n = i = 0; } if (5 & o[0]) throw o[1]; return { value: o[0] ? o[1] : void 0, done: !0 }; } ([o, s]); }; } } (this, (function (t) { switch (t.label) { case 0: return this.asyncAttributesPending ? [4, this._asyncAttributesPromise] : [3, 2]; case 1: t.sent(), t.label = 2; case 2: return [2]; } })); })); }, t.prototype.merge = function (e) { var n, r = this; if (!e) return this; var i = Yi(Yi({}, this._syncAttributes), null !== (n = e._syncAttributes) && void 0 !== n ? n : e.attributes); if (!this._asyncAttributesPromise && !e._asyncAttributesPromise) return new t(i); var o = Promise.all([this._asyncAttributesPromise, e._asyncAttributesPromise]).then((function (t) { var n, i = function (t, e) { var n = "function" == typeof Symbol && t[Symbol.iterator]; if (!n) return t; var r, i, o = n.call(t), a = []; try { for (; (void 0 === e || e-- > 0) && !(r = o.next()).done;) a.push(r.value); } catch (t) { i = { error: t }; } finally { try { r && !r.done && (n = o.return) && n.call(o); } finally { if (i) throw i.error; } } return a; } (t, 2), o = i[0], a = i[1]; return Yi(Yi(Yi(Yi({}, r._syncAttributes), o), null !== (n = e._syncAttributes) && void 0 !== n ? n : e.attributes), a); })); return new t(i, o); }, t.EMPTY = new t({}), t; } (), Qi = function () { function t() { } return t.prototype.inject = function (t, e) { }, t.prototype.extract = function (t, e) { return t; }, t.prototype.fields = function () { return []; }, t; } (), to = { get: function (t, e) { if (null != t) return t[e]; }, keys: function (t) { return null == t ? [] : Object.keys(t); } }, eo = { set: function (t, e, n) { null != t && (t[e] = n); } }, no = _r("OpenTelemetry Baggage Key"); function ro(t) { return t.getValue(no) || void 0; } function io() { return ro(Pr.getInstance().active()); } function oo(t, e) { return t.setValue(no, e); } function ao(t) { return t.deleteValue(no); } var so = function () { function t(t) { this._entries = t ? new Map(t) : new Map; } return t.prototype.getEntry = function (t) { var e = this._entries.get(t); if (e) return Object.assign({}, e); }, t.prototype.getAllEntries = function () { return Array.from(this._entries.entries()).map((function (t) { var e = function (t, e) { var n = "function" == typeof Symbol && t[Symbol.iterator]; if (!n) return t; var r, i, o = n.call(t), a = []; try { for (; (void 0 === e || e-- > 0) && !(r = o.next()).done;) a.push(r.value); } catch (t) { i = { error: t }; } finally { try { r && !r.done && (n = o.return) && n.call(o); } finally { if (i) throw i.error; } } return a; } (t, 2); return [e[0], e[1]]; })); }, t.prototype.setEntry = function (e, n) { var r = new t(this._entries); return r._entries.set(e, n), r; }, t.prototype.removeEntry = function (e) { var n = new t(this._entries); return n._entries.delete(e), n; }, t.prototype.removeEntries = function () { for (var e, n, r = [], i = 0; i < arguments.length; i++) r[i] = arguments[i]; var o = new t(this._entries); try { for (var a = function (t) { var e = "function" == typeof Symbol && Symbol.iterator, n = e && t[e], r = 0; if (n) return n.call(t); if (t && "number" == typeof t.length) return { next: function () { return t && r >= t.length && (t = void 0), { value: t && t[r++], done: !t }; } }; throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined."); } (r), s = a.next(); !s.done; s = a.next()) { var u = s.value; o._entries.delete(u); } } catch (t) { e = { error: t }; } finally { try { s && !s.done && (n = a.return) && n.call(a); } finally { if (e) throw e.error; } } return o; }, t.prototype.clear = function () { return new t; }, t; } (), uo = Symbol("BaggageEntryMetadata"), co = Or.instance(); function lo(t) { return void 0 === t && (t = {}), new so(new Map(Object.entries(t))); } var fo, po, ho, vo = "propagation", go = new Qi, mo = function () { function t() { this.createBaggage = lo, this.getBaggage = ro, this.getActiveBaggage = io, this.setBaggage = oo, this.deleteBaggage = ao; } return t.getInstance = function () { return this._instance || (this._instance = new t), this._instance; }, t.prototype.setGlobalPropagator = function (t) { return vr(vo, t, Or.instance()); }, t.prototype.inject = function (t, e, n) { return void 0 === n && (n = eo), this._getGlobalPropagator().inject(t, e, n); }, t.prototype.extract = function (t, e, n) { return void 0 === n && (n = to), this._getGlobalPropagator().extract(t, e, n); }, t.prototype.fields = function () { return this._getGlobalPropagator().fields(); }, t.prototype.disable = function () { mr(vo, Or.instance()); }, t.prototype._getGlobalPropagator = function () { return gr(vo) || go; }, t; } ().getInstance(), _o = Function.prototype.toString, yo = _o.call(Object), bo = (fo = Object.getPrototypeOf, po = Object, function (t) { return fo(po(t)); }), Eo = Object.prototype, To = Eo.hasOwnProperty, So = Symbol ? Symbol.toStringTag : void 0, wo = Eo.toString; function Oo(t) { if (!function (t) { return null != t && "object" == typeof t; } (t) || "[object Object]" !== function (t) { return null == t ? void 0 === t ? "[object Undefined]" : "[object Null]" : So && So in Object(t) ? function (t) { var e = To.call(t, So), n = t[So], r = !1; try { t[So] = void 0, r = !0; } catch (t) { } var i = wo.call(t); return r && (e ? t[So] = n : delete t[So]), i; } (t) : function (t) { return wo.call(t); } (t); } (t)) return !1; var e = bo(t); if (null === e) return !0; var n = To.call(e, "constructor") && e.constructor; return "function" == typeof n && n instanceof n && _o.call(n) === yo; } function Ro(t) { return Ao(t) ? t.slice() : t; } function Lo(t, e, n, r) { var i; if (void 0 === n && (n = 0), !(n > 20)) { if (n++, Io(t) || Io(e) || Co(e)) i = Ro(e); else if (Ao(t)) { if (i = t.slice(), Ao(e)) for (var o = 0, a = e.length; o < a; o++) i.push(Ro(e[o])); else if (ko(e)) for (o = 0, a = (s = Object.keys(e)).length; o < a; o++) i[u = s[o]] = Ro(e[u]); } else if (ko(t)) if (ko(e)) { if (!function (t, e) { return !(!Oo(t) || !Oo(e)); } (t, e)) return e; var s; for (i = Object.assign({}, t), o = 0, a = (s = Object.keys(e)).length; o < a; o++) { var u, c = e[u = s[o]]; if (Io(c)) void 0 === c ? delete i[u] : i[u] = c; else { var l = i[u], f = c; if (Po(t, u, r) || Po(e, u, r)) delete i[u]; else { if (ko(l) && ko(f)) { var p = r.get(l) || [], d = r.get(f) || []; p.push({ obj: t, key: u }), d.push({ obj: e, key: u }), r.set(l, p), r.set(f, d); } i[u] = Lo(i[u], c, n, r); } } } } else i = e; return i; } } function Po(t, e, n) { for (var r = n.get(t[e]) || [], i = 0, o = r.length; i < o; i++) { var a = r[i]; if (a.key === e && a.obj === t) return !0; } return !1; } function Ao(t) { return Array.isArray(t); } function Co(t) { return "function" == typeof t; } function ko(t) { return !Io(t) && !Ao(t) && !Co(t) && "object" == typeof t; } function Io(t) { return "string" == typeof t || "number" == typeof t || "boolean" == typeof t || void 0 === t || t instanceof Date || t instanceof RegExp || null === t; } !function (t) { t.AlwaysOff = "always_off", t.AlwaysOn = "always_on", t.ParentBasedAlwaysOff = "parentbased_always_off", t.ParentBasedAlwaysOn = "parentbased_always_on", t.ParentBasedTraceIdRatio = "parentbased_traceidratio", t.TraceIdRatio = "traceidratio"; } (ho || (ho = {})); var No = ["OTEL_SDK_DISABLED"]; function xo(t) { return No.indexOf(t) > -1; } var Do = ["OTEL_BSP_EXPORT_TIMEOUT", "OTEL_BSP_MAX_EXPORT_BATCH_SIZE", "OTEL_BSP_MAX_QUEUE_SIZE", "OTEL_BSP_SCHEDULE_DELAY", "OTEL_BLRP_EXPORT_TIMEOUT", "OTEL_BLRP_MAX_EXPORT_BATCH_SIZE", "OTEL_BLRP_MAX_QUEUE_SIZE", "OTEL_BLRP_SCHEDULE_DELAY", "OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT", "OTEL_ATTRIBUTE_COUNT_LIMIT", "OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT", "OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT", "OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT", "OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT", "OTEL_SPAN_EVENT_COUNT_LIMIT", "OTEL_SPAN_LINK_COUNT_LIMIT", "OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT", "OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT", "OTEL_EXPORTER_OTLP_TIMEOUT", "OTEL_EXPORTER_OTLP_TRACES_TIMEOUT", "OTEL_EXPORTER_OTLP_METRICS_TIMEOUT", "OTEL_EXPORTER_OTLP_LOGS_TIMEOUT", "OTEL_EXPORTER_JAEGER_AGENT_PORT"]; function Mo(t) { return Do.indexOf(t) > -1; } var jo = ["OTEL_NO_PATCH_MODULES", "OTEL_PROPAGATORS", "OTEL_SEMCONV_STABILITY_OPT_IN"]; function Uo(t) { return jo.indexOf(t) > -1; } var Bo = 1 / 0, zo = 128, Fo = { OTEL_SDK_DISABLED: !1, CONTAINER_NAME: "", ECS_CONTAINER_METADATA_URI_V4: "", ECS_CONTAINER_METADATA_URI: "", HOSTNAME: "", KUBERNETES_SERVICE_HOST: "", NAMESPACE: "", OTEL_BSP_EXPORT_TIMEOUT: 3e4, OTEL_BSP_MAX_EXPORT_BATCH_SIZE: 512, OTEL_BSP_MAX_QUEUE_SIZE: 2048, OTEL_BSP_SCHEDULE_DELAY: 5e3, OTEL_BLRP_EXPORT_TIMEOUT: 3e4, OTEL_BLRP_MAX_EXPORT_BATCH_SIZE: 512, OTEL_BLRP_MAX_QUEUE_SIZE: 2048, OTEL_BLRP_SCHEDULE_DELAY: 5e3, OTEL_EXPORTER_JAEGER_AGENT_HOST: "", OTEL_EXPORTER_JAEGER_AGENT_PORT: 6832, OTEL_EXPORTER_JAEGER_ENDPOINT: "", OTEL_EXPORTER_JAEGER_PASSWORD: "", OTEL_EXPORTER_JAEGER_USER: "", OTEL_EXPORTER_OTLP_ENDPOINT: "", OTEL_EXPORTER_OTLP_TRACES_ENDPOINT: "", OTEL_EXPORTER_OTLP_METRICS_ENDPOINT: "", OTEL_EXPORTER_OTLP_LOGS_ENDPOINT: "", OTEL_EXPORTER_OTLP_HEADERS: "", OTEL_EXPORTER_OTLP_TRACES_HEADERS: "", OTEL_EXPORTER_OTLP_METRICS_HEADERS: "", OTEL_EXPORTER_OTLP_LOGS_HEADERS: "", OTEL_EXPORTER_OTLP_TIMEOUT: 1e4, OTEL_EXPORTER_OTLP_TRACES_TIMEOUT: 1e4, OTEL_EXPORTER_OTLP_METRICS_TIMEOUT: 1e4, OTEL_EXPORTER_OTLP_LOGS_TIMEOUT: 1e4, OTEL_EXPORTER_ZIPKIN_ENDPOINT: "http://localhost:9411/api/v2/spans", OTEL_LOG_LEVEL: yr.INFO, OTEL_NO_PATCH_MODULES: [], OTEL_PROPAGATORS: ["tracecontext", "baggage"], OTEL_RESOURCE_ATTRIBUTES: "", OTEL_SERVICE_NAME: "", OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT: Bo, OTEL_ATTRIBUTE_COUNT_LIMIT: zo, OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT: Bo, OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT: zo, OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT: Bo, OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT: zo, OTEL_SPAN_EVENT_COUNT_LIMIT: 128, OTEL_SPAN_LINK_COUNT_LIMIT: 128, OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT: 128, OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT: 128, OTEL_TRACES_EXPORTER: "", OTEL_TRACES_SAMPLER: ho.ParentBasedAlwaysOn, OTEL_TRACES_SAMPLER_ARG: "", OTEL_LOGS_EXPORTER: "", OTEL_EXPORTER_OTLP_INSECURE: "", OTEL_EXPORTER_OTLP_TRACES_INSECURE: "", OTEL_EXPORTER_OTLP_METRICS_INSECURE: "", OTEL_EXPORTER_OTLP_LOGS_INSECURE: "", OTEL_EXPORTER_OTLP_CERTIFICATE: "", OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE: "", OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE: "", OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE: "", OTEL_EXPORTER_OTLP_COMPRESSION: "", OTEL_EXPORTER_OTLP_TRACES_COMPRESSION: "", OTEL_EXPORTER_OTLP_METRICS_COMPRESSION: "", OTEL_EXPORTER_OTLP_LOGS_COMPRESSION: "", OTEL_EXPORTER_OTLP_CLIENT_KEY: "", OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY: "", OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY: "", OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY: "", OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE: "", OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE: "", OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE: "", OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE: "", OTEL_EXPORTER_OTLP_PROTOCOL: "http/protobuf", OTEL_EXPORTER_OTLP_TRACES_PROTOCOL: "http/protobuf", OTEL_EXPORTER_OTLP_METRICS_PROTOCOL: "http/protobuf", OTEL_EXPORTER_OTLP_LOGS_PROTOCOL: "http/protobuf", OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE: "cumulative", OTEL_SEMCONV_STABILITY_OPT_IN: [] }; function Ho(t, e, n) { if (void 0 !== n[t]) { var r = String(n[t]); e[t] = "true" === r.toLowerCase(); } } function Vo(t, e, n, r, i) { if (void 0 === r && (r = -1 / 0), void 0 === i && (i = 1 / 0), void 0 !== n[t]) { var o = Number(n[t]); isNaN(o) || (e[t] = o < r ? r : o > i ? i : o); } } function Zo(t, e, n, r) { void 0 === r && (r = ","); var i = n[t]; "string" == typeof i && (e[t] = i.split(r).map((function (t) { return t.trim(); }))); } var Go = { ALL: yr.ALL, VERBOSE: yr.VERBOSE, DEBUG: yr.DEBUG, INFO: yr.INFO, WARN: yr.WARN, ERROR: yr.ERROR, NONE: yr.NONE }; function Xo(t, e, n) { var r = n[t]; if ("string" == typeof r) { var i = Go[r.toUpperCase()]; null != i && (e[t] = i); } } function qo(t) { var e = {}; for (var n in Fo) { var r = n; if ("OTEL_LOG_LEVEL" === r) Xo(r, e, t); else if (xo(r)) Ho(r, e, t); else if (Mo(r)) Vo(r, e, t); else if (Uo(r)) Zo(r, e, t); else { var i = t[r]; null != i && (e[r] = String(i)); } } return e; } var $o = "object" == typeof globalThis ? globalThis : "object" == typeof self ? self : "object" == typeof window ? window : "object" == typeof n.g ? n.g : {}; function Wo() { var t = qo($o); return Object.assign({}, Fo, t); } var Ko = function () { function t(t) { var e; void 0 === t && (t = {}), this._propagators = null !== (e = t.propagators) && void 0 !== e ? e : [], this._fields = Array.from(new Set(this._propagators.map((function (t) { return "function" == typeof t.fields ? t.fields() : []; })).reduce((function (t, e) { return t.concat(e); }), []))); } return t.prototype.inject = function (t, e, n) { var r, i; try { for (var o = function (t) { var e = "function" == typeof Symbol && Symbol.iterator, n = e && t[e], r = 0; if (n) return n.call(t); if (t && "number" == typeof t.length) return { next: function () { return t && r >= t.length && (t = void 0), { value: t && t[r++], done: !t }; } }; throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined."); } (this._propagators), a = o.next(); !a.done; a = o.next()) { var s = a.value; try { s.inject(t, e, n); } catch (t) { Vi.warn("Failed to inject with " + s.constructor.name + ". Err: " + t.message); } } } catch (t) { r = { error: t }; } finally { try { a && !a.done && (i = o.return) && i.call(o); } finally { if (r) throw r.error; } } }, t.prototype.extract = function (t, e, n) { return this._propagators.reduce((function (t, r) { try { return r.extract(t, e, n); } catch (t) { Vi.warn("Failed to extract with " + r.constructor.name + ". Err: " + t.message); } return t; }), t); }, t.prototype.fields = function () { return this._fields.slice(); }, t; } (), Yo = _r("OpenTelemetry SDK Context Key SUPPRESS_TRACING"); function Jo(t) { return !0 === t.getValue(Yo); } var Qo = "[_0-9a-z-*/]", ta = new RegExp("^(?:[a-z]" + Qo + "{0,255}|[a-z0-9]" + Qo + "{0,240}@[a-z]" + Qo + "{0,13})$"), ea = /^[ -~]{0,255}[!-~]$/, na = /,|=/, ra = function () { function t(t) { this._internalState = new Map, t && this._parse(t); } return t.prototype.set = function (t, e) { var n = this._clone(); return n._internalState.has(t) && n._internalState.delete(t), n._internalState.set(t, e), n; }, t.prototype.unset = function (t) { var e = this._clone(); return e._internalState.delete(t), e; }, t.prototype.get = function (t) { return this._internalState.get(t); }, t.prototype.serialize = function () { var t = this; return this._keys().reduce((function (e, n) { return e.push(n + "=" + t.get(n)), e; }), []).join(","); }, t.prototype._parse = function (t) { t.length > 512 || (this._internalState = t.split(",").reverse().reduce((function (t, e) { var n = e.trim(), r = n.indexOf("="); if (-1 !== r) { var i = n.slice(0, r), o = n.slice(r + 1, e.length); (function (t) { return ta.test(t); })(i) && function (t) { return ea.test(t) && !na.test(t); } (o) && t.set(i, o); } return t; }), new Map), this._internalState.size > 32 && (this._internalState = new Map(Array.from(this._internalState.entries()).reverse().slice(0, 32)))); }, t.prototype._keys = function () { return Array.from(this._internalState.keys()).reverse(); }, t.prototype._clone = function () { var e = new t; return e._internalState = new Map(this._internalState), e; }, t; } (), ia = "traceparent", oa = "tracestate", aa = new RegExp("^\\s?((?!ff)[\\da-f]{2})-((?![0]{32})[\\da-f]{32})-((?![0]{16})[\\da-f]{16})-([\\da-f]{2})(-.*)?\\s?$"), sa = function () { function t() { } return t.prototype.inject = function (t, e, n) { var r = ti.getSpanContext(t); if (r && !Jo(t) && Vr(r)) { var i = "00-" + r.traceId + "-" + r.spanId + "-0" + Number(r.traceFlags || wr.NONE).toString(16); n.set(e, ia, i), r.traceState && n.set(e, oa, r.traceState.serialize()); } }, t.prototype.extract = function (t, e, n) { var r = n.get(e, ia); if (!r) return t; var i = Array.isArray(r) ? r[0] : r; if ("string" != typeof i) return t; var o = function (t) { var e = aa.exec(t); return e ? "00" === e[1] && e[5] ? null : { traceId: e[2], spanId: e[3], traceFlags: parseInt(e[4], 16) } : null; } (i); if (!o) return t; o.isRemote = !0; var a = n.get(e, oa); if (a) { var s = Array.isArray(a) ? a.join(",") : a; o.traceState = new ra("string" == typeof s ? s : void 0); } return ti.setSpanContext(t, o); }, t.prototype.fields = function () { return [ia, oa]; }, t; } (), ua = "baggage"; var ca, la, fa, pa = function () { function t() { } return t.prototype.inject = function (t, e, n) { var r = mo.getBaggage(t); if (r && !Jo(t)) { var i = function (t) { return t.getAllEntries().map((function (t) { var e = function (t, e) { var n = "function" == typeof Symbol && t[Symbol.iterator]; if (!n) return t; var r, i, o = n.call(t), a = []; try { for (; (void 0 === e || e-- > 0) && !(r = o.next()).done;) a.push(r.value); } catch (t) { i = { error: t }; } finally { try { r && !r.done && (n = o.return) && n.call(o); } finally { if (i) throw i.error; } } return a; } (t, 2), n = e[0], r = e[1], i = encodeURIComponent(n) + "=" + encodeURIComponent(r.value); return void 0 !== r.metadata && (i += ";" + r.metadata.toString()), i; })); } (r).filter((function (t) { return t.length <= 4096; })).slice(0, 180), o = function (t) { return t.reduce((function (t, e) { var n = t + ("" !== t ? "," : "") + e; return n.length > 8192 ? t : n; }), ""); } (i); o.length > 0 && n.set(e, ua, o); } }, t.prototype.extract = function (t, e, n) { var r = n.get(e, ua), i = Array.isArray(r) ? r.join(",") : r; if (!i) return t; var o = {}; return 0 === i.length ? t : (i.split(",").forEach((function (t) { var e = function (t) { var e = t.split(";"); if (!(e.length <= 0)) { var n = e.shift(); if (n) { var r = n.indexOf("="); if (!(r <= 0)) { var i, o, a = decodeURIComponent(n.substring(0, r).trim()), s = decodeURIComponent(n.substring(r + 1).trim()); return e.length > 0 && ("string" != typeof (o = e.join(";")) && (co.error("Cannot create baggage metadata from unknown type: " + typeof o), o = ""), i = { __TYPE__: uo, toString: function () { return o; } }), { key: a, value: s, metadata: i }; } } } } (t); if (e) { var n = { value: e.value }; e.metadata && (n.metadata = e.metadata), o[e.key] = n; } })), 0 === Object.entries(o).length ? t : mo.setBaggage(t, mo.createBaggage(o))); }, t.prototype.fields = function () { return [ua]; }, t; } (), da = ((ca = {})[Xi] = "opentelemetry", ca[Zi] = "browser", ca[qi] = Wi, ca[$i] = "1.27.0", ca), ha = function () { return ha = Object.assign || function (t) { for (var e, n = 1, r = arguments.length; n < r; n++) for (var i in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]); return t; }, ha.apply(this, arguments); }, va = function () { function t(t, e) { var n, r = this; this._attributes = t, this.asyncAttributesPending = null != e, this._syncAttributes = null !== (n = this._attributes) && void 0 !== n ? n : {}, this._asyncAttributesPromise = null == e ? void 0 : e.then((function (t) { return r._attributes = Object.assign({}, r._attributes, t), r.asyncAttributesPending = !1, t; }), (function (t) { return Vi.debug("a resource's async attributes promise rejected: %s", t), r.asyncAttributesPending = !1, {}; })); } return t.empty = function () { return t.EMPTY; }, t.default = function () { var e; return new t(((e = {})[Gi] = "unknown_service", e[qi] = da[qi], e[Xi] = da[Xi], e[$i] = da[$i], e)); }, Object.defineProperty(t.prototype, "attributes", { get: function () { var t; return this.asyncAttributesPending && Vi.error("Accessing resource attributes before async attributes settled"), null !== (t = this._attributes) && void 0 !== t ? t : {}; }, enumerable: !1, configurable: !0 }), t.prototype.waitForAsyncAttributes = function () { return function (t, e, n, r) { return new (n || (n = Promise))((function (i, o) { function a(t) { try { u(r.next(t)); } catch (t) { o(t); } } function s(t) { try { u(r.throw(t)); } catch (t) { o(t); } } function u(t) { var e; t.done ? i(t.value) : (e = t.value, e instanceof n ? e : new n((function (t) { t(e); }))).then(a, s); } u((r = r.apply(t, e || [])).next()); })); } (this, void 0, void 0, (function () { return function (t, e) { var n, r, i, o, a = { label: 0, sent: function () { if (1 & i[0]) throw i[1]; return i[1]; }, trys: [], ops: [] }; return o = { next: s(0), throw: s(1), return: s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this; }), o; function s(o) { return function (s) { return function (o) { if (n) throw new TypeError("Generator is already executing."); for (; a;) try { if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i; switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) { case 0: case 1: i = o; break; case 4: return a.label++, { value: o[1], done: !1 }; case 5: a.label++, r = o[1], o = [0]; continue; case 7: o = a.ops.pop(), a.trys.pop(); continue; default: if (!((i = (i = a.trys).length > 0 && i[i.length - 1]) || 6 !== o[0] && 2 !== o[0])) { a = 0; continue; } if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) { a.label = o[1]; break; } if (6 === o[0] && a.label < i[1]) { a.label = i[1], i = o; break; } if (i && a.label < i[2]) { a.label = i[2], a.ops.push(o); break; } i[2] && a.ops.pop(), a.trys.pop(); continue; }o = e.call(t, a); } catch (t) { o = [6, t], r = 0; } finally { n = i = 0; } if (5 & o[0]) throw o[1]; return { value: o[0] ? o[1] : void 0, done: !0 }; } ([o, s]); }; } } (this, (function (t) { switch (t.label) { case 0: return this.asyncAttributesPending ? [4, this._asyncAttributesPromise] : [3, 2]; case 1: t.sent(), t.label = 2; case 2: return [2]; } })); })); }, t.prototype.merge = function (e) { var n, r = this; if (!e) return this; var i = ha(ha({}, this._syncAttributes), null !== (n = e._syncAttributes) && void 0 !== n ? n : e.attributes); if (!this._asyncAttributesPromise && !e._asyncAttributesPromise) return new t(i); var o = Promise.all([this._asyncAttributesPromise, e._asyncAttributesPromise]).then((function (t) { var n, i = function (t, e) { var n = "function" == typeof Symbol && t[Symbol.iterator]; if (!n) return t; var r, i, o = n.call(t), a = []; try { for (; (void 0 === e || e-- > 0) && !(r = o.next()).done;) a.push(r.value); } catch (t) { i = { error: t }; } finally { try { r && !r.done && (n = o.return) && n.call(o); } finally { if (i) throw i.error; } } return a; } (t, 2), o = i[0], a = i[1]; return ha(ha(ha(ha({}, r._syncAttributes), o), null !== (n = e._syncAttributes) && void 0 !== n ? n : e.attributes), a); })); return new t(i, o); }, t.EMPTY = new t({}), t; } (); !function (t) { t[t.INTERNAL = 0] = "INTERNAL", t[t.SERVER = 1] = "SERVER", t[t.CLIENT = 2] = "CLIENT", t[t.PRODUCER = 3] = "PRODUCER", t[t.CONSUMER = 4] = "CONSUMER"; } (la || (la = {})), function (t) { t[t.NOT_RECORD = 0] = "NOT_RECORD", t[t.RECORD = 1] = "RECORD", t[t.RECORD_AND_SAMPLED = 2] = "RECORD_AND_SAMPLED"; } (fa || (fa = {})); var ga, ma = function (t) { var e = "function" == typeof Symbol && Symbol.iterator, n = e && t[e], r = 0; if (n) return n.call(t); if (t && "number" == typeof t.length) return { next: function () { return t && r >= t.length && (t = void 0), { value: t && t[r++], done: !t }; } }; throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined."); }, _a = function (t, e) { var n = "function" == typeof Symbol && t[Symbol.iterator]; if (!n) return t; var r, i, o = n.call(t), a = []; try { for (; (void 0 === e || e-- > 0) && !(r = o.next()).done;) a.push(r.value); } catch (t) { i = { error: t }; } finally { try { r && !r.done && (n = o.return) && n.call(o); } finally { if (i) throw i.error; } } return a; }; function ya(t) { var e, n, r = {}; if ("object" != typeof t || null == t) return r; try { for (var i = ma(Object.entries(t)), o = i.next(); !o.done; o = i.next()) { var a = _a(o.value, 2), s = a[0], u = a[1]; ba(s) ? Ea(u) ? Array.isArray(u) ? r[s] = u.slice() : r[s] = u : Vi.warn("Invalid attribute value set for key: " + s) : Vi.warn("Invalid attribute key: " + s); } } catch (t) { e = { error: t }; } finally { try { o && !o.done && (n = i.return) && n.call(i); } finally { if (e) throw e.error; } } return r; } function ba(t) { return "string" == typeof t && t.length > 0; } function Ea(t) { return null == t || (Array.isArray(t) ? function (t) { var e, n, r; try { for (var i = ma(t), o = i.next(); !o.done; o = i.next()) { var a = o.value; if (null != a) { if (!r) { if (Ta(a)) { r = typeof a; continue; } return !1; } if (typeof a !== r) return !1; } } } catch (t) { e = { error: t }; } finally { try { o && !o.done && (n = i.return) && n.call(i); } finally { if (e) throw e.error; } } return !0; } (t) : Ta(t)); } function Ta(t) { switch (typeof t) { case "number": case "boolean": case "string": return !0; } return !1; } !function (t) { t[t.UNSET = 0] = "UNSET", t[t.OK = 1] = "OK", t[t.ERROR = 2] = "ERROR"; } (ga || (ga = {})); var Sa = performance, wa = Math.pow(10, 6), Oa = Math.pow(10, 9); function Ra(t) { var e = t / 1e3; return [Math.trunc(e), Math.round(t % 1e3 * wa)]; } function La() { var t = Sa.timeOrigin; if ("number" != typeof t) { var e = Sa; t = e.timing && e.timing.fetchStart; } return t; } function Pa(t) { return Array.isArray(t) && 2 === t.length && "number" == typeof t[0] && "number" == typeof t[1]; } function Aa(t) { return Pa(t) || "number" == typeof t || t instanceof Date; } function Ca(t, e) { var n = [t[0] + e[0], t[1] + e[1]]; return n[1] >= Oa && (n[1] -= Oa, n[0] += 1), n; } var ka, Ia = "exception.type", Na = "exception.message", xa = "http.method", Da = "http.url", Ma = "http.host", ja = "http.scheme", Ua = "http.status_code", Ba = "http.user_agent", za = "http.response_content_length", Fa = "http.response_content_length_uncompressed", Ha = function () { return Ha = Object.assign || function (t) { for (var e, n = 1, r = arguments.length; n < r; n++) for (var i in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]); return t; }, Ha.apply(this, arguments); }, Va = function (t, e) { var n = "function" == typeof Symbol && t[Symbol.iterator]; if (!n) return t; var r, i, o = n.call(t), a = []; try { for (; (void 0 === e || e-- > 0) && !(r = o.next()).done;) a.push(r.value); } catch (t) { i = { error: t }; } finally { try { r && !r.done && (n = o.return) && n.call(o); } finally { if (i) throw i.error; } } return a; }, Za = function () { function t(t, e, n, r, i, o, a, s, u, c) { void 0 === a && (a = []), this.attributes = {}, this.links = [], this.events = [], this._droppedAttributesCount = 0, this._droppedEventsCount = 0, this._droppedLinksCount = 0, this.status = { code: ga.UNSET }, this.endTime = [0, 0], this._ended = !1, this._duration = [-1, -1], this.name = n, this._spanContext = r, this.parentSpanId = o, this.kind = i, this.links = a; var l = Date.now(); this._performanceStartTime = Sa.now(), this._performanceOffset = l - (this._performanceStartTime + La()), this._startTimeProvided = null != s, this.startTime = this._getTime(null != s ? s : l), this.resource = t.resource, this.instrumentationLibrary = t.instrumentationLibrary, this._spanLimits = t.getSpanLimits(), this._attributeValueLengthLimit = this._spanLimits.attributeValueLengthLimit || 0, null != c && this.setAttributes(c), this._spanProcessor = t.getActiveSpanProcessor(), this._spanProcessor.onStart(this, e); } return t.prototype.spanContext = function () { return this._spanContext; }, t.prototype.setAttribute = function (t, e) { return null == e || this._isSpanEnded() ? this : 0 === t.length ? (Vi.warn("Invalid attribute key: " + t), this) : Ea(e) ? Object.keys(this.attributes).length >= this._spanLimits.attributeCountLimit && !Object.prototype.hasOwnProperty.call(this.attributes, t) ? (this._droppedAttributesCount++, this) : (this.attributes[t] = this._truncateToSize(e), this) : (Vi.warn("Invalid attribute value set for key: " + t), this); }, t.prototype.setAttributes = function (t) { var e, n; try { for (var r = function (t) { var e = "function" == typeof Symbol && Symbol.iterator, n = e && t[e], r = 0; if (n) return n.call(t); if (t && "number" == typeof t.length) return { next: function () { return t && r >= t.length && (t = void 0), { value: t && t[r++], done: !t }; } }; throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined."); } (Object.entries(t)), i = r.next(); !i.done; i = r.next()) { var o = Va(i.value, 2), a = o[0], s = o[1]; this.setAttribute(a, s); } } catch (t) { e = { error: t }; } finally { try { i && !i.done && (n = r.return) && n.call(r); } finally { if (e) throw e.error; } } return this; }, t.prototype.addEvent = function (t, e, n) { if (this._isSpanEnded()) return this; if (0 === this._spanLimits.eventCountLimit) return Vi.warn("No events allowed."), this._droppedEventsCount++, this; this.events.length >= this._spanLimits.eventCountLimit && (0 === this._droppedEventsCount && Vi.debug("Dropping extra events."), this.events.shift(), this._droppedEventsCount++), Aa(e) && (Aa(n) || (n = e), e = void 0); var r = ya(e); return this.events.push({ name: t, attributes: r, time: this._getTime(n), droppedAttributesCount: 0 }), this; }, t.prototype.addLink = function (t) { return this.links.push(t), this; }, t.prototype.addLinks = function (t) { var e; return (e = this.links).push.apply(e, function (t, e, n) { if (n || 2 === arguments.length) for (var r, i = 0, o = e.length; i < o; i++) !r && i in e || (r || (r = Array.prototype.slice.call(e, 0, i)), r[i] = e[i]); return t.concat(r || Array.prototype.slice.call(e)); } ([], Va(t), !1)), this; }, t.prototype.setStatus = function (t) { return this._isSpanEnded() || (this.status = Ha({}, t), null != this.status.message && "string" != typeof t.message && (Vi.warn("Dropping invalid status.message of type '" + typeof t.message + "', expected 'string'"), delete this.status.message)), this; }, t.prototype.updateName = function (t) { return this._isSpanEnded() || (this.name = t), this; }, t.prototype.end = function (t) { this._isSpanEnded() ? Vi.error(this.name + " " + this._spanContext.traceId + "-" + this._spanContext.spanId + " - You can only call end() on a span once.") : (this._ended = !0, this.endTime = this._getTime(t), this._duration = function (t, e) { var n = e[0] - t[0], r = e[1] - t[1]; return r < 0 && (n -= 1, r += Oa), [n, r]; } (this.startTime, this.endTime), this._duration[0] < 0 && (Vi.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.", this.startTime, this.endTime), this.endTime = this.startTime.slice(), this._duration = [0, 0]), this._droppedEventsCount > 0 && Vi.warn("Dropped " + this._droppedEventsCount + " events because eventCountLimit reached"), this._spanProcessor.onEnd(this)); }, t.prototype._getTime = function (t) { if ("number" == typeof t && t < Sa.now()) return e = t + this._performanceOffset, Ca(Ra(La()), Ra("number" == typeof e ? e : Sa.now())); var e; if ("number" == typeof t) return Ra(t); if (t instanceof Date) return Ra(t.getTime()); if (Pa(t)) return t; if (this._startTimeProvided) return Ra(Date.now()); var n = Sa.now() - this._performanceStartTime; return Ca(this.startTime, Ra(n)); }, t.prototype.isRecording = function () { return !1 === this._ended; }, t.prototype.recordException = function (t, e) { var n = {}; "string" == typeof t ? n[Na] = t : t && (t.code ? n[Ia] = t.code.toString() : t.name && (n[Ia] = t.name), t.message && (n[Na] = t.message), t.stack && (n["exception.stacktrace"] = t.stack)), n[Ia] || n[Na] ? this.addEvent("exception", n, e) : Vi.warn("Failed to record an exception " + t); }, Object.defineProperty(t.prototype, "duration", { get: function () { return this._duration; }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "ended", { get: function () { return this._ended; }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "droppedAttributesCount", { get: function () { return this._droppedAttributesCount; }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "droppedEventsCount", { get: function () { return this._droppedEventsCount; }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "droppedLinksCount", { get: function () { return this._droppedLinksCount; }, enumerable: !1, configurable: !0 }), t.prototype._isSpanEnded = function () { return this._ended && Vi.warn("Can not execute the operation on ended Span {traceId: " + this._spanContext.traceId + ", spanId: " + this._spanContext.spanId + "}"), this._ended; }, t.prototype._truncateToLimitUtil = function (t, e) { return t.length <= e ? t : t.substr(0, e); }, t.prototype._truncateToSize = function (t) { var e = this, n = this._attributeValueLengthLimit; return n <= 0 ? (Vi.warn("Attribute value limit must be positive, got " + n), t) : "string" == typeof t ? this._truncateToLimitUtil(t, n) : Array.isArray(t) ? t.map((function (t) { return "string" == typeof t ? e._truncateToLimitUtil(t, n) : t; })) : t; }, t; } (); !function (t) { t[t.NOT_RECORD = 0] = "NOT_RECORD", t[t.RECORD = 1] = "RECORD", t[t.RECORD_AND_SAMPLED = 2] = "RECORD_AND_SAMPLED"; } (ka || (ka = {})); var Ga = function () { function t() { } return t.prototype.shouldSample = function () { return { decision: ka.NOT_RECORD }; }, t.prototype.toString = function () { return "AlwaysOffSampler"; }, t; } (), Xa = function () { function t() { } return t.prototype.shouldSample = function () { return { decision: ka.RECORD_AND_SAMPLED }; }, t.prototype.toString = function () { return "AlwaysOnSampler"; }, t; } (); function qa(t) { try { !function (t) { Vi.error(function (t) { return "string" == typeof t ? t : JSON.stringify(function (t) { for (var e = {}, n = t; null !== n;) Object.getOwnPropertyNames(n).forEach((function (t) { if (!e[t]) { var r = n[t]; r && (e[t] = String(r)); } })), n = Object.getPrototypeOf(n); return e; } (t)); } (t)); } (t); } catch (t) { } } var $a = function () { function t(t) { var e, n, r, i; this._root = t.root, this._root || (qa(new Error("ParentBasedSampler must have a root sampler configured")), this._root = new Xa), this._remoteParentSampled = null !== (e = t.remoteParentSampled) && void 0 !== e ? e : new Xa, this._remoteParentNotSampled = null !== (n = t.remoteParentNotSampled) && void 0 !== n ? n : new Ga, this._localParentSampled = null !== (r = t.localParentSampled) && void 0 !== r ? r : new Xa, this._localParentNotSampled = null !== (i = t.localParentNotSampled) && void 0 !== i ? i : new Ga; } return t.prototype.shouldSample = function (t, e, n, r, i, o) { var a = ti.getSpanContext(t); return a && Vr(a) ? a.isRemote ? a.traceFlags & wr.SAMPLED ? this._remoteParentSampled.shouldSample(t, e, n, r, i, o) : this._remoteParentNotSampled.shouldSample(t, e, n, r, i, o) : a.traceFlags & wr.SAMPLED ? this._localParentSampled.shouldSample(t, e, n, r, i, o) : this._localParentNotSampled.shouldSample(t, e, n, r, i, o) : this._root.shouldSample(t, e, n, r, i, o); }, t.prototype.toString = function () { return "ParentBased{root=" + this._root.toString() + ", remoteParentSampled=" + this._remoteParentSampled.toString() + ", remoteParentNotSampled=" + this._remoteParentNotSampled.toString() + ", localParentSampled=" + this._localParentSampled.toString() + ", localParentNotSampled=" + this._localParentNotSampled.toString() + "}"; }, t; } (), Wa = function () { function t(t) { void 0 === t && (t = 0), this._ratio = t, this._ratio = this._normalize(t), this._upperBound = Math.floor(4294967295 * this._ratio); } return t.prototype.shouldSample = function (t, e) { return { decision: Hr(e) && this._accumulate(e) < this._upperBound ? ka.RECORD_AND_SAMPLED : ka.NOT_RECORD }; }, t.prototype.toString = function () { return "TraceIdRatioBased{" + this._ratio + "}"; }, t.prototype._normalize = function (t) { return "number" != typeof t || isNaN(t) ? 0 : t >= 1 ? 1 : t <= 0 ? 0 : t; }, t.prototype._accumulate = function (t) { for (var e = 0, n = 0; n < t.length / 8; n++) { var r = 8 * n; e = (e ^ parseInt(t.slice(r, r + 8), 16)) >>> 0; } return e; }, t; } (), Ka = Wo(), Ya = ho.AlwaysOn; function Ja() { var t = Wo(); return { sampler: Qa(Ka), forceFlushTimeoutMillis: 3e4, generalLimits: { attributeValueLengthLimit: t.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT, attributeCountLimit: t.OTEL_ATTRIBUTE_COUNT_LIMIT }, spanLimits: { attributeValueLengthLimit: t.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT, attributeCountLimit: t.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT, linkCountLimit: t.OTEL_SPAN_LINK_COUNT_LIMIT, eventCountLimit: t.OTEL_SPAN_EVENT_COUNT_LIMIT, attributePerEventCountLimit: t.OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT, attributePerLinkCountLimit: t.OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT } }; } function Qa(t) { switch (void 0 === t && (t = Wo()), t.OTEL_TRACES_SAMPLER) { case ho.AlwaysOn: return new Xa; case ho.AlwaysOff: return new Ga; case ho.ParentBasedAlwaysOn: return new $a({ root: new Xa }); case ho.ParentBasedAlwaysOff: return new $a({ root: new Ga }); case ho.TraceIdRatio: return new Wa(ts(t)); case ho.ParentBasedTraceIdRatio: return new $a({ root: new Wa(ts(t)) }); default: return Vi.error('OTEL_TRACES_SAMPLER value "' + t.OTEL_TRACES_SAMPLER + " invalid, defaulting to " + Ya + '".'), new Xa; } } function ts(t) { if (void 0 === t.OTEL_TRACES_SAMPLER_ARG || "" === t.OTEL_TRACES_SAMPLER_ARG) return Vi.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to 1."), 1; var e = Number(t.OTEL_TRACES_SAMPLER_ARG); return isNaN(e) ? (Vi.error("OTEL_TRACES_SAMPLER_ARG=" + t.OTEL_TRACES_SAMPLER_ARG + " was given, but it is invalid, defaulting to 1."), 1) : e < 0 || e > 1 ? (Vi.error("OTEL_TRACES_SAMPLER_ARG=" + t.OTEL_TRACES_SAMPLER_ARG + " was given, but it is out of range ([0..1]), defaulting to 1."), 1) : e; } var es = function () { this.generateTraceId = rs(16), this.generateSpanId = rs(8); }, ns = Array(32); function rs(t) { return function () { for (var e = 0; e < 2 * t; e++) ns[e] = Math.floor(16 * Math.random()) + 48, ns[e] >= 58 && (ns[e] += 39); return String.fromCharCode.apply(null, ns.slice(0, 2 * t)); }; } var is, os = function () { function t(t, e, n) { this._tracerProvider = n; var r, i, o, a, s = (r = e, i = { sampler: Qa() }, o = Ja(), (a = Object.assign({}, o, i, r)).generalLimits = Object.assign({}, o.generalLimits, r.generalLimits || {}), a.spanLimits = Object.assign({}, o.spanLimits, r.spanLimits || {}), a); this._sampler = s.sampler, this._generalLimits = s.generalLimits, this._spanLimits = s.spanLimits, this._idGenerator = e.idGenerator || new es, this.resource = n.resource, this.instrumentationLibrary = t; } return t.prototype.startSpan = function (t, e, n) { var r, i, o; void 0 === e && (e = {}), void 0 === n && (n = ei.active()), e.root && (n = ti.deleteSpan(n)); var a = ti.getSpan(n); if (Jo(n)) return Vi.debug("Instrumentation suppressed, returning Noop Span"), ti.wrapSpanContext(kr); var s, u, c, l = null == a ? void 0 : a.spanContext(), f = this._idGenerator.generateSpanId(); l && ti.isSpanContextValid(l) ? (s = l.traceId, u = l.traceState, c = l.spanId) : s = this._idGenerator.generateTraceId(); var p = null !== (r = e.kind) && void 0 !== r ? r : la.INTERNAL, d = (null !== (i = e.links) && void 0 !== i ? i : []).map((function (t) { return { context: t.context, attributes: ya(t.attributes) }; })), h = ya(e.attributes), v = this._sampler.shouldSample(n, s, t, p, h, d); u = null !== (o = v.traceState) && void 0 !== o ? o : u; var g = { traceId: s, spanId: f, traceFlags: v.decision === fa.RECORD_AND_SAMPLED ? wr.SAMPLED : wr.NONE, traceState: u }; if (v.decision === fa.NOT_RECORD) return Vi.debug("Recording is off, propagating context in a non-recording span"), ti.wrapSpanContext(g); var m = ya(Object.assign(h, v.attributes)); return new Za(this, n, t, g, p, c, d, e.startTime, void 0, m); }, t.prototype.startActiveSpan = function (t, e, n, r) { var i, o, a; if (!(arguments.length < 2)) { 2 === arguments.length ? a = e : 3 === arguments.length ? (i = e, a = n) : (i = e, o = n, a = r); var s = null != o ? o : ei.active(), u = this.startSpan(t, i, s), c = ti.setSpan(s, u); return ei.with(c, a, void 0, u); } }, t.prototype.getGeneralLimits = function () { return this._generalLimits; }, t.prototype.getSpanLimits = function () { return this._spanLimits; }, t.prototype.getActiveSpanProcessor = function () { return this._tracerProvider.getActiveSpanProcessor(); }, t; } (), as = function (t) { var e = "function" == typeof Symbol && Symbol.iterator, n = e && t[e], r = 0; if (n) return n.call(t); if (t && "number" == typeof t.length) return { next: function () { return t && r >= t.length && (t = void 0), { value: t && t[r++], done: !t }; } }; throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined."); }, ss = function () { function t(t) { this._spanProcessors = t; } return t.prototype.forceFlush = function () { var t, e, n = []; try { for (var r = as(this._spanProcessors), i = r.next(); !i.done; i = r.next()) { var o = i.value; n.push(o.forceFlush()); } } catch (e) { t = { error: e }; } finally { try { i && !i.done && (e = r.return) && e.call(r); } finally { if (t) throw t.error; } } return new Promise((function (t) { Promise.all(n).then((function () { t(); })).catch((function (e) { qa(e || new Error("MultiSpanProcessor: forceFlush failed")), t(); })); })); }, t.prototype.onStart = function (t, e) { var n, r; try { for (var i = as(this._spanProcessors), o = i.next(); !o.done; o = i.next()) o.value.onStart(t, e); } catch (t) { n = { error: t }; } finally { try { o && !o.done && (r = i.return) && r.call(i); } finally { if (n) throw n.error; } } }, t.prototype.onEnd = function (t) { var e, n; try { for (var r = as(this._spanProcessors), i = r.next(); !i.done; i = r.next()) i.value.onEnd(t); } catch (t) { e = { error: t }; } finally { try { i && !i.done && (n = r.return) && n.call(r); } finally { if (e) throw e.error; } } }, t.prototype.shutdown = function () { var t, e, n = []; try { for (var r = as(this._spanProcessors), i = r.next(); !i.done; i = r.next()) { var o = i.value; n.push(o.shutdown()); } } catch (e) { t = { error: e }; } finally { try { i && !i.done && (e = r.return) && e.call(r); } finally { if (t) throw t.error; } } return new Promise((function (t, e) { Promise.all(n).then((function () { t(); }), e); })); }, t; } (), us = function () { function t() { } return t.prototype.onStart = function (t, e) { }, t.prototype.onEnd = function (t) { }, t.prototype.shutdown = function () { return Promise.resolve(); }, t.prototype.forceFlush = function () { return Promise.resolve(); }, t; } (), cs = function () { function t() { var t = this; this._promise = new Promise((function (e, n) { t._resolve = e, t._reject = n; })); } return Object.defineProperty(t.prototype, "promise", { get: function () { return this._promise; }, enumerable: !1, configurable: !0 }), t.prototype.resolve = function (t) { this._resolve(t); }, t.prototype.reject = function (t) { this._reject(t); }, t; } (), ls = function () { function t(t, e) { this._callback = t, this._that = e, this._isCalled = !1, this._deferred = new cs; } return Object.defineProperty(t.prototype, "isCalled", { get: function () { return this._isCalled; }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "promise", { get: function () { return this._deferred.promise; }, enumerable: !1, configurable: !0 }), t.prototype.call = function () { for (var t, e = this, n = [], r = 0; r < arguments.length; r++) n[r] = arguments[r]; if (!this._isCalled) { this._isCalled = !0; try { Promise.resolve((t = this._callback).call.apply(t, function (t, e, n) { if (n || 2 === arguments.length) for (var r, i = 0, o = e.length; i < o; i++) !r && i in e || (r || (r = Array.prototype.slice.call(e, 0, i)), r[i] = e[i]); return t.concat(r || Array.prototype.slice.call(e)); } ([this._that], function (t, e) { var n = "function" == typeof Symbol && t[Symbol.iterator]; if (!n) return t; var r, i, o = n.call(t), a = []; try { for (; (void 0 === e || e-- > 0) && !(r = o.next()).done;) a.push(r.value); } catch (t) { i = { error: t }; } finally { try { r && !r.done && (n = o.return) && n.call(o); } finally { if (i) throw i.error; } } return a; } (n), !1))).then((function (t) { return e._deferred.resolve(t); }), (function (t) { return e._deferred.reject(t); })); } catch (t) { this._deferred.reject(t); } } return this._deferred.promise; }, t; } (); !function (t) { t[t.SUCCESS = 0] = "SUCCESS", t[t.FAILED = 1] = "FAILED"; } (is || (is = {})); var fs, ps = function () { function t(t, e) { this._exporter = t, this._isExporting = !1, this._finishedSpans = [], this._droppedSpansCount = 0; var n = Wo(); this._maxExportBatchSize = "number" == typeof (null == e ? void 0 : e.maxExportBatchSize) ? e.maxExportBatchSize : n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE, this._maxQueueSize = "number" == typeof (null == e ? void 0 : e.maxQueueSize) ? e.maxQueueSize : n.OTEL_BSP_MAX_QUEUE_SIZE, this._scheduledDelayMillis = "number" == typeof (null == e ? void 0 : e.scheduledDelayMillis) ? e.scheduledDelayMillis : n.OTEL_BSP_SCHEDULE_DELAY, this._exportTimeoutMillis = "number" == typeof (null == e ? void 0 : e.exportTimeoutMillis) ? e.exportTimeoutMillis : n.OTEL_BSP_EXPORT_TIMEOUT, this._shutdownOnce = new ls(this._shutdown, this), this._maxExportBatchSize > this._maxQueueSize && (Vi.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"), this._maxExportBatchSize = this._maxQueueSize); } return t.prototype.forceFlush = function () { return this._shutdownOnce.isCalled ? this._shutdownOnce.promise : this._flushAll(); }, t.prototype.onStart = function (t, e) { }, t.prototype.onEnd = function (t) { this._shutdownOnce.isCalled || t.spanContext().traceFlags & wr.SAMPLED && this._addToBuffer(t); }, t.prototype.shutdown = function () { return this._shutdownOnce.call(); }, t.prototype._shutdown = function () { var t = this; return Promise.resolve().then((function () { return t.onShutdown(); })).then((function () { return t._flushAll(); })).then((function () { return t._exporter.shutdown(); })); }, t.prototype._addToBuffer = function (t) { if (this._finishedSpans.length >= this._maxQueueSize) return 0 === this._droppedSpansCount && Vi.debug("maxQueueSize reached, dropping spans"), void this._droppedSpansCount++; this._droppedSpansCount > 0 && (Vi.warn("Dropped " + this._droppedSpansCount + " spans because maxQueueSize reached"), this._droppedSpansCount = 0), this._finishedSpans.push(t), this._maybeStartTimer(); }, t.prototype._flushAll = function () { var t = this; return new Promise((function (e, n) { for (var r = [], i = 0, o = Math.ceil(t._finishedSpans.length / t._maxExportBatchSize); i < o; i++) r.push(t._flushOneBatch()); Promise.all(r).then((function () { e(); })).catch(n); })); }, t.prototype._flushOneBatch = function () { var t = this; return this._clearTimer(), 0 === this._finishedSpans.length ? Promise.resolve() : new Promise((function (e, n) { var r = setTimeout((function () { n(new Error("Timeout")); }), t._exportTimeoutMillis); ei.with(ei.active().setValue(Yo, !0), (function () { var i; t._finishedSpans.length <= t._maxExportBatchSize ? (i = t._finishedSpans, t._finishedSpans = []) : i = t._finishedSpans.splice(0, t._maxExportBatchSize); for (var o = function () { return t._exporter.export(i, (function (t) { var i; clearTimeout(r), t.code === is.SUCCESS ? e() : n(null !== (i = t.error) && void 0 !== i ? i : new Error("BatchSpanProcessor: span export failed")); })); }, a = null, s = 0, u = i.length; s < u; s++) { var c = i[s]; c.resource.asyncAttributesPending && c.resource.waitForAsyncAttributes && (null != a || (a = []), a.push(c.resource.waitForAsyncAttributes())); } null === a ? o() : Promise.all(a).then(o, (function (t) { qa(t), n(t); })); })); })); }, t.prototype._maybeStartTimer = function () { var t = this; if (!this._isExporting) { var e = function () { t._isExporting = !0, t._flushOneBatch().finally((function () { t._isExporting = !1, t._finishedSpans.length > 0 && (t._clearTimer(), t._maybeStartTimer()); })).catch((function (e) { t._isExporting = !1, qa(e); })); }; if (this._finishedSpans.length >= this._maxExportBatchSize) return e(); void 0 === this._timer && (this._timer = setTimeout((function () { return e(); }), this._scheduledDelayMillis), this._timer); } }, t.prototype._clearTimer = function () { void 0 !== this._timer && (clearTimeout(this._timer), this._timer = void 0); }, t; } (), ds = function () { var t = function (e, n) { return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) { t.__proto__ = e; } || function (t, e) { for (var n in e) Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]); }, t(e, n); }; return function (e, n) { if ("function" != typeof n && null !== n) throw new TypeError("Class extends value " + String(n) + " is not a constructor or null"); function r() { this.constructor = e; } t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r); }; } (), hs = function (t) { function e(e, n) { var r = t.call(this, e, n) || this; return r.onInit(n), r; } return ds(e, t), e.prototype.onInit = function (t) { var e = this; !0 !== (null == t ? void 0 : t.disableAutoFlushOnDocumentHide) && "undefined" != typeof document && (this._visibilityChangeListener = function () { "hidden" === document.visibilityState && e.forceFlush(); }, this._pageHideListener = function () { e.forceFlush(); }, document.addEventListener("visibilitychange", this._visibilityChangeListener), document.addEventListener("pagehide", this._pageHideListener)); }, e.prototype.onShutdown = function () { "undefined" != typeof document && (this._visibilityChangeListener && document.removeEventListener("visibilitychange", this._visibilityChangeListener), this._pageHideListener && document.removeEventListener("pagehide", this._pageHideListener)); }, e; } (ps); !function (t) { t[t.resolved = 0] = "resolved", t[t.timeout = 1] = "timeout", t[t.error = 2] = "error", t[t.unresolved = 3] = "unresolved"; } (fs || (fs = {})); var vs, gs = function () { function t(t) { var e; void 0 === t && (t = {}), this._registeredSpanProcessors = [], this._tracers = new Map; var n = function () { for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e]; for (var n = t.shift(), r = new WeakMap; t.length > 0;) n = Lo(n, t.shift(), 0, r); return n; } ({}, Ja(), function (t) { var e, n, r, i, o, a, s, u, c, l, f, p, d = Object.assign({}, t.spanLimits), h = qo($o); return d.attributeCountLimit = null !== (a = null !== (o = null !== (i = null !== (n = null === (e = t.spanLimits) || void 0 === e ? void 0 : e.attributeCountLimit) && void 0 !== n ? n : null === (r = t.generalLimits) || void 0 === r ? void 0 : r.attributeCountLimit) && void 0 !== i ? i : h.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT) && void 0 !== o ? o : h.OTEL_ATTRIBUTE_COUNT_LIMIT) && void 0 !== a ? a : zo, d.attributeValueLengthLimit = null !== (p = null !== (f = null !== (l = null !== (u = null === (s = t.spanLimits) || void 0 === s ? void 0 : s.attributeValueLengthLimit) && void 0 !== u ? u : null === (c = t.generalLimits) || void 0 === c ? void 0 : c.attributeValueLengthLimit) && void 0 !== l ? l : h.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT) && void 0 !== f ? f : h.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT) && void 0 !== p ? p : Bo, Object.assign({}, t, { spanLimits: d }); } (t)); this.resource = null !== (e = n.resource) && void 0 !== e ? e : va.empty(), this.resource = va.default().merge(this.resource), this._config = Object.assign({}, n, { resource: this.resource }); var r = this._buildExporterFromEnv(); if (void 0 !== r) { var i = new hs(r); this.activeSpanProcessor = i; } else this.activeSpanProcessor = new us; } return t.prototype.getTracer = function (t, e, n) { var r = t + "@" + (e || "") + ":" + ((null == n ? void 0 : n.schemaUrl) || ""); return this._tracers.has(r) || this._tracers.set(r, new os({ name: t, version: e, schemaUrl: null == n ? void 0 : n.schemaUrl }, this._config, this)), this._tracers.get(r); }, t.prototype.addSpanProcessor = function (t) { 0 === this._registeredSpanProcessors.length && this.activeSpanProcessor.shutdown().catch((function (t) { return Vi.error("Error while trying to shutdown current span processor", t); })), this._registeredSpanProcessors.push(t), this.activeSpanProcessor = new ss(this._registeredSpanProcessors); }, t.prototype.getActiveSpanProcessor = function () { return this.activeSpanProcessor; }, t.prototype.register = function (t) { void 0 === t && (t = {}), ti.setGlobalTracerProvider(this), void 0 === t.propagator && (t.propagator = this._buildPropagatorFromEnv()), t.contextManager && ei.setGlobalContextManager(t.contextManager), t.propagator && mo.setGlobalPropagator(t.propagator); }, t.prototype.forceFlush = function () { var t = this._config.forceFlushTimeoutMillis, e = this._registeredSpanProcessors.map((function (e) { return new Promise((function (n) { var r, i = setTimeout((function () { n(new Error("Span processor did not completed within timeout period of " + t + " ms")), r = fs.timeout; }), t); e.forceFlush().then((function () { clearTimeout(i), r !== fs.timeout && (r = fs.resolved, n(r)); })).catch((function (t) { clearTimeout(i), r = fs.error, n(t); })); })); })); return new Promise((function (t, n) { Promise.all(e).then((function (e) { var r = e.filter((function (t) { return t !== fs.resolved; })); r.length > 0 ? n(r) : t(); })).catch((function (t) { return n([t]); })); })); }, t.prototype.shutdown = function () { return this.activeSpanProcessor.shutdown(); }, t.prototype._getPropagator = function (t) { var e; return null === (e = this.constructor._registeredPropagators.get(t)) || void 0 === e ? void 0 : e(); }, t.prototype._getSpanExporter = function (t) { var e; return null === (e = this.constructor._registeredExporters.get(t)) || void 0 === e ? void 0 : e(); }, t.prototype._buildPropagatorFromEnv = function () { var t = this, e = Array.from(new Set(Wo().OTEL_PROPAGATORS)), n = e.map((function (e) { var n = t._getPropagator(e); return n || Vi.warn('Propagator "' + e + '" requested through environment variable is unavailable.'), n; })).reduce((function (t, e) { return e && t.push(e), t; }), []); return 0 === n.length ? void 0 : 1 === e.length ? n[0] : new Ko({ propagators: n }); }, t.prototype._buildExporterFromEnv = function () { var t = Wo().OTEL_TRACES_EXPORTER; if ("none" !== t && "" !== t) { var e = this._getSpanExporter(t); return e || Vi.error('Exporter "' + t + '" requested through environment variable is unavailable.'), e; } }, t._registeredPropagators = new Map([["tracecontext", function () { return new sa; } ], ["baggage", function () { return new pa; } ]]), t._registeredExporters = new Map, t; } (), ms = function () { function t() { this._enabled = !1, this._currentContext = br; } return t.prototype._bindFunction = function (t, e) { void 0 === t && (t = br); var n = this, r = function () { for (var r = this, i = [], o = 0; o < arguments.length; o++) i[o] = arguments[o]; return n.with(t, (function () { return e.apply(r, i); })); }; return Object.defineProperty(r, "length", { enumerable: !1, configurable: !0, writable: !1, value: e.length }), r; }, t.prototype.active = function () { return this._currentContext; }, t.prototype.bind = function (t, e) { return void 0 === t && (t = this.active()), "function" == typeof e ? this._bindFunction(t, e) : e; }, t.prototype.disable = function () { return this._currentContext = br, this._enabled = !1, this; }, t.prototype.enable = function () { return this._enabled || (this._enabled = !0, this._currentContext = br), this; }, t.prototype.with = function (t, e, n) { for (var r = [], i = 3; i < arguments.length; i++) r[i - 3] = arguments[i]; var o = this._currentContext; this._currentContext = t || br; try { return e.call.apply(e, function (t, e, n) { if (n || 2 === arguments.length) for (var r, i = 0, o = e.length; i < o; i++) !r && i in e || (r || (r = Array.prototype.slice.call(e, 0, i)), r[i] = e[i]); return t.concat(r || Array.prototype.slice.call(e)); } ([n], function (t, e) { var n = "function" == typeof Symbol && t[Symbol.iterator]; if (!n) return t; var r, i, o = n.call(t), a = []; try { for (; (void 0 === e || e-- > 0) && !(r = o.next()).done;) a.push(r.value); } catch (t) { i = { error: t }; } finally { try { r && !r.done && (n = o.return) && n.call(o); } finally { if (i) throw i.error; } } return a; } (r), !1)); } finally { this._currentContext = o; } }, t; } (), _s = function () { var t = function (e, n) { return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) { t.__proto__ = e; } || function (t, e) { for (var n in e) Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]); }, t(e, n); }; return function (e, n) { if ("function" != typeof n && null !== n) throw new TypeError("Class extends value " + String(n) + " is not a constructor or null"); function r() { this.constructor = e; } t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r); }; } (), ys = function (t) { function e(e) { void 0 === e && (e = {}); var n = t.call(this, e) || this; if (e.contextManager) throw "contextManager should be defined in register method not in constructor"; if (e.propagator) throw "propagator should be defined in register method not in constructor"; return n; } return _s(e, t), e.prototype.register = function (e) { void 0 === e && (e = {}), void 0 === e.contextManager && (e.contextManager = new ms), e.contextManager && e.contextManager.enable(), t.prototype.register.call(this, e); }, e; } (gs); !function (t) { t[t.SUCCESS = 0] = "SUCCESS", t[t.FAILED = 1] = "FAILED"; } (vs || (vs = {})); function bs(t) { return Object.keys(t).map((function (e) { return Es(e, t[e]); })); } function Es(t, e) { return { key: t, value: Ts(e) }; } function Ts(t) { var e = typeof t; return "string" === e ? { stringValue: t } : "number" === e ? Number.isInteger(t) ? { intValue: t } : { doubleValue: t } : "boolean" === e ? { boolValue: t } : t instanceof Uint8Array ? { bytesValue: t } : Array.isArray(t) ? { arrayValue: { values: t.map(Ts) } } : "object" === e && null != t ? { kvlistValue: { values: Object.entries(t).map((function (t) { var e = function (t, e) { var n = "function" == typeof Symbol && t[Symbol.iterator]; if (!n) return t; var r, i, o = n.call(t), a = []; try { for (; (void 0 === e || e-- > 0) && !(r = o.next()).done;) a.push(r.value); } catch (t) { i = { error: t }; } finally { try { r && !r.done && (n = o.return) && n.call(o); } finally { if (i) throw i.error; } } return a; } (t, 2); return Es(e[0], e[1]); })) } } : {}; } function Ss(t, e) { var n, r = t.spanContext(), i = t.status; return { traceId: e.encodeSpanContext(r.traceId), spanId: e.encodeSpanContext(r.spanId), parentSpanId: e.encodeOptionalSpanContext(t.parentSpanId), traceState: null === (n = r.traceState) || void 0 === n ? void 0 : n.serialize(), name: t.name, kind: null == t.kind ? 0 : t.kind + 1, startTimeUnixNano: e.encodeHrTime(t.startTime), endTimeUnixNano: e.encodeHrTime(t.endTime), attributes: bs(t.attributes), droppedAttributesCount: t.droppedAttributesCount, events: t.events.map((function (t) { return function (t, e) { return { attributes: t.attributes ? bs(t.attributes) : [], name: t.name, timeUnixNano: e.encodeHrTime(t.time), droppedAttributesCount: t.droppedAttributesCount || 0 }; } (t, e); })), droppedEventsCount: t.droppedEventsCount, status: { code: i.code, message: i.message }, links: t.links.map((function (t) { return function (t, e) { var n; return { attributes: t.attributes ? bs(t.attributes) : [], spanId: e.encodeSpanContext(t.context.spanId), traceId: e.encodeSpanContext(t.context.traceId), traceState: null === (n = t.context.traceState) || void 0 === n ? void 0 : n.serialize(), droppedAttributesCount: t.droppedAttributesCount || 0 }; } (t, e); })), droppedLinksCount: t.droppedLinksCount }; } var ws = performance, Os = Math.pow(10, 6), Rs = Math.pow(10, 9); function Ls(t) { var e = t / 1e3; return [Math.trunc(e), Math.round(t % 1e3 * Os)]; } function Ps() { var t = ws.timeOrigin; if ("number" != typeof t) { var e = ws; t = e.timing && e.timing.fetchStart; } return t; } function As(t) { return e = Ls(Ps()), n = Ls("number" == typeof t ? t : ws.now()), (r = [e[0] + n[0], e[1] + n[1]])[1] >= Rs && (r[1] -= Rs, r[0] += 1), r; var e, n, r; } function Cs(t) { if (e = t, Array.isArray(e) && 2 === e.length && "number" == typeof e[0] && "number" == typeof e[1]) return t; var e; if ("number" == typeof t) return t < Ps() ? As(t) : Ls(t); if (t instanceof Date) return Ls(t.getTime()); throw TypeError("Invalid input type"); } function ks(t) { return t[0] * Rs + t[1]; } function Is(t) { return t >= 48 && t <= 57 ? t - 48 : t >= 97 && t <= 102 ? t - 87 : t - 55; } function Ns(t) { for (var e = new Uint8Array(t.length / 2), n = 0, r = 0; r < t.length; r += 2) { var i = Is(t.charCodeAt(r)), o = Is(t.charCodeAt(r + 1)); e[n++] = i << 4 | o; } return e; } function xs(t) { var e = BigInt(1e9); return BigInt(t[0]) * e + BigInt(t[1]); } function Ds(t) { var e; return e = xs(t), { low: Number(BigInt.asUintN(32, e)), high: Number(BigInt.asUintN(32, e >> BigInt(32))) }; } var Ms = "undefined" != typeof BigInt ? function (t) { return xs(t).toString(); } : ks; function js(t) { return t; } function Us(t) { if (void 0 !== t) return Ns(t); } var Bs = { encodeHrTime: Ds, encodeSpanContext: Ns, encodeOptionalSpanContext: Us }; function zs(t) { return { attributes: bs(t.attributes), droppedAttributesCount: 0 }; } var Fs, Hs = function (t, e) { var n = "function" == typeof Symbol && t[Symbol.iterator]; if (!n) return t; var r, i, o = n.call(t), a = []; try { for (; (void 0 === e || e-- > 0) && !(r = o.next()).done;) a.push(r.value); } catch (t) { i = { error: t }; } finally { try { r && !r.done && (n = o.return) && n.call(o); } finally { if (i) throw i.error; } } return a; }; function Vs(t, e) { for (var n, r = function (t) { var e, n, r = new Map; try { for (var i = function (t) { var e = "function" == typeof Symbol && Symbol.iterator, n = e && t[e], r = 0; if (n) return n.call(t); if (t && "number" == typeof t.length) return { next: function () { return t && r >= t.length && (t = void 0), { value: t && t[r++], done: !t }; } }; throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined."); } (t), o = i.next(); !o.done; o = i.next()) { var a = o.value, s = r.get(a.resource); s || (s = new Map, r.set(a.resource, s)); var u = a.instrumentationLibrary.name + "@" + (a.instrumentationLibrary.version || "") + ":" + (a.instrumentationLibrary.schemaUrl || ""), c = s.get(u); c || (c = [], s.set(u, c)), c.push(a); } } catch (t) { e = { error: t }; } finally { try { o && !o.done && (n = i.return) && n.call(i); } finally { if (e) throw e.error; } } return r; } (t), i = [], o = r.entries(), a = o.next(); !a.done;) { for (var s = Hs(a.value, 2), u = s[0], c = [], l = s[1].values(), f = l.next(); !f.done;) { var p = f.value; if (p.length > 0) { var d = p.map((function (t) { return Ss(t, e); })); c.push({ scope: (n = p[0].instrumentationLibrary, { name: n.name, version: n.version }), spans: d, schemaUrl: p[0].instrumentationLibrary.schemaUrl }); } f = l.next(); } var h = { resource: zs(u), scopeSpans: c, schemaUrl: void 0 }; i.push(h), a = o.next(); } return i; } !function (t) { t[t.SPAN_KIND_UNSPECIFIED = 0] = "SPAN_KIND_UNSPECIFIED", t[t.SPAN_KIND_INTERNAL = 1] = "SPAN_KIND_INTERNAL", t[t.SPAN_KIND_SERVER = 2] = "SPAN_KIND_SERVER", t[t.SPAN_KIND_CLIENT = 3] = "SPAN_KIND_CLIENT", t[t.SPAN_KIND_PRODUCER = 4] = "SPAN_KIND_PRODUCER", t[t.SPAN_KIND_CONSUMER = 5] = "SPAN_KIND_CONSUMER"; } (Fs || (Fs = {})); class Zs { constructor(t) { this.config = t; } export(t, e) { const n = function (t, e) { var n = function (t) { var e, n; if (void 0 === t) return Bs; var r = null === (e = t.useLongBits) || void 0 === e || e, i = null !== (n = t.useHex) && void 0 !== n && n; return { encodeHrTime: r ? Ds : Ms, encodeSpanContext: i ? js : Ns, encodeOptionalSpanContext: i ? js : Us }; } (e); return { resourceSpans: Vs(t, n) }; } (t, { useHex: !0, useLongBits: !1 }); this.config.api.pushTraces(n), function (t = []) { var e, n; for (const r of t) { const { scopeSpans: t } = r; for (const r of t) { const { scope: t, spans: i = [] } = r; for (const r of i) { if (r.kind !== Fs.SPAN_KIND_CLIENT) continue; const i = { traceId: r.traceId.toString(), spanId: r.spanId.toString() }, o = {}; for (const t of r.attributes) o[t.key] = String(Object.values(t.value)[0]); const a = (null !== (e = null == t ? void 0 : t.name) && void 0 !== e ? e : "").indexOf("-"); let s = ot; (null == t ? void 0 : t.name) && (-1 === a && (s = null !== (n = t.name.split("/")[1]) && void 0 !== n ? n : t.name), a > -1 && (s = null == t ? void 0 : t.name.substring(a + 1))), M.api.pushEvent(`faro.tracing.${s}`, o, void 0, { spanContext: i }); } } } } (n.resourceSpans), e({ code: vs.SUCCESS }); } shutdown() { return Promise.resolve(void 0); } } function Gs(t, e, n) { var r, i; try { i = t(); } catch (t) { r = t; } finally { if (e(r, i), r && !n) throw r; return i; } } function Xs(t) { return "function" == typeof t && "function" == typeof t.__original && "function" == typeof t.__unwrap && !0 === t.__wrapped; } var qs, $s, Ws, Ks = n(132), Ys = function () { return Ys = Object.assign || function (t) { for (var e, n = 1, r = arguments.length; n < r; n++) for (var i in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]); return t; }, Ys.apply(this, arguments); }, Js = function () { function t(t, e, n) { this.instrumentationName = t, this.instrumentationVersion = e, this._config = {}, this._wrap = Ks.wrap, this._unwrap = Ks.unwrap, this._massWrap = Ks.massWrap, this._massUnwrap = Ks.massUnwrap, this.setConfig(n), this._diag = Vi.createComponentLogger({ namespace: t }), this._tracer = ti.getTracer(t, e), this._meter = Di.getMeter(t, e), this._logger = Hi.getLogger(t, e), this._updateMetricInstruments(); } return Object.defineProperty(t.prototype, "meter", { get: function () { return this._meter; }, enumerable: !1, configurable: !0 }), t.prototype.setMeterProvider = function (t) { this._meter = t.getMeter(this.instrumentationName, this.instrumentationVersion), this._updateMetricInstruments(); }, Object.defineProperty(t.prototype, "logger", { get: function () { return this._logger; }, enumerable: !1, configurable: !0 }), t.prototype.setLoggerProvider = function (t) { this._logger = t.getLogger(this.instrumentationName, this.instrumentationVersion); }, t.prototype.getModuleDefinitions = function () { var t, e = null !== (t = this.init()) && void 0 !== t ? t : []; return Array.isArray(e) ? e : [e]; }, t.prototype._updateMetricInstruments = function () { }, t.prototype.getConfig = function () { return this._config; }, t.prototype.setConfig = function (t) { this._config = Ys({ enabled: !0 }, t); }, t.prototype.setTracerProvider = function (t) { this._tracer = t.getTracer(this.instrumentationName, this.instrumentationVersion); }, Object.defineProperty(t.prototype, "tracer", { get: function () { return this._tracer; }, enumerable: !1, configurable: !0 }), t.prototype._runSpanCustomizationHook = function (t, e, n, r) { if (t) try { t(n, r); } catch (t) { this._diag.error("Error running span customization hook due to exception in handler", { triggerName: e }, t); } }, t; } (), Qs = function () { var t = function (e, n) { return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) { t.__proto__ = e; } || function (t, e) { for (var n in e) Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]); }, t(e, n); }; return function (e, n) { if ("function" != typeof n && null !== n) throw new TypeError("Class extends value " + String(n) + " is not a constructor or null"); function r() { this.constructor = e; } t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r); }; } (), tu = function (t) { function e(e, n, r) { var i = t.call(this, e, n, r) || this; return i._config.enabled && i.enable(), i; } return Qs(e, t), e; } (Js); function eu(t, e) { return "string" == typeof e ? t === e : !!t.match(e); } function nu(t, e) { var n, r; if (!e) return !1; try { for (var i = function (t) { var e = "function" == typeof Symbol && Symbol.iterator, n = e && t[e], r = 0; if (n) return n.call(t); if (t && "number" == typeof t.length) return { next: function () { return t && r >= t.length && (t = void 0), { value: t && t[r++], done: !t }; } }; throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined."); } (e), o = i.next(); !o.done; o = i.next()) if (eu(t, o.value)) return !0; } catch (t) { n = { error: t }; } finally { try { o && !o.done && (r = i.return) && r.call(i); } finally { if (n) throw n.error; } } return !1; } function ru(t, e) { return e in t; } function iu(t, e, n, r) { var i = void 0, o = void 0; ru(n, e) && "number" == typeof n[e] && (i = n[e]); var a = r || qs.FETCH_START; if (ru(n, a) && "number" == typeof n[a] && (o = n[a]), void 0 !== i && void 0 !== o && i >= o) return t.addEvent(e, i), t; } function ou(t, e) { iu(t, qs.FETCH_START, e), iu(t, qs.DOMAIN_LOOKUP_START, e), iu(t, qs.DOMAIN_LOOKUP_END, e), iu(t, qs.CONNECT_START, e), ru(e, "name") && e.name.startsWith("https:") && iu(t, qs.SECURE_CONNECTION_START, e), iu(t, qs.CONNECT_END, e), iu(t, qs.REQUEST_START, e), iu(t, qs.RESPONSE_START, e), iu(t, qs.RESPONSE_END, e); var n = e[qs.ENCODED_BODY_SIZE]; void 0 !== n && t.setAttribute(za, n); var r = e[qs.DECODED_BODY_SIZE]; void 0 !== r && n !== r && t.setAttribute(Fa, r); } function au() { return "undefined" != typeof location ? location.origin : void 0; } function su(t) { if ("function" == typeof URL) return new URL(t, "undefined" != typeof document ? document.baseURI : "undefined" != typeof location ? location.href : void 0); var e = ($s || ($s = document.createElement("a")), $s); return e.href = t, e; } !function (t) { t.CONNECT_END = "connectEnd", t.CONNECT_START = "connectStart", t.DECODED_BODY_SIZE = "decodedBodySize", t.DOM_COMPLETE = "domComplete", t.DOM_CONTENT_LOADED_EVENT_END = "domContentLoadedEventEnd", t.DOM_CONTENT_LOADED_EVENT_START = "domContentLoadedEventStart", t.DOM_INTERACTIVE = "domInteractive", t.DOMAIN_LOOKUP_END = "domainLookupEnd", t.DOMAIN_LOOKUP_START = "domainLookupStart", t.ENCODED_BODY_SIZE = "encodedBodySize", t.FETCH_START = "fetchStart", t.LOAD_EVENT_END = "loadEventEnd", t.LOAD_EVENT_START = "loadEventStart", t.NAVIGATION_START = "navigationStart", t.REDIRECT_END = "redirectEnd", t.REDIRECT_START = "redirectStart", t.REQUEST_START = "requestStart", t.RESPONSE_END = "responseEnd", t.RESPONSE_START = "responseStart", t.SECURE_CONNECTION_START = "secureConnectionStart", t.UNLOAD_EVENT_END = "unloadEventEnd", t.UNLOAD_EVENT_START = "unloadEventStart"; } (qs || (qs = {})), function (t) { t.COMPONENT = "component", t.HTTP_ERROR_NAME = "http.error_name", t.HTTP_STATUS_TEXT = "http.status_text"; } (Ws || (Ws = {})); var uu, cu, lu, fu, pu = "0.53.0", du = "object" == typeof globalThis ? globalThis : "object" == typeof self ? self : "object" == typeof window ? window : "object" == typeof n.g ? n.g : {}, hu = function () { var t = function (e, n) { return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) { t.__proto__ = e; } || function (t, e) { for (var n in e) Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]); }, t(e, n); }; return function (e, n) { if ("function" != typeof n && null !== n) throw new TypeError("Class extends value " + String(n) + " is not a constructor or null"); function r() { this.constructor = e; } t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r); }; } (), vu = "object" == typeof process && "node" === (null === (uu = process.release) || void 0 === uu ? void 0 : uu.name), gu = function (t) { function e(e) { void 0 === e && (e = {}); var n = t.call(this, "@opentelemetry/instrumentation-fetch", pu, e) || this; return n.component = "fetch", n.version = pu, n.moduleName = n.component, n._usedResources = new WeakSet, n._tasksCount = 0, n; } return hu(e, t), e.prototype.init = function () { }, e.prototype._addChildSpan = function (t, e) { var n = this.tracer.startSpan("CORS Preflight", { startTime: e[qs.FETCH_START] }, ti.setSpan(ei.active(), t)); this.getConfig().ignoreNetworkEvents || ou(n, e), n.end(e[qs.RESPONSE_END]); }, e.prototype._addFinalSpanAttributes = function (t, e) { var n = su(e.url); t.setAttribute(Ua, e.status), null != e.statusText && t.setAttribute(Ws.HTTP_STATUS_TEXT, e.statusText), t.setAttribute(Ma, n.host), t.setAttribute(ja, n.protocol.replace(":", "")), "undefined" != typeof navigator && t.setAttribute(Ba, navigator.userAgent); }, e.prototype._addHeaders = function (t, e) { if (!function (t, e) { var n = e || []; return ("string" == typeof n || n instanceof RegExp) && (n = [n]), su(t).origin === au() || n.some((function (e) { return eu(t, e); })); } (e, this.getConfig().propagateTraceHeaderCorsUrls)) { var n = {}; return mo.inject(ei.active(), n), void (Object.keys(n).length > 0 && this._diag.debug("headers inject skipped due to CORS policy")); } t instanceof Request || t.headers instanceof Headers || t.headers instanceof Map ? mo.inject(ei.active(), t.headers, { set: function (t, e, n) { return t.set(e, "string" == typeof n ? n : String(n)); } }) : (n = {}, mo.inject(ei.active(), n), t.headers = Object.assign({}, n, t.headers || {})); }, e.prototype._clearResources = function () { 0 === this._tasksCount && this.getConfig().clearTimingResources && (performance.clearResourceTimings(), this._usedResources = new WeakSet); }, e.prototype._createSpan = function (t, e) { var n; if (void 0 === e && (e = {}), !nu(t, this.getConfig().ignoreUrls)) { var r = (e.method || "GET").toUpperCase(), i = "HTTP " + r; return this.tracer.startSpan(i, { kind: la.CLIENT, attributes: (n = {}, n[Ws.COMPONENT] = this.moduleName, n[xa] = r, n[Da] = t, n) }); } this._diag.debug("ignoring span as url matches ignored url"); }, e.prototype._findResourceAndAddNetworkEvents = function (t, e, n) { var r = e.entries; if (!r.length) { if (!performance.getEntriesByType) return; r = performance.getEntriesByType("resource"); } var i = function (t, e, n, r, i, o) { void 0 === i && (i = new WeakSet); var a = su(t), s = function (t, e, n, r, i, o) { var a = ks(e), s = ks(n), u = r.filter((function (e) { var n = ks(Cs(e[qs.FETCH_START])), r = ks(Cs(e[qs.RESPONSE_END])); return e.initiatorType.toLowerCase() === (o || "xmlhttprequest") && e.name === t && n >= a && r <= s; })); return u.length > 0 && (u = u.filter((function (t) { return !i.has(t); }))), u; } (t = a.toString(), e, n, r, i, o); if (0 === s.length) return { mainRequest: void 0 }; if (1 === s.length) return { mainRequest: s[0] }; var u = function (t) { return t.slice().sort((function (t, e) { var n = t[qs.FETCH_START], r = e[qs.FETCH_START]; return n > r ? 1 : n < r ? -1 : 0; })); } (s); if (a.origin !== au() && u.length > 1) { var c = u[0], l = function (t, e, n) { for (var r, i = ks(n), o = ks(Cs(e)), a = t[1], s = t.length, u = 1; u < s; u++) { var c = t[u], l = ks(Cs(c[qs.FETCH_START])), f = i - ks(Cs(c[qs.RESPONSE_END])); l >= o && (!r || f < r) && (r = f, a = c); } return a; } (u, c[qs.RESPONSE_END], n), f = c[qs.RESPONSE_END]; return l[qs.FETCH_START] < f && (l = c, c = void 0), { corsPreFlightRequest: c, mainRequest: l }; } return { mainRequest: s[0] }; } (e.spanUrl, e.startTime, n, r, this._usedResources, "fetch"); if (i.mainRequest) { var o = i.mainRequest; this._markResourceAsUsed(o); var a = i.corsPreFlightRequest; a && (this._addChildSpan(t, a), this._markResourceAsUsed(a)), this.getConfig().ignoreNetworkEvents || ou(t, o); } }, e.prototype._markResourceAsUsed = function (t) { this._usedResources.add(t); }, e.prototype._endSpan = function (t, e, n) { var r = this, i = Ls(Date.now()), o = As(); this._addFinalSpanAttributes(t, n), setTimeout((function () { var n; null === (n = e.observer) || void 0 === n || n.disconnect(), r._findResourceAndAddNetworkEvents(t, e, o), r._tasksCount--, r._clearResources(), t.end(i); }), 300); }, e.prototype._patchConstructor = function () { var t = this; return function (e) { var n = t; return function () { for (var t = [], r = 0; r < arguments.length; r++) t[r] = arguments[r]; var i = this, o = su(t[0] instanceof Request ? t[0].url : String(t[0])).href, a = t[0] instanceof Request ? t[0] : t[1] || {}, s = n._createSpan(o, a); if (!s) return e.apply(this, t); var u = n._prepareSpanData(o); function c(t, e) { n._applyAttributesAfterFetch(t, a, e), n._endSpan(t, u, { status: e.status || 0, statusText: e.message, url: o }); } function l(t, e) { n._applyAttributesAfterFetch(t, a, e), e.status >= 200 && e.status < 400 ? n._endSpan(t, u, e) : n._endSpan(t, u, { status: e.status, statusText: e.statusText, url: o }); } function f(t, e, n) { try { var r = n.clone(), i = n.clone(), o = r.body; if (o) { var a = o.getReader(), s = function () { a.read().then((function (e) { e.done ? l(t, i) : s(); }), (function (e) { c(t, e); })); }; s(); } else l(t, n); } finally { e(n); } } function p(t, e, n) { try { c(t, n); } finally { e(n); } } return new Promise((function (t, r) { return ei.with(ti.setSpan(ei.active(), s), (function () { return n._addHeaders(a, o), n._tasksCount++, e.apply(i, a instanceof Request ? [a] : [o, a]).then(f.bind(i, s, t), p.bind(i, s, r)); })); })); }; }; }, e.prototype._applyAttributesAfterFetch = function (t, e, n) { var r = this, i = this.getConfig().applyCustomAttributesOnSpan; i && Gs((function () { return i(t, e, n); }), (function (t) { t && r._diag.error("applyCustomAttributesOnSpan", t); }), !0); }, e.prototype._prepareSpanData = function (t) { var e = As(), n = []; if ("function" != typeof PerformanceObserver) return { entries: n, startTime: e, spanUrl: t }; var r = new PerformanceObserver((function (e) { e.getEntries().forEach((function (e) { "fetch" === e.initiatorType && e.name === t && n.push(e); })); })); return r.observe({ entryTypes: ["resource"] }), { entries: n, observer: r, startTime: e, spanUrl: t }; }, e.prototype.enable = function () { vu ? this._diag.warn("this instrumentation is intended for web usage only, it does not instrument Node.js's fetch()") : (Xs(fetch) && (this._unwrap(du, "fetch"), this._diag.debug("removing previous patch for constructor")), this._wrap(du, "fetch", this._patchConstructor())); }, e.prototype.disable = function () { vu || (this._unwrap(du, "fetch"), this._usedResources = new WeakSet); }, e; } (tu); function mu(t, e) { return e in t; } function _u(t, e, n, r) { var i = void 0, o = void 0; mu(n, e) && "number" == typeof n[e] && (i = n[e]); var a = r || cu.FETCH_START; if (mu(n, a) && "number" == typeof n[a] && (o = n[a]), void 0 !== i && void 0 !== o && i >= o) return t.addEvent(e, i), t; } function yu(t, e) { _u(t, cu.FETCH_START, e), _u(t, cu.DOMAIN_LOOKUP_START, e), _u(t, cu.DOMAIN_LOOKUP_END, e), _u(t, cu.CONNECT_START, e), mu(e, "name") && e.name.startsWith("https:") && _u(t, cu.SECURE_CONNECTION_START, e), _u(t, cu.CONNECT_END, e), _u(t, cu.REQUEST_START, e), _u(t, cu.RESPONSE_START, e), _u(t, cu.RESPONSE_END, e); var n = e[cu.ENCODED_BODY_SIZE]; void 0 !== n && t.setAttribute(za, n); var r = e[cu.DECODED_BODY_SIZE]; void 0 !== r && n !== r && t.setAttribute(Fa, r); } function bu() { return "undefined" != typeof location ? location.origin : void 0; } function Eu(t) { if ("function" == typeof URL) return new URL(t, "undefined" != typeof document ? document.baseURI : "undefined" != typeof location ? location.href : void 0); var e = (lu || (lu = document.createElement("a")), lu); return e.href = t, e; } !function (t) { t.CONNECT_END = "connectEnd", t.CONNECT_START = "connectStart", t.DECODED_BODY_SIZE = "decodedBodySize", t.DOM_COMPLETE = "domComplete", t.DOM_CONTENT_LOADED_EVENT_END = "domContentLoadedEventEnd", t.DOM_CONTENT_LOADED_EVENT_START = "domContentLoadedEventStart", t.DOM_INTERACTIVE = "domInteractive", t.DOMAIN_LOOKUP_END = "domainLookupEnd", t.DOMAIN_LOOKUP_START = "domainLookupStart", t.ENCODED_BODY_SIZE = "encodedBodySize", t.FETCH_START = "fetchStart", t.LOAD_EVENT_END = "loadEventEnd", t.LOAD_EVENT_START = "loadEventStart", t.NAVIGATION_START = "navigationStart", t.REDIRECT_END = "redirectEnd", t.REDIRECT_START = "redirectStart", t.REQUEST_START = "requestStart", t.RESPONSE_END = "responseEnd", t.RESPONSE_START = "responseStart", t.SECURE_CONNECTION_START = "secureConnectionStart", t.UNLOAD_EVENT_END = "unloadEventEnd", t.UNLOAD_EVENT_START = "unloadEventStart"; } (cu || (cu = {})), function (t) { t.METHOD_OPEN = "open", t.METHOD_SEND = "send", t.EVENT_ABORT = "abort", t.EVENT_ERROR = "error", t.EVENT_LOAD = "loaded", t.EVENT_TIMEOUT = "timeout"; } (fu || (fu = {})); var Tu, Su = "0.53.0"; !function (t) { t.HTTP_STATUS_TEXT = "http.status_text"; } (Tu || (Tu = {})); var wu = function () { var t = function (e, n) { return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) { t.__proto__ = e; } || function (t, e) { for (var n in e) Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]); }, t(e, n); }; return function (e, n) { if ("function" != typeof n && null !== n) throw new TypeError("Class extends value " + String(n) + " is not a constructor or null"); function r() { this.constructor = e; } t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r); }; } (), Ou = function (t) { function e(e) { void 0 === e && (e = {}); var n = t.call(this, "@opentelemetry/instrumentation-xml-http-request", Su, e) || this; return n.component = "xml-http-request", n.version = Su, n.moduleName = n.component, n._tasksCount = 0, n._xhrMem = new WeakMap, n._usedResources = new WeakSet, n; } return wu(e, t), e.prototype.init = function () { }, e.prototype._addHeaders = function (t, e) { if (!function (t, e) { var n = e || []; return ("string" == typeof n || n instanceof RegExp) && (n = [n]), Eu(t).origin === bu() || n.some((function (e) { return eu(t, e); })); } (Eu(e).href, this.getConfig().propagateTraceHeaderCorsUrls)) { var n = {}; return mo.inject(ei.active(), n), void (Object.keys(n).length > 0 && this._diag.debug("headers inject skipped due to CORS policy")); } var r = {}; mo.inject(ei.active(), r), Object.keys(r).forEach((function (e) { t.setRequestHeader(e, String(r[e])); })); }, e.prototype._addChildSpan = function (t, e) { var n = this; ei.with(ti.setSpan(ei.active(), t), (function () { var t = n.tracer.startSpan("CORS Preflight", { startTime: e[cu.FETCH_START] }); n.getConfig().ignoreNetworkEvents || yu(t, e), t.end(e[cu.RESPONSE_END]); })); }, e.prototype._addFinalSpanAttributes = function (t, e, n) { if ("string" == typeof n) { var r = Eu(n); void 0 !== e.status && t.setAttribute(Ua, e.status), void 0 !== e.statusText && t.setAttribute(Tu.HTTP_STATUS_TEXT, e.statusText), t.setAttribute(Ma, r.host), t.setAttribute(ja, r.protocol.replace(":", "")), t.setAttribute(Ba, navigator.userAgent); } }, e.prototype._applyAttributesAfterXHR = function (t, e) { var n = this, r = this.getConfig().applyCustomAttributesOnSpan; "function" == typeof r && Gs((function () { return r(t, e); }), (function (t) { t && n._diag.error("applyCustomAttributesOnSpan", t); }), !0); }, e.prototype._addResourceObserver = function (t, e) { var n = this._xhrMem.get(t); n && "function" == typeof PerformanceObserver && "function" == typeof PerformanceResourceTiming && (n.createdResources = { observer: new PerformanceObserver((function (t) { var r = t.getEntries(), i = Eu(e); r.forEach((function (t) { "xmlhttprequest" === t.initiatorType && t.name === i.href && n.createdResources && n.createdResources.entries.push(t); })); })), entries: [] }, n.createdResources.observer.observe({ entryTypes: ["resource"] })); }, e.prototype._clearResources = function () { 0 === this._tasksCount && this.getConfig().clearTimingResources && (ws.clearResourceTimings(), this._xhrMem = new WeakMap, this._usedResources = new WeakSet); }, e.prototype._findResourceAndAddNetworkEvents = function (t, e, n, r, i) { if (n && r && i && t.createdResources) { var o = t.createdResources.entries; o && o.length || (o = ws.getEntriesByType("resource")); var a = function (t, e, n, r, i, o) { void 0 === i && (i = new WeakSet); var a = Eu(t), s = function (t, e, n, r, i, o) { var a = ks(e), s = ks(n), u = r.filter((function (e) { var n = ks(Cs(e[cu.FETCH_START])), r = ks(Cs(e[cu.RESPONSE_END])); return e.initiatorType.toLowerCase() === (o || "xmlhttprequest") && e.name === t && n >= a && r <= s; })); return u.length > 0 && (u = u.filter((function (t) { return !i.has(t); }))), u; } (t = a.toString(), e, n, r, i, o); if (0 === s.length) return { mainRequest: void 0 }; if (1 === s.length) return { mainRequest: s[0] }; var u = function (t) { return t.slice().sort((function (t, e) { var n = t[cu.FETCH_START], r = e[cu.FETCH_START]; return n > r ? 1 : n < r ? -1 : 0; })); } (s); if (a.origin !== bu() && u.length > 1) { var c = u[0], l = function (t, e, n) { for (var r, i = ks(n), o = ks(Cs(e)), a = t[1], s = t.length, u = 1; u < s; u++) { var c = t[u], l = ks(Cs(c[cu.FETCH_START])), f = i - ks(Cs(c[cu.RESPONSE_END])); l >= o && (!r || f < r) && (r = f, a = c); } return a; } (u, c[cu.RESPONSE_END], n), f = c[cu.RESPONSE_END]; return l[cu.FETCH_START] < f && (l = c, c = void 0), { corsPreFlightRequest: c, mainRequest: l }; } return { mainRequest: s[0] }; } (Eu(n).href, r, i, o, this._usedResources); if (a.mainRequest) { var s = a.mainRequest; this._markResourceAsUsed(s); var u = a.corsPreFlightRequest; u && (this._addChildSpan(e, u), this._markResourceAsUsed(u)), this.getConfig().ignoreNetworkEvents || yu(e, s); } } }, e.prototype._cleanPreviousSpanInformation = function (t) { var e = this._xhrMem.get(t); if (e) { var n = e.callbackToRemoveEvents; n && n(), this._xhrMem.delete(t); } }, e.prototype._createSpan = function (t, e, n) { var r; if (!nu(e, this.getConfig().ignoreUrls)) { var i = n.toUpperCase(), o = this.tracer.startSpan(i, { kind: la.CLIENT, attributes: (r = {}, r[xa] = n, r[Da] = Eu(e).toString(), r) }); return o.addEvent(fu.METHOD_OPEN), this._cleanPreviousSpanInformation(t), this._xhrMem.set(t, { span: o, spanUrl: e }), o; } this._diag.debug("ignoring span as url matches ignored url"); }, e.prototype._markResourceAsUsed = function (t) { this._usedResources.add(t); }, e.prototype._patchOpen = function () { var t = this; return function (e) { var n = t; return function () { for (var t = [], r = 0; r < arguments.length; r++) t[r] = arguments[r]; var i = t[0], o = t[1]; return n._createSpan(this, o, i), e.apply(this, t); }; }; }, e.prototype._patchSend = function () { var t = this; function e(e, n) { var r = t._xhrMem.get(n); if (r) { r.status = n.status, r.statusText = n.statusText, t._xhrMem.delete(n), r.span && t._applyAttributesAfterXHR(r.span, n); var i = As(), o = Date.now(); setTimeout((function () { !function (e, n, r, i) { var o = n.callbackToRemoveEvents; "function" == typeof o && o(); var a = n.span, s = n.spanUrl, u = n.sendStartTime; a && (t._findResourceAndAddNetworkEvents(n, a, s, u, r), a.addEvent(e, i), t._addFinalSpanAttributes(a, n, s), a.end(i), t._tasksCount--), t._clearResources(); } (e, r, i, o); }), 300); } } function n() { e(fu.EVENT_ERROR, this); } function r() { e(fu.EVENT_ABORT, this); } function i() { e(fu.EVENT_TIMEOUT, this); } function o() { this.status < 299 ? e(fu.EVENT_LOAD, this) : e(fu.EVENT_ERROR, this); } return function (e) { return function () { for (var a = this, s = [], u = 0; u < arguments.length; u++) s[u] = arguments[u]; var c = t._xhrMem.get(this); if (!c) return e.apply(this, s); var l = c.span, f = c.spanUrl; return l && f && ei.with(ti.setSpan(ei.active(), l), (function () { t._tasksCount++, c.sendStartTime = As(), l.addEvent(fu.METHOD_SEND), a.addEventListener("abort", r), a.addEventListener("error", n), a.addEventListener("load", o), a.addEventListener("timeout", i), c.callbackToRemoveEvents = function () { !function (e) { e.removeEventListener("abort", r), e.removeEventListener("error", n), e.removeEventListener("load", o), e.removeEventListener("timeout", i); var a = t._xhrMem.get(e); a && (a.callbackToRemoveEvents = void 0); } (a), c.createdResources && c.createdResources.observer.disconnect(); }, t._addHeaders(a, f), t._addResourceObserver(a, f); })), e.apply(this, s); }; }; }, e.prototype.enable = function () { this._diag.debug("applying patch to", this.moduleName, this.version), Xs(XMLHttpRequest.prototype.open) && (this._unwrap(XMLHttpRequest.prototype, "open"), this._diag.debug("removing previous patch from method open")), Xs(XMLHttpRequest.prototype.send) && (this._unwrap(XMLHttpRequest.prototype, "send"), this._diag.debug("removing previous patch from method send")), this._wrap(XMLHttpRequest.prototype, "open", this._patchOpen()), this._wrap(XMLHttpRequest.prototype, "send", this._patchSend()); }, e.prototype.disable = function () { this._diag.debug("removing patch from", this.moduleName, this.version), this._unwrap(XMLHttpRequest.prototype, "open"), this._unwrap(XMLHttpRequest.prototype, "send"), this._tasksCount = 0, this._xhrMem = new WeakMap, this._usedResources = new WeakSet; }, e; } (tu); class Ru extends Ou { constructor(t = {}) { super(t), this.parentCreateSpan = this._createSpan.bind(this); } _patchOpen() { return t => { const e = this; return function (...n) { const r = n[0]; let i = n[1]; return i instanceof URL && (i = i.href), e.parentCreateSpan(this, i, r), t.apply(this, n); }; }; } } function Lu(t, e) { null != e && (0 === e || e >= 400 && e < 600) && t.setStatus({ code: ga.ERROR }); } function Pu(t = {}) { const { fetchInstrumentationOptions: e, xhrInstrumentationOptions: n } = t, r = function (t, e) { var n = {}; for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && e.indexOf(r) < 0 && (n[r] = t[r]); if (null != t && "function" == typeof Object.getOwnPropertySymbols) { var i = 0; for (r = Object.getOwnPropertySymbols(t); i < r.length; i++) e.indexOf(r[i]) < 0 && Object.prototype.propertyIsEnumerable.call(t, r[i]) && (n[r[i]] = t[r[i]]); } return n; } (t, ["fetchInstrumentationOptions", "xhrInstrumentationOptions"]), i = function (t, e) { return Object.assign(Object.assign(Object.assign(Object.assign({}, e), { ignoreNetworkEvents: !0 }), t), { applyCustomAttributesOnSpan: (n = null == t ? void 0 : t.applyCustomAttributesOnSpan, (t, e, r) => { !function (t, e, n) { Lu(t, n instanceof Error ? 0 : n.status); } (t, 0, r), null == n || n(t, e, r); }) }); var n; } (e, r), o = function (t, e) { return Object.assign(Object.assign(Object.assign(Object.assign({}, e), { ignoreNetworkEvents: !0 }), t), { applyCustomAttributesOnSpan: (n = null == t ? void 0 : t.applyCustomAttributesOnSpan, (t, e) => { !function (t, e) { Lu(t, e.status); } (t, e), null == n || n(t, e); }) }); var n; } (n, r); return [new gu(i), new Ru(o)]; } function Au(t = {}) { var e; return "true" === (null === (e = t.attributes) || void 0 === e ? void 0 : e.isSampled) ? ka.RECORD_AND_SAMPLED : ka.NOT_RECORD; } class Cu { constructor(t, e) { this.processor = t, this.metas = e; } forceFlush() { return this.processor.forceFlush(); } onStart(t, e) { const n = this.metas.value.session; (null == n ? void 0 : n.id) && (t.attributes["session.id"] = n.id, t.attributes.session_id = n.id), this.processor.onStart(t, e); } onEnd(t) { this.processor.onEnd(t); } shutdown() { return this.processor.shutdown(); } } class ku extends It { constructor(t = {}) { super(), this.options = t, this.name = "@grafana/faro-web-tracing", this.version = x; } initialize() { var t, e, n, r, i; const o = this.options, a = {}; this.config.app.name && (a["service.name"] = this.config.app.name), this.config.app.namespace && (a["service.namespace"] = this.config.app.namespace), this.config.app.version && (a["service.version"] = this.config.app.version), this.config.app.environment && (a["deployment.environment.name"] = this.config.app.environment, a["deployment.environment"] = this.config.app.environment), Object.assign(a, o.resourceAttributes); const s = Ji.default().merge(new Ji(a)), u = new ys({ resource: s, sampler: { shouldSample: () => ({ decision: Au(this.api.getSession()) }) } }); u.addSpanProcessor(null !== (t = o.spanProcessor) && void 0 !== t ? t : new Cu(new hs(new Zs({ api: this.api }), { scheduledDelayMillis: ku.SCHEDULED_BATCH_DELAY_MS, maxExportBatchSize: 30 }), this.metas)), u.register({ propagator: null !== (e = o.propagator) && void 0 !== e ? e : new di, contextManager: null !== (n = o.contextManager) && void 0 !== n ? n : new ri }); const { propagateTraceHeaderCorsUrls: c, fetchInstrumentationOptions: l, xhrInstrumentationOptions: f } = null !== (r = this.options.instrumentationOptions) && void 0 !== r ? r : {}; !function (t) { var e, n, r = t.tracerProvider || ti.getTracerProvider(), i = t.meterProvider || Di.getMeterProvider(), o = t.loggerProvider || Hi.getLoggerProvider(); !function (t, e, n, r) { for (var i = 0, o = t.length; i < o; i++) { var a = t[i]; e && a.setTracerProvider(e), n && a.setMeterProvider(n), r && a.setLoggerProvider && a.setLoggerProvider(r), a.getConfig().enabled || a.enable(); } } (null !== (n = null === (e = t.instrumentations) || void 0 === e ? void 0 : e.flat()) && void 0 !== n ? n : [], r, i, o); } ({ instrumentations: null !== (i = o.instrumentations) && void 0 !== i ? i : Pu({ ignoreUrls: this.getIgnoreUrls(), propagateTraceHeaderCorsUrls: c, fetchInstrumentationOptions: l, xhrInstrumentationOptions: f }) }), this.api.initOTEL(ti, ei); } getIgnoreUrls() { return this.transports.transports.flatMap((t => t.getIgnoreUrls())); } } ku.SCHEDULED_BATCH_DELAY_MS = 1e3, function (t) { const e = function (t) { var e, n, r, i, o, a, s, u, c, l; const p = [], d = C(t.unpatchedConsole, t.internalLoggerLevel); return t.transports ? ((t.url || t.apiKey) && d.error('if "transports" is defined, "url" and "apiKey" should not be defined'), p.push(...t.transports)) : t.url ? p.push(new kt({ url: t.url, apiKey: t.apiKey })) : d.error('either "url" or "transports" must be defined'), { app: t.app, batching: Object.assign(Object.assign({}, V), t.batching), dedupe: null === (e = t.dedupe) || void 0 === e || e, globalObjectKey: t.globalObjectKey || "faro", instrumentations: null !== (n = t.instrumentations) && void 0 !== n ? n : sr(), internalLoggerLevel: null !== (r = t.internalLoggerLevel) && void 0 !== r ? r : P, isolate: null !== (i = t.isolate) && void 0 !== i && i, logArgsSerializer: null !== (o = t.logArgsSerializer) && void 0 !== o ? o : w, metas: function () { const e = at; return t.metas && e.push(...t.metas), f(window.k6) ? [...e, st] : e; } (), parseStacktrace: tt, paused: null !== (a = t.paused) && void 0 !== a && a, preventGlobalExposure: null !== (s = t.preventGlobalExposure) && void 0 !== s && s, transports: p, unpatchedConsole: null !== (u = t.unpatchedConsole) && void 0 !== u ? u : A, beforeSend: t.beforeSend, eventDomain: null !== (c = t.eventDomain) && void 0 !== c ? c : "browser", ignoreErrors: t.ignoreErrors, ignoreUrls: (null !== (l = t.ignoreUrls) && void 0 !== l ? l : []).concat([/\/collect(?:\/[\w]*)?$/]), sessionTracking: Object.assign(Object.assign({}, rt), t.sessionTracking), user: t.user, view: t.view, trackResources: t.trackResources, trackWebVitalsAttribution: t.trackWebVitalsAttribution }; } (t); e && H(e); } ({ url: "https://faro-collector-prod-us-west-0.grafana.net/collect/07b39176d47f619861f0773f090353a2", app: { name: "django", version: "1.0.0", environment: "production" }, instrumentations: [...sr(), new ku] });
        })();
    })();
}
